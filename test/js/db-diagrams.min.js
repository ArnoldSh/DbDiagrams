!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=!!t&&"length"in t&&t.length,i=ot.type(t);return"function"!==i&&!ot.isWindow(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ft.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return $.call(e,t)>-1!==i})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return ot.each(t.match(vt)||[],function(t,i){e[i]=!0}),e}function s(){J.removeEventListener("DOMContentLoaded",s),t.removeEventListener("load",s),ot.ready()}function a(){this.expando=ot.expando+a.uid++}function l(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(kt,"-$&").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:jt.test(i)?ot.parseJSON(i):i)}catch(r){}Mt.set(t,e,i)}else i=void 0;return i}function c(t,e,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return ot.css(t,e,"")},l=a(),c=i&&i[3]||(ot.cssNumber[e]?"":"px"),u=(ot.cssNumber[e]||"px"!==c&&+l)&&zt.exec(ot.css(t,e));if(u&&u[3]!==c){c=c||u[3],i=i||[],u=+l||1;do o=o||".5",u/=o,ot.style(t,e,u+c);while(o!==(o=a()/l)&&1!==o&&--s)}return i&&(u=+u||+l||0,r=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=r)),r}function u(t,e){var i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],i):i}function h(t,e){for(var i=0,n=t.length;i<n;i++)Nt.set(t[i],"globalEval",!e||Nt.get(e[i],"globalEval"))}function g(t,e,i,n,r){for(var o,s,a,l,c,g,d=e.createDocumentFragment(),p=[],f=0,I=t.length;f<I;f++)if(o=t[f],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(Ot.test(o)){for(s=s||d.appendChild(e.createElement("div")),a=(St.exec(o)||["",""])[1].toLowerCase(),l=Bt[a]||Bt._default,s.innerHTML=l[1]+ot.htmlPrefilter(o)+l[2],g=l[0];g--;)s=s.lastChild;ot.merge(p,s.childNodes),s=d.firstChild,s.textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",f=0;o=p[f++];)if(n&&ot.inArray(o,n)>-1)r&&r.push(o);else if(c=ot.contains(o.ownerDocument,o),s=u(d.appendChild(o),"script"),c&&h(s),i)for(g=0;o=s[g++];)Lt.test(o.type||"")&&i.push(o);return d}function d(){return!0}function p(){return!1}function f(){try{return J.activeElement}catch(t){}}function I(t,e,i,n,r,o){var s,a;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=void 0);for(a in e)I(t,a,i,n,e[a],o);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=p;else if(!r)return t;return 1===o&&(s=r,r=function(t){return ot().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ot.guid++)),t.each(function(){ot.event.add(this,e,r,n,i)})}function m(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function C(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function A(t){var e=Xt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function y(t,e){var i,n,r,o,s,a,l,c;if(1===e.nodeType){if(Nt.hasData(t)&&(o=Nt.access(t),s=Nt.set(e,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(i=0,n=c[r].length;i<n;i++)ot.event.add(e,r,c[r][i])}Mt.hasData(t)&&(a=Mt.access(t),l=ot.extend({},a),Mt.set(e,l))}}function v(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Zt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function b(t,e,i,n){e=K.apply([],e);var r,o,s,a,l,c,h=0,d=t.length,p=d-1,f=e[0],I=ot.isFunction(f);if(I||d>1&&"string"==typeof f&&!nt.checkClone&&Et.test(f))return t.each(function(r){var o=t.eq(r);I&&(e[0]=f.call(this,r,o.html())),b(o,e,i,n)});if(d&&(r=g(e,t[0].ownerDocument,!1,t,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=ot.map(u(r,"script"),C),a=s.length;h<d;h++)l=r,h!==p&&(l=ot.clone(l,!0,!0),a&&ot.merge(s,u(l,"script"))),i.call(t[h],l,h);if(a)for(c=s[s.length-1].ownerDocument,ot.map(s,A),h=0;h<a;h++)l=s[h],Lt.test(l.type||"")&&!Nt.access(l,"globalEval")&&ot.contains(c,l)&&(l.src?ot._evalUrl&&ot._evalUrl(l.src):ot.globalEval(l.textContent.replace(Ut,"")))}return t}function w(t,e,i){for(var n,r=e?ot.filter(e,t):t,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||ot.cleanData(u(n)),n.parentNode&&(i&&ot.contains(n.ownerDocument,n)&&h(u(n,"script")),n.parentNode.removeChild(n));return t}function x(t,e){var i=ot(e.createElement(t)).appendTo(e.body),n=ot.css(i[0],"display");return i.detach(),n}function N(t){var e=J,i=Vt[t];return i||(i=x(t,e),"none"!==i&&i||(Ft=(Ft||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ft[0].contentDocument,e.write(),e.close(),i=x(t,e),Ft.detach()),Vt[t]=i),i}function M(t,e,i){var n,r,o,s,a=t.style;return i=i||Qt(t),s=i?i.getPropertyValue(e)||i[e]:void 0,""!==s&&void 0!==s||ot.contains(t.ownerDocument,t)||(s=ot.style(t,e)),i&&!nt.pixelMarginRight()&&Jt.test(s)&&Ht.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function j(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function k(t){if(t in ne)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=ie.length;i--;)if(t=ie[i]+e,t in ne)return t}function D(t,e,i){var n=zt.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function z(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;o<4;o+=2)"margin"===i&&(s+=ot.css(t,i+Tt[o],!0,r)),n?("content"===i&&(s-=ot.css(t,"padding"+Tt[o],!0,r)),"margin"!==i&&(s-=ot.css(t,"border"+Tt[o]+"Width",!0,r))):(s+=ot.css(t,"padding"+Tt[o],!0,r),"padding"!==i&&(s+=ot.css(t,"border"+Tt[o]+"Width",!0,r)));return s}function T(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=Qt(t),s="border-box"===ot.css(t,"boxSizing",!1,o);if(r<=0||null==r){if(r=M(t,e,o),(r<0||null==r)&&(r=t.style[e]),Jt.test(r))return r;n=s&&(nt.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+z(t,e,i||(s?"border":"content"),n,o)+"px"}function G(t,e){for(var i,n,r,o=[],s=0,a=t.length;s<a;s++)n=t[s],n.style&&(o[s]=Nt.get(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Gt(n)&&(o[s]=Nt.access(n,"olddisplay",N(n.nodeName)))):(r=Gt(n),"none"===i&&r||Nt.set(n,"olddisplay",r?i:ot.css(n,"display"))));for(s=0;s<a;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function Z(t,e,i,n,r){return new Z.prototype.init(t,e,i,n,r)}function S(){return t.setTimeout(function(){re=void 0}),re=ot.now()}function L(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)i=Tt[n],r["margin"+i]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function B(t,e,i){for(var n,r=(W.tweeners[e]||[]).concat(W.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,e,t))return n}function O(t,e,i){var n,r,o,s,a,l,c,u,h=this,g={},d=t.style,p=t.nodeType&&Gt(t),f=Nt.get(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],c=ot.css(t,"display"),u="none"===c?Nt.get(t,"olddisplay")||N(t.nodeName):c,"inline"===u&&"none"===ot.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],se.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||void 0===f[n])continue;p=!0}g[n]=f&&f[n]||ot.style(t,n)}else c=void 0;if(ot.isEmptyObject(g))"inline"===("none"===c?N(t.nodeName):c)&&(d.display=c);else{f?"hidden"in f&&(p=f.hidden):f=Nt.access(t,"fxshow",{}),o&&(f.hidden=!p),p?ot(t).show():h.done(function(){ot(t).hide()}),h.done(function(){var e;Nt.remove(t,"fxshow");for(e in g)ot.style(t,e,g[e])});for(n in g)s=B(p?f[n]:0,n,h),n in f||(f[n]=s.start,p&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function P(t,e){var i,n,r,o,s;for(i in t)if(n=ot.camelCase(i),r=e[n],o=t[i],ot.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=ot.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function W(t,e,i){var n,r,o=0,s=W.prefilters.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=re||S(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,s=0,l=c.tweens.length;s<l;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,i]),o<1&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{},easing:ot.easing._default},i),originalProperties:e,originalOptions:i,startTime:re||S(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(P(u,c.opts.specialEasing);o<s;o++)if(n=W.prefilters[o].call(c,t,u,c.opts))return ot.isFunction(n.stop)&&(ot._queueHooks(c.elem,c.opts.queue).stop=ot.proxy(n.stop,n)),n;return ot.map(u,B,c),ot.isFunction(c.opts.start)&&c.opts.start.call(t,c),ot.fx.timer(ot.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Y(t){return t.getAttribute&&t.getAttribute("class")||""}function _(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(vt)||[];if(ot.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function R(t,e,i,n){function r(a){var l;return o[a]=!0,ot.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=t===Me;return r(e.dataTypes[0])||!o["*"]&&r("*")}function E(t,e){var i,n,r=ot.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&ot.extend(!0,t,n),t}function X(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function U(t,e,i,n){var r,o,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=u.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function F(t,e,i,n){var r;if(ot.isArray(e))ot.each(e,function(e,r){i||ze.test(t)?n(t,r):F(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(r in e)F(t+"["+r+"]",e[r],i,n)}function V(t){return ot.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H=[],J=t.document,Q=H.slice,K=H.concat,q=H.push,$=H.indexOf,tt={},et=tt.toString,it=tt.hasOwnProperty,nt={},rt="2.2.4",ot=function(t,e){return new ot.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,lt=/-([\da-z])/gi,ct=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:rt,constructor:ot,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:Q.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ot.each(this,t)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:q,sort:H.sort,splice:H.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||ot.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=s[e],n=t[e],s!==n&&(c&&n&&(ot.isPlainObject(n)||(r=ot.isArray(n)))?(r?(r=!1,o=i&&ot.isArray(i)?i:[]):o=i&&ot.isPlainObject(i)?i:{},s[e]=ot.extend(c,o,n)):void 0!==n&&(s[e]=n));return s},ot.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!ot.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;if(t.constructor&&!it.call(t,"constructor")&&!it.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||it.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=ot.trim(t),t&&(1===t.indexOf("use strict")?(e=J.createElement("script"),e.text=t,J.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(at,"ms-").replace(lt,ct)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):q.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:$.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;o<s;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,n){var r,o,s=0,a=[];if(i(t))for(r=t.length;s<r;s++)o=e(t[s],s,n),null!=o&&a.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&a.push(o);return K.apply([],a)},guid:1,proxy:function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),ot.isFunction(t))return n=Q.call(arguments,2),r=function(){return t.apply(e||this,n.concat(Q.call(arguments)))},r.guid=t.guid=t.guid||ot.guid++,r},now:Date.now,support:nt}),"function"==typeof Symbol&&(ot.fn[Symbol.iterator]=H[Symbol.iterator]),ot.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ut=function(t){function e(t,e,i,n){var r,o,s,a,l,c,h,d,p=e&&e.ownerDocument,f=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==f&&9!==f&&11!==f)return i;if(!n&&((e?e.ownerDocument||e:Y)!==G&&T(e),e=e||G,S)){if(11!==f&&(c=mt.exec(t)))if(r=c[1]){if(9===f){if(!(s=e.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(p&&(s=p.getElementById(r))&&P(e,s)&&s.id===r)return i.push(s),i}else{if(c[2])return q.apply(i,e.getElementsByTagName(t)),i;if((r=c[3])&&v.getElementsByClassName&&e.getElementsByClassName)return q.apply(i,e.getElementsByClassName(r)),i}if(v.qsa&&!U[t+" "]&&(!L||!L.test(t))){if(1!==f)p=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(At,"\\$&"):e.setAttribute("id",a=W),h=N(t),o=h.length,l=gt.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=l+" "+g(h[o]);d=h.join(","),p=Ct.test(t)&&u(e.parentNode)||e}if(d)try{return q.apply(i,p.querySelectorAll(d)),i}catch(I){}finally{a===W&&e.removeAttribute("id")}}}return j(t.replace(at,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>b.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[W]=!0,t}function r(t){var e=G.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=i.length;n--;)b.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function g(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=R++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,l,c,u=[_,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(c=e[W]||(e[W]={}),l=c[e.uniqueID]||(c[e.uniqueID]={}),(a=l[n])&&a[0]===_&&a[1]===o)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,s))return!0}}}function p(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function f(t,i,n){for(var r=0,o=i.length;r<o;r++)e(t,i[r],n);return n}function I(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(o=t[a])&&(i&&!i(o,n,r)||(s.push(o),c&&e.push(a)));return s}function m(t,e,i,r,o,s){return r&&!r[W]&&(r=m(r)),o&&!o[W]&&(o=m(o,s)),n(function(n,s,a,l){var c,u,h,g=[],d=[],p=s.length,m=n||f(e||"*",a.nodeType?[a]:a,[]),C=!t||!n&&e?m:I(m,g,t,a,l),A=i?o||(n?t:p||r)?[]:s:C;if(i&&i(C,A,a,l),r)for(c=I(A,d),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(A[d[u]]=!(C[d[u]]=h));if(n){if(o||t){if(o){for(c=[],u=A.length;u--;)(h=A[u])&&c.push(C[u]=h);o(null,A=[],c,l)}for(u=A.length;u--;)(h=A[u])&&(c=o?tt(n,h):g[u])>-1&&(n[c]=!(s[c]=h))}}else A=I(A===s?A.splice(p,A.length):A),o?o(null,s,A,l):q.apply(s,A)})}function C(t){for(var e,i,n,r=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],a=o?1:0,l=d(function(t){return t===e},s,!0),c=d(function(t){return tt(e,t)>-1},s,!0),u=[function(t,i,n){var r=!o&&(n||i!==k)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,r}];a<r;a++)if(i=b.relative[t[a].type])u=[d(p(u),i)];else{if(i=b.filter[t[a].type].apply(null,t[a].matches),i[W]){for(n=++a;n<r&&!b.relative[t[n].type];n++);return m(a>1&&p(u),a>1&&g(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),i,a<n&&C(t.slice(a,n)),n<r&&C(t=t.slice(n)),n<r&&g(t))}u.push(i)}return p(u)}function A(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,c){var u,h,g,d=0,p="0",f=n&&[],m=[],C=k,A=n||o&&b.find.TAG("*",c),y=_+=null==C?1:Math.random()||.1,v=A.length;for(c&&(k=s===G||s||c);p!==v&&null!=(u=A[p]);p++){if(o&&u){for(h=0,s||u.ownerDocument===G||(T(u),a=!S);g=t[h++];)if(g(u,s||G,a)){l.push(u);break}c&&(_=y)}r&&((u=!g&&u)&&d--,n&&f.push(u))}if(d+=p,r&&p!==d){for(h=0;g=i[h++];)g(f,m,s,a);if(n){if(d>0)for(;p--;)f[p]||m[p]||(m[p]=Q.call(l));m=I(m)}q.apply(l,m),c&&!n&&m.length>0&&d+i.length>1&&e.uniqueSort(l)}return c&&(_=y,k=C),f};return r?n(s):s}var y,v,b,w,x,N,M,j,k,D,z,T,G,Z,S,L,B,O,P,W="sizzle"+1*new Date,Y=t.document,_=0,R=0,E=i(),X=i(),U=i(),F=function(t,e){return t===e&&(z=!0),0},V=1<<31,H={}.hasOwnProperty,J=[],Q=J.pop,K=J.push,q=J.push,$=J.slice,tt=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",ot=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(ot),gt=new RegExp("^"+nt+"$"),dt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,It=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ct=/[+~]/,At=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),vt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},bt=function(){T()};try{q.apply(J=$.call(Y.childNodes),Y.childNodes),J[Y.childNodes.length].nodeType}catch(wt){q={apply:J.length?function(t,e){K.apply(t,$.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}v=e.support={},x=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},T=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:Y;return n!==G&&9===n.nodeType&&n.documentElement?(G=n,Z=G.documentElement,S=!x(G),(i=G.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",bt,!1):i.attachEvent&&i.attachEvent("onunload",bt)),v.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),v.getElementsByTagName=r(function(t){return t.appendChild(G.createComment("")),!t.getElementsByTagName("*").length}),v.getElementsByClassName=It.test(G.getElementsByClassName),v.getById=r(function(t){return Z.appendChild(t).id=W,!G.getElementsByName||!G.getElementsByName(W).length}),v.getById?(b.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&S){var i=e.getElementById(t);return i?[i]:[]}},b.filter.ID=function(t){var e=t.replace(yt,vt);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(yt,vt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),b.find.TAG=v.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):v.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},b.find.CLASS=v.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&S)return e.getElementsByClassName(t)},B=[],L=[],(v.qsa=It.test(G.querySelectorAll))&&(r(function(t){Z.appendChild(t).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+W+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+W+"+*").length||L.push(".#.+[+~]")}),r(function(t){var e=G.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(v.matchesSelector=It.test(O=Z.matches||Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.msMatchesSelector))&&r(function(t){v.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),B.push("!=",ot)}),L=L.length&&new RegExp(L.join("|")),B=B.length&&new RegExp(B.join("|")),e=It.test(Z.compareDocumentPosition),P=e||It.test(Z.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},F=e?function(t,e){if(t===e)return z=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!v.sortDetached&&e.compareDocumentPosition(t)===i?t===G||t.ownerDocument===Y&&P(Y,t)?-1:e===G||e.ownerDocument===Y&&P(Y,e)?1:D?tt(D,t)-tt(D,e):0:4&i?-1:1)}:function(t,e){if(t===e)return z=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],l=[e];if(!r||!o)return t===G?-1:e===G?1:r?-1:o?1:D?tt(D,t)-tt(D,e):0;if(r===o)return s(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===Y?-1:l[n]===Y?1:0},G):G},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==G&&T(t),i=i.replace(ut,"='$1']"),v.matchesSelector&&S&&!U[i+" "]&&(!B||!B.test(i))&&(!L||!L.test(i)))try{var n=O.call(t,i);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,G,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==G&&T(t),P(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==G&&T(t);var i=b.attrHandle[e.toLowerCase()],n=i&&H.call(b.attrHandle,e.toLowerCase())?i(t,e,!S):void 0;return void 0!==n?n:v.attributes||!S?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(z=!v.detectDuplicates,D=!v.sortStable&&t.slice(0),t.sort(F),z){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return D=null,t},w=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=w(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=w(e);return i},b=e.selectors={cacheLength:50,createPseudo:n,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(yt,vt),t[3]=(t[3]||t[4]||t[5]||"").replace(yt,vt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ht.test(i)&&(e=N(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(yt,vt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&E(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(st," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,g,d,p,f=o!==s?"nextSibling":"previousSibling",I=e.parentNode,m=a&&e.nodeName.toLowerCase(),C=!l&&!a,A=!1;if(I){if(o){for(;f;){for(g=e;g=g[f];)if(a?g.nodeName.toLowerCase()===m:1===g.nodeType)return!1;p=f="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?I.firstChild:I.lastChild],s&&C){for(g=I,h=g[W]||(g[W]={}),u=h[g.uniqueID]||(h[g.uniqueID]={}),c=u[t]||[],d=c[0]===_&&c[1],A=d&&c[2],g=d&&I.childNodes[d];g=++d&&g&&g[f]||(A=d=0)||p.pop();)if(1===g.nodeType&&++A&&g===e){u[t]=[_,d,A];break}}else if(C&&(g=e,h=g[W]||(g[W]={}),u=h[g.uniqueID]||(h[g.uniqueID]={}),c=u[t]||[],d=c[0]===_&&c[1],A=d),A===!1)for(;(g=++d&&g&&g[f]||(A=d=0)||p.pop())&&((a?g.nodeName.toLowerCase()!==m:1!==g.nodeType)||!++A||(C&&(h=g[W]||(g[W]={}),u=h[g.uniqueID]||(h[g.uniqueID]={}),u[t]=[_,A]),g!==e)););return A-=r,A===n||A%n===0&&A/n>=0}}},PSEUDO:function(t,i){var r,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[W]?o(i):o.length>1?(r=[t,t,"",i],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=tt(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=M(t.replace(at,"$1"));return r[W]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(yt,vt),function(e){return(e.textContent||e.innerText||w(e)).indexOf(t)>-1}}),lang:n(function(t){return gt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(yt,vt).toLowerCase(),function(e){var i;do if(i=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===Z},focus:function(t){return t===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[i<0?i+e:i]}),even:c(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;i<e;i+=2)t.push(i);
return t}),lt:c(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}},b.pseudos.nth=b.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[y]=a(y);for(y in{submit:!0,reset:!0})b.pseudos[y]=l(y);return h.prototype=b.filters=b.pseudos,b.setFilters=new h,N=e.tokenize=function(t,i){var n,r,o,s,a,l,c,u=X[t+" "];if(u)return i?0:u.slice(0);for(a=t,l=[],c=b.preFilter;a;){n&&!(r=lt.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=ct.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(at," ")}),a=a.slice(n.length));for(s in b.filter)!(r=dt[s].exec(a))||c[s]&&!(r=c[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):X(t,l).slice(0)},M=e.compile=function(t,e){var i,n=[],r=[],o=U[t+" "];if(!o){for(e||(e=N(t)),i=e.length;i--;)o=C(e[i]),o[W]?n.push(o):r.push(o);o=U(t,A(r,n)),o.selector=t}return o},j=e.select=function(t,e,i,n){var r,o,s,a,l,c="function"==typeof t&&t,h=!n&&N(t=c.selector||t);if(i=i||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&v.getById&&9===e.nodeType&&S&&b.relative[o[1].type]){if(e=(b.find.ID(s.matches[0].replace(yt,vt),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=dt.needsContext.test(t)?0:o.length;r--&&(s=o[r],!b.relative[a=s.type]);)if((l=b.find[a])&&(n=l(s.matches[0].replace(yt,vt),Ct.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&g(o),!t)return q.apply(i,n),i;break}}return(c||M(t,h))(n,e,!S,i,!e||Ct.test(t)&&u(e.parentNode)||e),i},v.sortStable=W.split("").sort(F).join("")===W,v.detectDuplicates=!!z,T(),v.sortDetached=r(function(t){return 1&t.compareDocumentPosition(G.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),v.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var n;if(!i)return t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=ut,ot.expr=ut.selectors,ot.expr[":"]=ot.expr.pseudos,ot.uniqueSort=ot.unique=ut.uniqueSort,ot.text=ut.getText,ot.isXMLDoc=ut.isXML,ot.contains=ut.contains;var ht=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&ot(t).is(i))break;n.push(t)}return n},gt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},dt=ot.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ft=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=this.length,n=[],r=this;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;e<i;e++)if(ot.contains(r[e],this))return!0}));for(e=0;e<i;e++)ot.find(t,r[e],n);return n=this.pushStack(i>1?ot.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&dt.test(t)?ot(t):t||[],!1).length}});var It,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ct=ot.fn.init=function(t,e,i){var n,r;if(!t)return this;if(i=i||It,"string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:mt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:J,!0)),pt.test(n[1])&&ot.isPlainObject(e))for(n in e)ot.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?void 0!==i.ready?i.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};Ct.prototype=ot.fn,It=ot(J);var At=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({has:function(t){var e=ot(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(ot.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=dt.test(t)||"string"!=typeof t?ot(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?ot.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?$.call(ot(t),this[0]):$.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.uniqueSort(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ht(t,"parentNode")},parentsUntil:function(t,e,i){return ht(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return ht(t,"nextSibling")},prevAll:function(t){return ht(t,"previousSibling")},nextUntil:function(t,e,i){return ht(t,"nextSibling",i)},prevUntil:function(t,e,i){return ht(t,"previousSibling",i)},siblings:function(t){return gt((t.parentNode||{}).firstChild,t)},children:function(t){return gt(t.firstChild)},contents:function(t){return t.contentDocument||ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var r=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=ot.filter(n,r)),this.length>1&&(yt[t]||ot.uniqueSort(r),At.test(t)&&r.reverse()),this.pushStack(r)}});var vt=/\S+/g;ot.Callbacks=function(t){t="string"==typeof t?o(t):ot.extend({},t);var e,i,n,r,s=[],a=[],l=-1,c=function(){for(r=t.once,n=e=!0;a.length;l=-1)for(i=a.shift();++l<s.length;)s[l].apply(i[0],i[1])===!1&&t.stopOnFalse&&(l=s.length,i=!1);t.memory||(i=!1),e=!1,r&&(s=i?[]:"")},u={add:function(){return s&&(i&&!e&&(l=s.length-1,a.push(i)),function n(e){ot.each(e,function(e,i){ot.isFunction(i)?t.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==ot.type(i)&&n(i)})}(arguments),i&&!e&&c()),this},remove:function(){return ot.each(arguments,function(t,e){for(var i;(i=ot.inArray(e,s,i))>-1;)s.splice(i,1),i<=l&&l--}),this},has:function(t){return t?ot.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=a=[],i||(s=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=i||[],i=[t,i.slice?i.slice():i],a.push(i),e||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,o){var s=ot.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},r={};return n.pipe=n.then,ot.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=Q.call(arguments),s=o.length,a=1!==s||t&&ot.isFunction(t.promise)?s:0,l=1===a?t:ot.Deferred(),c=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?Q.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);r<s;r++)o[r]&&ot.isFunction(o[r].promise)?o[r].promise().progress(c(r,i,e)).done(c(r,n,o)).fail(l.reject):--a;return a||l.resolveWith(n,o),l.promise()}});var bt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){(t===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,t!==!0&&--ot.readyWait>0||(bt.resolveWith(J,[ot]),ot.fn.triggerHandler&&(ot(J).triggerHandler("ready"),ot(J).off("ready"))))}}),ot.ready.promise=function(e){return bt||(bt=ot.Deferred(),"complete"===J.readyState||"loading"!==J.readyState&&!J.documentElement.doScroll?t.setTimeout(ot.ready):(J.addEventListener("DOMContentLoaded",s),t.addEventListener("load",s))),bt.promise(e)},ot.ready.promise();var wt=function(t,e,i,n,r,o,s){var a=0,l=t.length,c=null==i;if("object"===ot.type(i)){r=!0;for(a in i)wt(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,ot.isFunction(n)||(s=!0),c&&(s?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(ot(t),i)})),e))for(;a<l;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:c?e.call(t):l?e(t[0],i):o},xt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};a.uid=1,a.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!xt(t))return{};var e=t[this.expando];return e||(e={},xt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[e]=i;else for(n in e)r[n]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,ot.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,r,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{ot.isArray(e)?n=e.concat(e.map(ot.camelCase)):(r=ot.camelCase(e),e in o?n=[e,r]:(n=r,n=n in o?[n]:n.match(vt)||[])),i=n.length;for(;i--;)delete o[n[i]]}(void 0===e||ot.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ot.isEmptyObject(e)}};var Nt=new a,Mt=new a,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,kt=/[A-Z]/g;ot.extend({hasData:function(t){return Mt.hasData(t)||Nt.hasData(t)},data:function(t,e,i){return Mt.access(t,e,i)},removeData:function(t,e){Mt.remove(t,e)},_data:function(t,e,i){return Nt.access(t,e,i)},_removeData:function(t,e){Nt.remove(t,e)}}),ot.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=Mt.get(o),1===o.nodeType&&!Nt.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(o,n,r[n])));Nt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Mt.set(this,t)}):wt(this,function(e){var i,n;if(o&&void 0===e){if(i=Mt.get(o,t)||Mt.get(o,t.replace(kt,"-$&").toLowerCase()),void 0!==i)return i;if(n=ot.camelCase(t),i=Mt.get(o,n),void 0!==i)return i;if(i=l(o,n,void 0),void 0!==i)return i}else n=ot.camelCase(t),this.each(function(){var i=Mt.get(this,n);Mt.set(this,n,e),t.indexOf("-")>-1&&void 0!==i&&Mt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Mt.remove(this,t)})}}),ot.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Nt.get(t,e),i&&(!n||ot.isArray(i)?n=Nt.access(t,e,ot.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,r=i.shift(),o=ot._queueHooks(t,e),s=function(){ot.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Nt.get(t,i)||Nt.access(t,i,{empty:ot.Callbacks("once memory").add(function(){Nt.remove(t,[e+"queue",i])})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=ot.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=Nt.get(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,zt=new RegExp("^(?:([+-])=|)("+Dt+")([a-z%]*)$","i"),Tt=["Top","Right","Bottom","Left"],Gt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Zt=/^(?:checkbox|radio)$/i,St=/<([\w:-]+)/,Lt=/^$|\/(?:java|ecma)script/i,Bt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bt.optgroup=Bt.option,Bt.tbody=Bt.tfoot=Bt.colgroup=Bt.caption=Bt.thead,Bt.th=Bt.td;var Ot=/<|&#?\w+;/;!function(){var t=J.createDocumentFragment(),e=t.appendChild(J.createElement("div")),i=J.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),nt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Pt=/^key/,Wt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Yt=/^([^.]*)(?:\.(.+)|)/;ot.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,c,u,h,g,d,p,f,I=Nt.get(t);if(I)for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=ot.guid++),(l=I.events)||(l=I.events={}),(s=I.handle)||(s=I.handle=function(e){return"undefined"!=typeof ot&&ot.event.triggered!==e.type?ot.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(vt)||[""],c=e.length;c--;)a=Yt.exec(e[c])||[],d=f=a[1],p=(a[2]||"").split(".").sort(),d&&(h=ot.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,h=ot.event.special[d]||{},u=ot.extend({type:d,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&ot.expr.match.needsContext.test(r),namespace:p.join(".")},o),(g=l[d])||(g=l[d]=[],g.delegateCount=0,h.setup&&h.setup.call(t,n,p,s)!==!1||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?g.splice(g.delegateCount++,0,u):g.push(u),ot.event.global[d]=!0)},remove:function(t,e,i,n,r){var o,s,a,l,c,u,h,g,d,p,f,I=Nt.hasData(t)&&Nt.get(t);if(I&&(l=I.events)){for(e=(e||"").match(vt)||[""],c=e.length;c--;)if(a=Yt.exec(e[c])||[],d=f=a[1],p=(a[2]||"").split(".").sort(),d){for(h=ot.event.special[d]||{},d=(n?h.delegateType:h.bindType)||d,g=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=g.length;o--;)u=g[o],!r&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(g.splice(o,1),u.selector&&g.delegateCount--,h.remove&&h.remove.call(t,u));s&&!g.length&&(h.teardown&&h.teardown.call(t,p,I.handle)!==!1||ot.removeEvent(t,d,I.handle),delete l[d])}else for(d in l)ot.event.remove(t,d+e[c],i,n,!0);ot.isEmptyObject(l)&&Nt.remove(t,"handle events")}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,r,o,s=[],a=Q.call(arguments),l=(Nt.get(this,"events")||{})[t.type]||[],c=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=ot.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,n=((ot.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(n=[],i=0;i<a;i++)o=e[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?ot(r,this).index(l)>-1:ot.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&s.push({elem:l,handlers:n})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||J,n=i.documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[ot.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Wt.test(r)?this.mouseHooks:Pt.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new ot.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=J),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===f()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ot.nodeName(this,"input"))return this.click(),!1},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ot.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={constructor:ot.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===n||ot.contains(n,r))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ot.fn.extend({on:function(t,e,i,n){return I(this,t,e,i,n)},one:function(t,e,i,n){return I(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})}});var _t=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Rt=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Xt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ot.extend({htmlPrefilter:function(t){return t.replace(_t,"<$1></$2>")},clone:function(t,e,i){var n,r,o,s,a=t.cloneNode(!0),l=ot.contains(t.ownerDocument,t);if(!(nt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(s=u(a),o=u(t),n=0,r=o.length;n<r;n++)v(o[n],s[n]);if(e)if(i)for(o=o||u(t),s=s||u(a),n=0,r=o.length;n<r;n++)y(o[n],s[n]);else y(t,a);return s=u(a,"script"),s.length>0&&h(s,!l&&u(t,"script")),a},cleanData:function(t){for(var e,i,n,r=ot.event.special,o=0;void 0!==(i=t[o]);o++)if(xt(i)){if(e=i[Nt.expando]){if(e.events)for(n in e.events)r[n]?ot.event.remove(i,n):ot.removeEvent(i,n,e.handle);i[Nt.expando]=void 0}i[Mt.expando]&&(i[Mt.expando]=void 0)}}}),ot.fn.extend({domManip:b,detach:function(t){return w(this,t,!0)},remove:function(t){return w(this,t)},text:function(t){return wt(this,function(t){return void 0===t?ot.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return b(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.appendChild(t)}})},prepend:function(){return b(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return b(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return b(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ot.cleanData(u(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return wt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Rt.test(t)&&!Bt[(St.exec(t)||["",""])[1].toLowerCase()]){t=ot.htmlPrefilter(t);try{for(;i<n;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(u(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return b(this,arguments,function(e){var i=this.parentNode;ot.inArray(this,t)<0&&(ot.cleanData(u(this)),i&&i.replaceChild(e,this))},t)}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=[],r=ot(t),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),ot(r[s])[e](i),q.apply(n,i.get());return this.pushStack(n)}});var Ft,Vt={HTML:"block",BODY:"block"},Ht=/^margin/,Jt=new RegExp("^("+Dt+")(?!px)[a-z%]+$","i"),Qt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},Kt=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r},qt=J.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",qt.appendChild(s);var e=t.getComputedStyle(a);i="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,qt.removeChild(s)}var i,n,r,o,s=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),ot.extend(nt,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),r},reliableMarginLeft:function(){return null==n&&e(),o},reliableMarginRight:function(){var e,i=a.appendChild(J.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",qt.appendChild(s),e=!parseFloat(t.getComputedStyle(i).marginRight),qt.removeChild(s),a.removeChild(i),e}}))}();var $t=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ie=["Webkit","O","Moz","ms"],ne=J.createElement("div").style;ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=M(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=ot.camelCase(e),l=t.style;return e=ot.cssProps[a]||(ot.cssProps[a]=k(a)||a),s=ot.cssHooks[e]||ot.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e]:(o=typeof i,"string"===o&&(r=zt.exec(i))&&r[1]&&(i=c(t,e,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(ot.cssNumber[a]?"":"px")),nt.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l[e]=i)),void 0)}},css:function(t,e,i,n){var r,o,s,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=k(a)||a),s=ot.cssHooks[e]||ot.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=M(t,e,n)),"normal"===r&&e in ee&&(r=ee[e]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){if(i)return $t.test(ot.css(t,"display"))&&0===t.offsetWidth?Kt(t,te,function(){return T(t,e,n)}):T(t,e,n)},set:function(t,i,n){var r,o=n&&Qt(t),s=n&&z(t,e,n,"border-box"===ot.css(t,"boxSizing",!1,o),o);return s&&(r=zt.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=ot.css(t,e)),D(t,i,s)}}}),ot.cssHooks.marginLeft=j(nt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(M(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),ot.cssHooks.marginRight=j(nt.reliableMarginRight,function(t,e){if(e)return Kt(t,{display:"inline-block"},M,[t,"marginRight"])}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+Tt[n]+e]=o[n]||o[n-2]||o[0];return r}},Ht.test(t)||(ot.cssHooks[t+e].set=D)}),ot.fn.extend({css:function(t,e){return wt(this,function(t,e,i){var n,r,o={},s=0;if(ot.isArray(e)){for(n=Qt(t),r=e.length;s<r;s++)o[e[s]]=ot.css(t,e[s],!1,n);return o}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return G(this,!0)},hide:function(){return G(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Gt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=Z,Z.prototype={constructor:Z,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||ot.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(ot.cssNumber[i]?"":"px")},cur:function(){var t=Z.propHooks[this.prop];return t&&t.get?t.get(this):Z.propHooks._default.get(this)},run:function(t){var e,i=Z.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Z.propHooks._default.set(this),this}},Z.prototype.init.prototype=Z.prototype,Z.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ot.cssProps[t.prop]]&&!ot.cssHooks[t.prop]?t.elem[t.prop]=t.now:ot.style(t.elem,t.prop,t.now+t.unit)}}},Z.propHooks.scrollTop=Z.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ot.fx=Z.prototype.init,ot.fx.step={};var re,oe,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;ot.Animation=ot.extend(W,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return c(i.elem,t,zt.exec(e),i),i}]},tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.match(vt);for(var i,n=0,r=t.length;n<r;n++)i=t[n],W.tweeners[i]=W.tweeners[i]||[],W.tweeners[i].unshift(e)},prefilters:[O],prefilter:function(t,e){e?W.prefilters.unshift(t):W.prefilters.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=ot.isEmptyObject(t),o=ot.speed(e,i,n),s=function(){var e=W(this,ot.extend({},t),o);(r||Nt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=ot.timers,s=Nt.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ae.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));!e&&i||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=Nt.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=ot.timers,s=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(L(e,!0),t,n,r)}}),ot.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=0,i=ot.timers;for(re=ot.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||ot.fx.stop(),re=void 0},ot.fx.timer=function(t){
ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){oe||(oe=t.setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){t.clearInterval(oe),oe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,i){return e=ot.fx?ot.fx.speeds[e]||e:e,i=i||"fx",this.queue(i,function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=J.createElement("input"),e=J.createElement("select"),i=e.appendChild(J.createElement("option"));t.type="checkbox",nt.checkOn=""!==t.value,nt.optSelected=i.selected,e.disabled=!0,nt.optDisabled=!i.disabled,t=J.createElement("input"),t.value="t",t.type="radio",nt.radioValue="t"===t.value}();var le,ce=ot.expr.attrHandle;ot.fn.extend({attr:function(t,e){return wt(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?ot.prop(t,e,i):(1===o&&ot.isXMLDoc(t)||(e=e.toLowerCase(),r=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?le:void 0)),void 0!==i?null===i?void ot.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:(n=ot.find.attr(t,e),null==n?void 0:n))},attrHooks:{type:{set:function(t,e){if(!nt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(vt);if(o&&1===t.nodeType)for(;i=o[r++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)}}),le={set:function(t,e,i){return e===!1?ot.removeAttr(t,i):t.setAttribute(i,i),i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=ce[e]||ot.find.attr;ce[e]=function(t,e,n){var r,o;return n||(o=ce[e],ce[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,ce[e]=o),r}});var ue=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return wt(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ot.propFix[t]||t]})}}),ot.extend({prop:function(t,e,i){var n,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ot.isXMLDoc(t)||(e=ot.propFix[e]||e,r=ot.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ue.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),nt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this});var ge=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,r,o,s,a,l=0;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,Y(this)))});if("string"==typeof t&&t)for(e=t.match(vt)||[];i=this[l++];)if(r=Y(i),n=1===i.nodeType&&(" "+r+" ").replace(ge," ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=ot.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,o,s,a,l=0;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(vt)||[];i=this[l++];)if(r=Y(i),n=1===i.nodeType&&(" "+r+" ").replace(ge," ")){for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=ot.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,Y(this),e),e)}):this.each(function(){var e,n,r,o;if("string"===i)for(n=0,r=ot(this),o=t.match(vt)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||(e=Y(this),e&&Nt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Nt.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+Y(i)+" ").replace(ge," ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g,pe=/[\x20\t\r\n\f]+/g;ot.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,ot(this).val()):t,null==r?r="":"number"==typeof r?r+="":ot.isArray(r)&&(r=ot.map(r,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=ot.valHooks[r.type]||ot.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(de,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t)).replace(pe," ")}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,s=o?null:[],a=o?r+1:n.length,l=r<0?a:o?r:0;l<a;l++)if(i=n[l],(i.selected||l===r)&&(nt.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=ot.makeArray(e),s=r.length;s--;)n=r[s],(n.selected=ot.inArray(ot.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){if(ot.isArray(e))return t.checked=ot.inArray(ot(t).val(),e)>-1}},nt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var fe=/^(?:focusinfocus|focusoutblur)$/;ot.extend(ot.event,{trigger:function(e,i,n,r){var o,s,a,l,c,u,h,g=[n||J],d=it.call(e,"type")?e.type:e,p=it.call(e,"namespace")?e.namespace.split("."):[];if(s=a=n=n||J,3!==n.nodeType&&8!==n.nodeType&&!fe.test(d+ot.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),c=d.indexOf(":")<0&&"on"+d,e=e[ot.expando]?e:new ot.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),h=ot.event.special[d]||{},r||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!r&&!h.noBubble&&!ot.isWindow(n)){for(l=h.delegateType||d,fe.test(l+d)||(s=s.parentNode);s;s=s.parentNode)g.push(s),a=s;a===(n.ownerDocument||J)&&g.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=g[o++])&&!e.isPropagationStopped();)e.type=o>1?l:h.bindType||d,u=(Nt.get(s,"events")||{})[e.type]&&Nt.get(s,"handle"),u&&u.apply(s,i),u=c&&s[c],u&&u.apply&&xt(s)&&(e.result=u.apply(s,i),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||h._default&&h._default.apply(g.pop(),i)!==!1||!xt(n)||c&&ot.isFunction(n[d])&&!ot.isWindow(n)&&(a=n[c],a&&(n[c]=null),ot.event.triggered=d,n[d](),ot.event.triggered=void 0,a&&(n[c]=a)),e.result}},simulate:function(t,e,i){var n=ot.extend(new ot.Event,i,{type:t,isSimulated:!0});ot.event.trigger(n,null,e)}}),ot.fn.extend({trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return ot.event.trigger(t,e,i,!0)}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),nt.focusin="onfocusin"in t,nt.focusin||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t))};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=Nt.access(n,e);r||n.addEventListener(t,i,!0),Nt.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Nt.access(n,e)-1;r?Nt.access(n,e,r):(n.removeEventListener(t,i,!0),Nt.remove(n,e))}}});var Ie=t.location,me=ot.now(),Ce=/\?/;ot.parseJSON=function(t){return JSON.parse(t+"")},ot.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(n){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var Ae=/#.*$/,ye=/([?&])_=[^&]*/,ve=/^(.*?):[ \t]*([^\r\n]*)$/gm,be=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,we=/^(?:GET|HEAD)$/,xe=/^\/\//,Ne={},Me={},je="*/".concat("*"),ke=J.createElement("a");ke.href=Ie.href,ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie.href,type:"GET",isLocal:be.test(Ie.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?E(E(t,ot.ajaxSettings),e):E(ot.ajaxSettings,t)},ajaxPrefilter:_(Ne),ajaxTransport:_(Me),ajax:function(e,i){function n(e,i,n,a){var c,h,C,A,v,w=i;2!==y&&(y=2,l&&t.clearTimeout(l),r=void 0,s=a||"",b.readyState=e>0?4:0,c=e>=200&&e<300||304===e,n&&(A=X(g,b,n)),A=U(g,A,b,c),c?(g.ifModified&&(v=b.getResponseHeader("Last-Modified"),v&&(ot.lastModified[o]=v),v=b.getResponseHeader("etag"),v&&(ot.etag[o]=v)),204===e||"HEAD"===g.type?w="nocontent":304===e?w="notmodified":(w=A.state,h=A.data,C=A.error,c=!C)):(C=w,!e&&w||(w="error",e<0&&(e=0))),b.status=e,b.statusText=(i||w)+"",c?f.resolveWith(d,[h,w,b]):f.rejectWith(d,[b,w,C]),b.statusCode(m),m=void 0,u&&p.trigger(c?"ajaxSuccess":"ajaxError",[b,g,c?h:C]),I.fireWith(d,[b,w]),u&&(p.trigger("ajaxComplete",[b,g]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=void 0),i=i||{};var r,o,s,a,l,c,u,h,g=ot.ajaxSetup({},i),d=g.context||g,p=g.context&&(d.nodeType||d.jquery)?ot(d):ot.event,f=ot.Deferred(),I=ot.Callbacks("once memory"),m=g.statusCode||{},C={},A={},y=0,v="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=ve.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return y||(t=A[i]=A[i]||t,C[t]=e),this},overrideMimeType:function(t){return y||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(y<2)for(e in t)m[e]=[m[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||v;return r&&r.abort(e),n(0,e),this}};if(f.promise(b).complete=I.add,b.success=b.done,b.error=b.fail,g.url=((e||g.url||Ie.href)+"").replace(Ae,"").replace(xe,Ie.protocol+"//"),g.type=i.method||i.type||g.method||g.type,g.dataTypes=ot.trim(g.dataType||"*").toLowerCase().match(vt)||[""],null==g.crossDomain){c=J.createElement("a");try{c.href=g.url,c.href=c.href,g.crossDomain=ke.protocol+"//"+ke.host!=c.protocol+"//"+c.host}catch(w){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=ot.param(g.data,g.traditional)),R(Ne,g,i,b),2===y)return b;u=ot.event&&g.global,u&&0===ot.active++&&ot.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!we.test(g.type),o=g.url,g.hasContent||(g.data&&(o=g.url+=(Ce.test(o)?"&":"?")+g.data,delete g.data),g.cache===!1&&(g.url=ye.test(o)?o.replace(ye,"$1_="+me++):o+(Ce.test(o)?"&":"?")+"_="+me++)),g.ifModified&&(ot.lastModified[o]&&b.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&b.setRequestHeader("If-None-Match",ot.etag[o])),(g.data&&g.hasContent&&g.contentType!==!1||i.contentType)&&b.setRequestHeader("Content-Type",g.contentType),b.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+je+"; q=0.01":""):g.accepts["*"]);for(h in g.headers)b.setRequestHeader(h,g.headers[h]);if(g.beforeSend&&(g.beforeSend.call(d,b,g)===!1||2===y))return b.abort();v="abort";for(h in{success:1,error:1,complete:1})b[h](g[h]);if(r=R(Me,g,i,b)){if(b.readyState=1,u&&p.trigger("ajaxSend",[b,g]),2===y)return b;g.async&&g.timeout>0&&(l=t.setTimeout(function(){b.abort("timeout")},g.timeout));try{y=1,r.send(C,n)}catch(w){if(!(y<2))throw w;n(-1,w)}}else n(-1,"No Transport");return b},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,r){return ot.isFunction(i)&&(r=r||n,n=i,i=void 0),ot.ajax(ot.extend({url:t,type:e,dataType:r,data:i,success:n},ot.isPlainObject(t)&&t))}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){var e;return ot.isFunction(t)?this.each(function(e){ot(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ot(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return!ot.expr.filters.visible(t)},ot.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var De=/%20/g,ze=/\[\]$/,Te=/\r?\n/g,Ge=/^(?:submit|button|image|reset|file)$/i,Ze=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],r=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){r(this.name,this.value)});else for(i in t)F(i,t[i],e,r);return n.join("&").replace(De,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Ze.test(this.nodeName)&&!Ge.test(t)&&(this.checked||!Zt.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(Te,"\r\n")}}):{name:e.name,value:i.replace(Te,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Se={0:200,1223:204},Le=ot.ajaxSettings.xhr();nt.cors=!!Le&&"withCredentials"in Le,nt.ajax=Le=!!Le,ot.ajaxTransport(function(e){var i,n;if(nt.cors||Le&&!e.crossDomain)return{send:function(r,o){var s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)a[s]=e.xhrFields[s];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Se[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,r){e=ot("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&r("error"===t.type?404:200,t.type)}),J.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Be=[],Oe=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Be.pop()||ot.expando+"_"+me++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(Oe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Oe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Oe,"$1"+r):e.jsonp!==!1&&(e.url+=(Ce.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||ot.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===o?ot(t).removeProp(r):t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,Be.push(r)),s&&ot.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||J;var n=pt.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=g([t],e,r),r&&r.length&&ot(r).remove(),ot.merge([],n.childNodes))};var Pe=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&Pe)return Pe.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>-1&&(n=ot.trim(t.slice(a)),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&ot.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,o||[t.responseText,e,t])})}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length},ot.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,c,u=ot.css(t,"position"),h=ot(t),g={};"static"===u&&(t.style.position="relative"),a=h.offset(),o=ot.css(t,"top"),l=ot.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(n=h.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,i,ot.extend({},a))),null!=e.top&&(g.top=e.top-a.top+s),null!=e.left&&(g.left=e.left-a.left+r),"using"in e?e.using.call(t,g):h.css(g)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return e=o.documentElement,ot.contains(e,n)?(r=n.getBoundingClientRect(),i=V(o),{top:r.top+i.pageYOffset-e.clientTop,left:r.left+i.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===ot.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(n=t.offset()),n.top+=ot.css(t[0],"borderTopWidth",!0),n.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ot.css(i,"marginTop",!0),left:e.left-n.left-ot.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||qt})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;ot.fn[t]=function(n){return wt(this,function(t,n,r){var o=V(t);return void 0===r?o?o[e]:t[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):t[n]=r)},t,n,arguments.length)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=j(nt.pixelPosition,function(t,i){if(i)return i=M(t,e),Jt.test(i)?ot(t).position()[e]+"px":i})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return wt(this,function(e,i,n){var r;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?ot.css(e,i,s):ot.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),ot.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var We=t.jQuery,Ye=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=Ye),e&&t.jQuery===ot&&(t.jQuery=We),ot},e||(t.jQuery=t.$=ot),ot}),function(){function t(t,e){if(t!==e){var i=null===t,n=t===b,r=t===t,o=null===e,s=e===b,a=e===e;if(t>e&&!o||!r||i&&!s&&a||n&&a)return 1;if(t<e&&!i||!a||o&&!n&&r||s&&r)return-1}return 0}function e(t,e,i){for(var n=t.length,r=i?n:-1;i?r--:++r<n;)if(e(t[r],r,t))return r;return-1}function i(t,e,i){if(e!==e)return d(t,i);for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function n(t){return"function"==typeof t||!1}function r(t){return null==t?"":t+""}function o(t,e){for(var i=-1,n=t.length;++i<n&&e.indexOf(t.charAt(i))>-1;);return i}function s(t,e){for(var i=t.length;i--&&e.indexOf(t.charAt(i))>-1;);return i}function a(e,i){return t(e.criteria,i.criteria)||e.index-i.index}function l(e,i,n){for(var r=-1,o=e.criteria,s=i.criteria,a=o.length,l=n.length;++r<a;){var c=t(o[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*("asc"===u||u===!0?1:-1)}}return e.index-i.index}function c(t){return _t[t]}function u(t){return Rt[t]}function h(t,e,i){return e?t=Ut[t]:i&&(t=Ft[t]),"\\"+t}function g(t){return"\\"+Ft[t]}function d(t,e,i){for(var n=t.length,r=e+(i?0:-1);i?r--:++r<n;){var o=t[r];if(o!==o)return r}return-1}function p(t){return!!t&&"object"==typeof t}function f(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function I(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;)t[i]===e&&(t[i]=_,o[++r]=i);return o}function m(t,e){for(var i,n=-1,r=t.length,o=-1,s=[];++n<r;){var a=t[n],l=e?e(a,n,t):a;n&&i===l||(i=l,s[++o]=a)}return s}function C(t){for(var e=-1,i=t.length;++e<i&&f(t.charCodeAt(e)););return e}function A(t){for(var e=t.length;e--&&f(t.charCodeAt(e)););return e}function y(t){return Et[t]}function v(f){function H(t){if(p(t)&&!Da(t)&&!(t instanceof _t)){if(t instanceof tt)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return dn(t)}return new tt(t)}function q(){}function tt(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function _t(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ks,this.__views__=[]}function Rt(){var t=new _t(this.__wrapped__);return t.__actions__=ie(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ie(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ie(this.__views__),t}function Et(){if(this.__filtered__){var t=new _t(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Xt(){var t=this.__wrapped__.value(),e=this.__dir__,i=Da(t),n=e<0,r=i?t.length:0,o=Ui(0,r,this.__views__),s=o.start,a=o.end,l=a-s,c=n?a:s-1,u=this.__iteratees__,h=u.length,g=0,d=ws(l,this.__takeCount__);if(!i||r<O||r==l&&d==l)return ii(n&&i?t.reverse():t,this.__actions__);var p=[];t:for(;l--&&g<d;){c+=e;for(var f=-1,I=t[c];++f<h;){var m=u[f],C=m.iteratee,A=m.type,y=C(I);if(A==W)I=y;else if(!y){if(A==P)continue t;break t}}p[g++]=I}return p}function Ut(){this.__data__={}}function Ft(t){return this.has(t)&&delete this.__data__[t]}function Vt(t){return"__proto__"==t?b:this.__data__[t]}function Ht(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Jt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Qt(t){var e=t?t.length:0;for(this.data={hash:ms(null),set:new hs};e--;)this.push(t[e])}function Kt(t,e){var i=t.data,n="string"==typeof e||Sr(e)?i.set.has(e):i.hash[e];return n?0:-1}function qt(t){var e=this.data;"string"==typeof t||Sr(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var i=-1,n=t.length,r=-1,o=e.length,s=_o(n+o);++i<n;)s[i]=t[i];for(;++r<o;)s[i++]=e[r];return s}function ie(t,e){var i=-1,n=t.length;for(e||(e=_o(n));++i<n;)e[i]=t[i];return e}function ne(t,e){for(var i=-1,n=t.length;++i<n&&e(t[i],i,t)!==!1;);return t}function re(t,e){for(var i=t.length;i--&&e(t[i],i,t)!==!1;);return t}function oe(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function se(t,e,i,n){for(var r=-1,o=t.length,s=n,a=s;++r<o;){var l=t[r],c=+e(l);i(c,s)&&(s=c,a=l)}return a}function ae(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[++r]=s)}return o}function le(t,e){for(var i=-1,n=t.length,r=_o(n);++i<n;)r[i]=e(t[i],i,t);return r}function ce(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function ue(t,e,i,n){var r=-1,o=t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function he(t,e,i,n){var r=t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function ge(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function de(t,e){for(var i=t.length,n=0;i--;)n+=+e(t[i])||0;return n}function pe(t,e){return t===b?e:t}function fe(t,e,i,n){return t!==b&&es.call(n,i)?t:e}function Ie(t,e,i){for(var n=-1,r=Ya(e),o=r.length;++n<o;){var s=r[n],a=t[s],l=i(a,e[s],s,t,e);(l===l?l===a:a!==a)&&(a!==b||s in t)||(t[s]=l)}return t}function me(t,e){return null==e?t:Ae(e,Ya(e),t)}function Ce(t,e){for(var i=-1,n=null==t,r=!n&&Qi(t),o=r?t.length:0,s=e.length,a=_o(s);++i<s;){var l=e[i];r?a[i]=Ki(l,o)?t[l]:b:a[i]=n?b:t[l]}return a}function Ae(t,e,i){i||(i={});for(var n=-1,r=e.length;++n<r;){var o=e[n];i[o]=t[o]}return i}function ye(t,e,i){var n=typeof t;return"function"==n?e===b?t:oi(t,e,i):null==t?ko:"object"==n?We(t):e===b?So(t):Ye(t,e)}function ve(t,e,i,n,r,o,s){var a;if(i&&(a=r?i(t,n,r):i(t)),a!==b)return a;if(!Sr(t))return t;var l=Da(t);if(l){if(a=Fi(t),!e)return ie(t,a)}else{var c=ns.call(t),u=c==V;if(c!=Q&&c!=R&&(!u||r))return Yt[c]?Hi(t,c,e):r?t:{};if(a=Vi(u?{}:t),!e)return me(a,t)}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(l?ne:Te)(t,function(n,r){a[r]=ve(n,e,i,r,t,o,s)}),a}function be(t,e,i){if("function"!=typeof t)throw new Qo(Y);return gs(function(){t.apply(b,i)},e)}function we(t,e){var n=t?t.length:0,r=[];if(!n)return r;var o=-1,s=Ri(),a=s==i,l=a&&e.length>=O?pi(e):null,c=e.length;l&&(s=Kt,a=!1,e=l);t:for(;++o<n;){var u=t[o];if(a&&u===u){for(var h=c;h--;)if(e[h]===u)continue t;r.push(u)}else s(e,u,0)<0&&r.push(u)}return r}function xe(t,e){var i=!0;return Bs(t,function(t,n,r){return i=!!e(t,n,r)}),i}function Ne(t,e,i,n){var r=n,o=r;return Bs(t,function(t,s,a){var l=+e(t,s,a);(i(l,r)||l===n&&l===o)&&(r=l,o=t)}),o}function Me(t,e,i,n){var r=t.length;for(i=null==i?0:+i||0,i<0&&(i=-i>r?0:r+i),n=n===b||n>r?r:+n||0,n<0&&(n+=r),r=i>n?0:n>>>0,i>>>=0;i<r;)t[i++]=e;return t}function je(t,e){var i=[];return Bs(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function ke(t,e,i,n){var r;return i(t,function(t,i,o){if(e(t,i,o))return r=n?i:t,!1}),r}function De(t,e,i,n){n||(n=[]);for(var r=-1,o=t.length;++r<o;){var s=t[r];p(s)&&Qi(s)&&(i||Da(s)||Nr(s))?e?De(s,e,i,n):ce(n,s):i||(n[n.length]=s)}return n}function ze(t,e){return Ps(t,e,to)}function Te(t,e){return Ps(t,e,Ya)}function Ge(t,e){return Ws(t,e,Ya)}function Ze(t,e){for(var i=-1,n=e.length,r=-1,o=[];++i<n;){var s=e[i];Zr(t[s])&&(o[++r]=s)}return o}function Se(t,e,i){if(null!=t){i!==b&&i in hn(t)&&(e=[i]);for(var n=0,r=e.length;null!=t&&n<r;)t=t[e[n++]];return n&&n==r?t:b}}function Le(t,e,i,n,r,o){return t===e||(null==t||null==e||!Sr(t)&&!p(e)?t!==t&&e!==e:Be(t,e,Le,i,n,r,o))}function Be(t,e,i,n,r,o,s){var a=Da(t),l=Da(e),c=E,u=E;a||(c=ns.call(t),c==R?c=Q:c!=Q&&(a=Er(t))),l||(u=ns.call(e),u==R?u=Q:u!=Q&&(l=Er(e)));var h=c==Q,g=u==Q,d=c==u;if(d&&!a&&!h)return Pi(t,e,c);if(!r){var p=h&&es.call(t,"__wrapped__"),f=g&&es.call(e,"__wrapped__");if(p||f)return i(p?t.value():t,f?e.value():e,n,r,o,s)}if(!d)return!1;o||(o=[]),s||(s=[]);for(var I=o.length;I--;)if(o[I]==t)return s[I]==e;o.push(t),s.push(e);var m=(a?Oi:Wi)(t,e,i,n,r,o,s);return o.pop(),s.pop(),m}function Oe(t,e,i){var n=e.length,r=n,o=!i;if(null==t)return!r;for(t=hn(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<r;){s=e[n];var a=s[0],l=t[a],c=s[1];if(o&&s[2]){if(l===b&&!(a in t))return!1}else{var u=i?i(l,c,a):b;if(!(u===b?Le(c,l,i,!0):u))return!1}}return!0}function Pe(t,e){var i=-1,n=Qi(t)?_o(t.length):[];return Bs(t,function(t,r,o){n[++i]=e(t,r,o)}),n}function We(t){var e=Ei(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null!=t&&(t[i]===n&&(n!==b||i in hn(t)))}}return function(t){return Oe(t,e)}}function Ye(t,e){var i=Da(t),n=$i(t)&&nn(e),r=t+"";return t=gn(t),function(o){if(null==o)return!1;var s=r;if(o=hn(o),(i||!n)&&!(s in o)){if(o=1==t.length?o:Se(o,He(t,0,-1)),null==o)return!1;s=Mn(t),o=hn(o)}return o[s]===e?e!==b||s in o:Le(e,o[s],b,!0)}}function _e(t,e,i,n,r){if(!Sr(t))return t;var o=Qi(e)&&(Da(e)||Er(e)),s=o?b:Ya(e);return ne(s||e,function(a,l){if(s&&(l=a,a=e[l]),p(a))n||(n=[]),r||(r=[]),Re(t,e,l,_e,i,n,r);else{var c=t[l],u=i?i(c,a,l,t,e):b,h=u===b;h&&(u=a),u===b&&(!o||l in t)||!h&&(u===u?u===c:c!==c)||(t[l]=u)}}),t}function Re(t,e,i,n,r,o,s){for(var a=o.length,l=e[i];a--;)if(o[a]==l)return void(t[i]=s[a]);var c=t[i],u=r?r(c,l,i,t,e):b,h=u===b;h&&(u=l,Qi(l)&&(Da(l)||Er(l))?u=Da(c)?c:Qi(c)?ie(c):[]:Yr(l)||Nr(l)?u=Nr(c)?Hr(c):Yr(c)?c:{}:h=!1),o.push(l),s.push(u),h?t[i]=n(u,l,r,o,s):(u===u?u!==c:c===c)&&(t[i]=u)}function Ee(t){return function(e){return null==e?b:e[t]}}function Xe(t){var e=t+"";return t=gn(t),function(i){return Se(i,t,e)}}function Ue(t,e){for(var i=t?e.length:0;i--;){var n=e[i];if(n!=r&&Ki(n)){var r=n;ds.call(t,n,1)}}return t}function Fe(t,e){return t+Cs(Ms()*(e-t+1))}function Ve(t,e,i,n,r){return r(t,function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)}),i}function He(t,e,i){var n=-1,r=t.length;e=null==e?0:+e||0,e<0&&(e=-e>r?0:r+e),i=i===b||i>r?r:+i||0,i<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var o=_o(r);++n<r;)o[n]=t[n+e];return o}function Je(t,e){var i;return Bs(t,function(t,n,r){return i=e(t,n,r),!i}),!!i}function Qe(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function Ke(t,e,i){var n=Yi(),r=-1;e=le(e,function(t){return n(t)});var o=Pe(t,function(t){var i=le(e,function(e){return e(t)});return{criteria:i,index:++r,value:t}});return Qe(o,function(t,e){return l(t,e,i)})}function qe(t,e){var i=0;return Bs(t,function(t,n,r){i+=+e(t,n,r)||0}),i}function $e(t,e){var n=-1,r=Ri(),o=t.length,s=r==i,a=s&&o>=O,l=a?pi():null,c=[];
l?(r=Kt,s=!1):(a=!1,l=e?[]:c);t:for(;++n<o;){var u=t[n],h=e?e(u,n,t):u;if(s&&u===u){for(var g=l.length;g--;)if(l[g]===h)continue t;e&&l.push(h),c.push(u)}else r(l,h,0)<0&&((e||a)&&l.push(h),c.push(u))}return c}function ti(t,e){for(var i=-1,n=e.length,r=_o(n);++i<n;)r[i]=t[e[i]];return r}function ei(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?He(t,n?0:o,n?o+1:r):He(t,n?o+1:0,n?r:o)}function ii(t,e){var i=t;i instanceof _t&&(i=i.value());for(var n=-1,r=e.length;++n<r;){var o=e[n];i=o.func.apply(o.thisArg,ce([i],o.args))}return i}function ni(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e===e&&r<=Ts){for(;n<r;){var o=n+r>>>1,s=t[o];(i?s<=e:s<e)&&null!==s?n=o+1:r=o}return r}return ri(t,e,ko,i)}function ri(t,e,i,n){e=i(e);for(var r=0,o=t?t.length:0,s=e!==e,a=null===e,l=e===b;r<o;){var c=Cs((r+o)/2),u=i(t[c]),h=u!==b,g=u===u;if(s)var d=g||n;else d=a?g&&h&&(n||null!=u):l?g&&(n||h):null!=u&&(n?u<=e:u<e);d?r=c+1:o=c}return ws(o,zs)}function oi(t,e,i){if("function"!=typeof t)return ko;if(e===b)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,s){return t.call(e,i,n,r,o,s)}}return function(){return t.apply(e,arguments)}}function si(t){var e=new ss(t.byteLength),i=new ps(e);return i.set(new ps(t)),e}function ai(t,e,i){for(var n=i.length,r=-1,o=bs(t.length-n,0),s=-1,a=e.length,l=_o(a+o);++s<a;)l[s]=e[s];for(;++r<n;)l[i[r]]=t[r];for(;o--;)l[s++]=t[r++];return l}function li(t,e,i){for(var n=-1,r=i.length,o=-1,s=bs(t.length-r,0),a=-1,l=e.length,c=_o(s+l);++o<s;)c[o]=t[o];for(var u=o;++a<l;)c[u+a]=e[a];for(;++n<r;)c[u+i[n]]=t[o++];return c}function ci(t,e){return function(i,n,r){var o=e?e():{};if(n=Yi(n,r,3),Da(i))for(var s=-1,a=i.length;++s<a;){var l=i[s];t(o,l,n(l,s,i),i)}else Bs(i,function(e,i,r){t(o,e,n(e,i,r),r)});return o}}function ui(t){return mr(function(e,i){var n=-1,r=null==e?0:i.length,o=r>2?i[r-2]:b,s=r>2?i[2]:b,a=r>1?i[r-1]:b;for("function"==typeof o?(o=oi(o,a,5),r-=2):(o="function"==typeof a?a:b,r-=o?1:0),s&&qi(i[0],i[1],s)&&(o=r<3?b:o,r=1);++n<r;){var l=i[n];l&&t(e,l,o)}return e})}function hi(t,e){return function(i,n){var r=i?Rs(i):0;if(!en(r))return t(i,n);for(var o=e?r:-1,s=hn(i);(e?o--:++o<r)&&n(s[o],o,s)!==!1;);return i}}function gi(t){return function(e,i,n){for(var r=hn(e),o=n(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var l=o[a];if(i(r[l],l,r)===!1)break}return e}}function di(t,e){function i(){var r=this&&this!==$t&&this instanceof i?n:t;return r.apply(e,arguments)}var n=Ii(t);return i}function pi(t){return ms&&hs?new Qt(t):null}function fi(t){return function(e){for(var i=-1,n=No(uo(e)),r=n.length,o="";++i<r;)o=t(o,n[i],i);return o}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ls(t.prototype),n=t.apply(i,e);return Sr(n)?n:i}}function mi(t){function e(i,n,r){r&&qi(i,n,r)&&(n=b);var o=Bi(i,t,b,b,b,b,b,n);return o.placeholder=e.placeholder,o}return e}function Ci(t,e){return mr(function(i){var n=i[0];return null==n?n:(i.push(e),t.apply(b,i))})}function Ai(t,e){return function(i,n,r){if(r&&qi(i,n,r)&&(n=b),n=Yi(n,r,3),1==n.length){i=Da(i)?i:un(i);var o=se(i,n,t,e);if(!i.length||o!==e)return o}return Ne(i,n,t,e)}}function yi(t,i){return function(n,r,o){if(r=Yi(r,o,3),Da(n)){var s=e(n,r,i);return s>-1?n[s]:b}return ke(n,r,t)}}function vi(t){return function(i,n,r){return i&&i.length?(n=Yi(n,r,3),e(i,n,t)):-1}}function bi(t){return function(e,i,n){return i=Yi(i,n,3),ke(e,i,t,!0)}}function wi(t){return function(){for(var e,i=arguments.length,n=t?i:-1,r=0,o=_o(i);t?n--:++n<i;){var s=o[r++]=arguments[n];if("function"!=typeof s)throw new Qo(Y);!e&&tt.prototype.thru&&"wrapper"==_i(s)&&(e=new tt([],(!0)))}for(n=e?-1:i;++n<i;){s=o[n];var a=_i(s),l="wrapper"==a?_s(s):b;e=l&&tn(l[0])&&l[1]==(T|j|D|G)&&!l[4].length&&1==l[9]?e[_i(l[0])].apply(e,l[3]):1==s.length&&tn(s)?e[a]():e.thru(s)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Da(n)&&n.length>=O)return e.plant(n).value();for(var r=0,s=i?o[r].apply(this,t):n;++r<i;)s=o[r].call(this,s);return s}}}function xi(t,e){return function(i,n,r){return"function"==typeof n&&r===b&&Da(i)?t(i,n):e(i,oi(n,r,3))}}function Ni(t){return function(e,i,n){return"function"==typeof i&&n===b||(i=oi(i,n,3)),t(e,i,to)}}function Mi(t){return function(e,i,n){return"function"==typeof i&&n===b||(i=oi(i,n,3)),t(e,i)}}function ji(t){return function(e,i,n){var r={};return i=Yi(i,n,3),Te(e,function(e,n,o){var s=i(e,n,o);n=t?s:n,e=t?e:s,r[n]=e}),r}}function ki(t){return function(e,i,n){return e=r(e),(t?e:"")+Gi(e,i,n)+(t?"":e)}}function Di(t){var e=mr(function(i,n){var r=I(n,e.placeholder);return Bi(i,t,b,n,r)});return e}function zi(t,e){return function(i,n,r,o){var s=arguments.length<3;return"function"==typeof n&&o===b&&Da(i)?t(i,n,r,s):Ve(i,Yi(n,o,4),r,s,e)}}function Ti(t,e,i,n,r,o,s,a,l,c){function u(){for(var A=arguments.length,y=A,v=_o(A);y--;)v[y]=arguments[y];if(n&&(v=ai(v,n,r)),o&&(v=li(v,o,s)),p||m){var w=u.placeholder,M=I(v,w);if(A-=M.length,A<c){var j=a?ie(a):b,k=bs(c-A,0),T=p?M:b,G=p?b:M,Z=p?v:b,S=p?b:v;e|=p?D:z,e&=~(p?z:D),f||(e&=~(x|N));var L=[t,e,i,Z,T,S,G,j,l,k],B=Ti.apply(b,L);return tn(t)&&Es(B,L),B.placeholder=w,B}}var O=g?i:this,P=d?O[t]:t;return a&&(v=ln(v,a)),h&&l<v.length&&(v.length=l),this&&this!==$t&&this instanceof u&&(P=C||Ii(t)),P.apply(O,v)}var h=e&T,g=e&x,d=e&N,p=e&j,f=e&M,m=e&k,C=d?b:Ii(t);return u}function Gi(t,e,i){var n=t.length;if(e=+e,n>=e||!ys(e))return"";var r=e-n;return i=null==i?" ":i+"",mo(i,Is(r/i.length)).slice(0,r)}function Zi(t,e,i,n){function r(){for(var e=-1,a=arguments.length,l=-1,c=n.length,u=_o(c+a);++l<c;)u[l]=n[l];for(;a--;)u[l++]=arguments[++e];var h=this&&this!==$t&&this instanceof r?s:t;return h.apply(o?i:this,u)}var o=e&x,s=Ii(t);return r}function Si(t){var e=Uo[t];return function(t,i){return i=i===b?0:+i||0,i?(i=cs(10,i),e(t*i)/i):e(t)}}function Li(t){return function(e,i,n,r){var o=Yi(n);return null==n&&o===ye?ni(e,i,t):ri(e,i,o(n,r,1),t)}}function Bi(t,e,i,n,r,o,s,a){var l=e&N;if(!l&&"function"!=typeof t)throw new Qo(Y);var c=n?n.length:0;if(c||(e&=~(D|z),n=r=b),c-=r?r.length:0,e&z){var u=n,h=r;n=r=b}var g=l?b:_s(t),d=[t,e,i,n,r,u,h,o,s,a];if(g&&(rn(d,g),e=d[1],a=d[9]),d[9]=null==a?l?0:t.length:bs(a-c,0)||0,e==x)var p=di(d[0],d[2]);else p=e!=D&&e!=(x|D)||d[4].length?Ti.apply(b,d):Zi.apply(b,d);var f=g?Ys:Es;return f(p,d)}function Oi(t,e,i,n,r,o,s){var a=-1,l=t.length,c=e.length;if(l!=c&&!(r&&c>l))return!1;for(;++a<l;){var u=t[a],h=e[a],g=n?n(r?h:u,r?u:h,a):b;if(g!==b){if(g)continue;return!1}if(r){if(!ge(e,function(t){return u===t||i(u,t,n,r,o,s)}))return!1}else if(u!==h&&!i(u,h,n,r,o,s))return!1}return!0}function Pi(t,e,i){switch(i){case X:case U:return+t==+e;case F:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:t==+e;case K:case $:return t==e+""}return!1}function Wi(t,e,i,n,r,o,s){var a=Ya(t),l=a.length,c=Ya(e),u=c.length;if(l!=u&&!r)return!1;for(var h=l;h--;){var g=a[h];if(!(r?g in e:es.call(e,g)))return!1}for(var d=r;++h<l;){g=a[h];var p=t[g],f=e[g],I=n?n(r?f:p,r?p:f,g):b;if(!(I===b?i(p,f,n,r,o,s):I))return!1;d||(d="constructor"==g)}if(!d){var m=t.constructor,C=e.constructor;if(m!=C&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C))return!1}return!0}function Yi(t,e,i){var n=H.callback||Mo;return n=n===Mo?ye:n,i?n(t,e,i):n}function _i(t){for(var e=t.name,i=Ss[e],n=i?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function Ri(t,e,n){var r=H.indexOf||xn;return r=r===xn?i:r,t?r(t,e,n):r}function Ei(t){for(var e=eo(t),i=e.length;i--;)e[i][2]=nn(e[i][1]);return e}function Xi(t,e){var i=null==t?b:t[e];return Or(i)?i:b}function Ui(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ws(e,t+s);break;case"takeRight":t=bs(t,e-s)}}return{start:t,end:e}}function Fi(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Vi(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Vo),new e}function Hi(t,e,i){var n=t.constructor;switch(e){case et:return si(t);case X:case U:return new n((+t));case it:case nt:case rt:case ot:case st:case at:case lt:case ct:case ut:var r=t.buffer;return new n(i?si(r):r,t.byteOffset,t.length);case J:case $:return new n(t);case K:var o=new n(t.source,Dt.exec(t));o.lastIndex=t.lastIndex}return o}function Ji(t,e,i){null==t||$i(e,t)||(e=gn(e),t=1==e.length?t:Se(t,He(e,0,-1)),e=Mn(e));var n=null==t?t:t[e];return null==n?b:n.apply(t,i)}function Qi(t){return null!=t&&en(Rs(t))}function Ki(t,e){return t="number"==typeof t||Gt.test(t)?+t:-1,e=null==e?Gs:e,t>-1&&t%1==0&&t<e}function qi(t,e,i){if(!Sr(i))return!1;var n=typeof e;if("number"==n?Qi(i)&&Ki(e,i.length):"string"==n&&e in i){var r=i[e];return t===t?t===r:r!==r}return!1}function $i(t,e){var i=typeof t;if("string"==i&&bt.test(t)||"number"==i)return!0;if(Da(t))return!1;var n=!vt.test(t);return n||null!=e&&t in hn(e)}function tn(t){var e=_i(t);if(!(e in _t.prototype))return!1;var i=H[e];if(t===i)return!0;var n=_s(i);return!!n&&t===n[0]}function en(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Gs}function nn(t){return t===t&&!Sr(t)}function rn(t,e){var i=t[1],n=e[1],r=i|n,o=r<T,s=n==T&&i==j||n==T&&i==G&&t[7].length<=e[8]||n==(T|G)&&i==j;if(!o&&!s)return t;n&x&&(t[2]=e[2],r|=i&x?0:M);var a=e[3];if(a){var l=t[3];t[3]=l?ai(l,a,e[4]):ie(a),t[4]=l?I(t[3],_):ie(e[4])}return a=e[5],a&&(l=t[5],t[5]=l?li(l,a,e[6]):ie(a),t[6]=l?I(t[5],_):ie(e[6])),a=e[7],a&&(t[7]=ie(a)),n&T&&(t[8]=null==t[8]?e[8]:ws(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function on(t,e){return t===b?e:za(t,e,on)}function sn(t,e){t=hn(t);for(var i=-1,n=e.length,r={};++i<n;){var o=e[i];o in t&&(r[o]=t[o])}return r}function an(t,e){var i={};return ze(t,function(t,n,r){e(t,n,r)&&(i[n]=t)}),i}function ln(t,e){for(var i=t.length,n=ws(e.length,i),r=ie(t);n--;){var o=e[n];t[n]=Ki(o,i)?r[o]:b}return t}function cn(t){for(var e=to(t),i=e.length,n=i&&t.length,r=!!n&&en(n)&&(Da(t)||Nr(t)),o=-1,s=[];++o<i;){var a=e[o];(r&&Ki(a,n)||es.call(t,a))&&s.push(a)}return s}function un(t){return null==t?[]:Qi(t)?Sr(t)?t:Vo(t):oo(t)}function hn(t){return Sr(t)?t:Vo(t)}function gn(t){if(Da(t))return t;var e=[];return r(t).replace(wt,function(t,i,n,r){e.push(n?r.replace(jt,"$1"):i||t)}),e}function dn(t){return t instanceof _t?t.clone():new tt(t.__wrapped__,t.__chain__,ie(t.__actions__))}function pn(t,e,i){e=(i?qi(t,e,i):null==e)?1:bs(Cs(e)||1,1);for(var n=0,r=t?t.length:0,o=-1,s=_o(Is(r/e));n<r;)s[++o]=He(t,n,n+=e);return s}function fn(t){for(var e=-1,i=t?t.length:0,n=-1,r=[];++e<i;){var o=t[e];o&&(r[++n]=o)}return r}function In(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),He(t,e<0?0:e)):[]}function mn(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),He(t,0,e<0?0:e)):[]}function Cn(t,e,i){return t&&t.length?ei(t,Yi(e,i,3),!0,!0):[]}function An(t,e,i){return t&&t.length?ei(t,Yi(e,i,3),!0):[]}function yn(t,e,i,n){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&qi(t,e,i)&&(i=0,n=r),Me(t,e,i,n)):[]}function vn(t){return t?t[0]:b}function bn(t,e,i){var n=t?t.length:0;return i&&qi(t,e,i)&&(e=!1),n?De(t,e):[]}function wn(t){var e=t?t.length:0;return e?De(t,!0):[]}function xn(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?bs(r+n,0):n;else if(n){var o=ni(t,e);return o<r&&(e===e?e===t[o]:t[o]!==t[o])?o:-1}return i(t,e,n||0)}function Nn(t){return mn(t,1)}function Mn(t){var e=t?t.length:0;return e?t[e-1]:b}function jn(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(i<0?bs(n+i,0):ws(i||0,n-1))+1;else if(i){r=ni(t,e,!0)-1;var o=t[r];return(e===e?e===o:o!==o)?r:-1}if(e!==e)return d(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function kn(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=Ri(),r=t.length;++i<r;)for(var o=0,s=t[i];(o=n(e,s,o))>-1;)ds.call(e,o,1);return e}function Dn(t,e,i){var n=[];if(!t||!t.length)return n;var r=-1,o=[],s=t.length;for(e=Yi(e,i,3);++r<s;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}return Ue(t,o),n}function zn(t){return In(t,1)}function Tn(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&qi(t,e,i)&&(e=0,i=n),He(t,e,i)):[]}function Gn(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),He(t,0,e<0?0:e)):[]}function Zn(t,e,i){var n=t?t.length:0;return n?((i?qi(t,e,i):null==e)&&(e=1),e=n-(+e||0),He(t,e<0?0:e)):[]}function Sn(t,e,i){return t&&t.length?ei(t,Yi(e,i,3),!1,!0):[]}function Ln(t,e,i){return t&&t.length?ei(t,Yi(e,i,3)):[]}function Bn(t,e,n,r){var o=t?t.length:0;if(!o)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=qi(t,e,r)?b:e,e=!1);var s=Yi();return null==n&&s===ye||(n=s(n,r,3)),e&&Ri()==i?m(t,n):$e(t,n)}function On(t){if(!t||!t.length)return[];var e=-1,i=0;t=ae(t,function(t){if(Qi(t))return i=bs(t.length,i),!0});for(var n=_o(i);++e<i;)n[e]=le(t,Ee(e));return n}function Pn(t,e,i){var n=t?t.length:0;if(!n)return[];var r=On(t);return null==e?r:(e=oi(e,i,4),le(r,function(t){return ue(t,e,b,!0)}))}function Wn(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(Qi(i))var n=n?ce(we(n,i),we(i,n)):i}return n?$e(n):[]}function Yn(t,e){var i=-1,n=t?t.length:0,r={};for(!n||e||Da(t[0])||(e=[]);++i<n;){var o=t[i];e?r[o]=e[i]:o&&(r[o[0]]=o[1])}return r}function _n(t){var e=H(t);return e.__chain__=!0,e}function Rn(t,e,i){return e.call(i,t),t}function En(t,e,i){return e.call(i,t)}function Xn(){return _n(this)}function Un(){return new tt(this.value(),this.__chain__)}function Fn(t){for(var e,i=this;i instanceof q;){var n=dn(i);e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e}function Vn(){var t=this.__wrapped__,e=function(t){return i&&i.__dir__<0?t:t.reverse()};if(t instanceof _t){var i=t;return this.__actions__.length&&(i=new _t(this)),i=i.reverse(),i.__actions__.push({func:En,args:[e],thisArg:b}),new tt(i,this.__chain__)}return this.thru(e)}function Hn(){return this.value()+""}function Jn(){return ii(this.__wrapped__,this.__actions__)}function Qn(t,e,i){var n=Da(t)?oe:xe;return i&&qi(t,e,i)&&(e=b),"function"==typeof e&&i===b||(e=Yi(e,i,3)),n(t,e)}function Kn(t,e,i){var n=Da(t)?ae:je;return e=Yi(e,i,3),n(t,e)}function qn(t,e){return ra(t,We(e))}function $n(t,e,i,n){var r=t?Rs(t):0;return en(r)||(t=oo(t),r=t.length),i="number"!=typeof i||n&&qi(e,i,n)?0:i<0?bs(r+i,0):i||0,"string"==typeof t||!Da(t)&&Rr(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&Ri(t,e,i)>-1}function tr(t,e,i){var n=Da(t)?le:Pe;return e=Yi(e,i,3),n(t,e)}function er(t,e){return tr(t,So(e))}function ir(t,e,i){var n=Da(t)?ae:je;return e=Yi(e,i,3),n(t,function(t,i,n){return!e(t,i,n)})}function nr(t,e,i){if(i?qi(t,e,i):null==e){t=un(t);var n=t.length;return n>0?t[Fe(0,n-1)]:b}var r=-1,o=Vr(t),n=o.length,s=n-1;for(e=ws(e<0?0:+e||0,n);++r<e;){var a=Fe(r,s),l=o[a];o[a]=o[r],o[r]=l}return o.length=e,o}function rr(t){return nr(t,ks)}function or(t){var e=t?Rs(t):0;return en(e)?e:Ya(t).length}function sr(t,e,i){var n=Da(t)?ge:Je;return i&&qi(t,e,i)&&(e=b),"function"==typeof e&&i===b||(e=Yi(e,i,3)),n(t,e)}function ar(t,e,i){if(null==t)return[];i&&qi(t,e,i)&&(e=b);var n=-1;e=Yi(e,i,3);var r=Pe(t,function(t,i,r){return{criteria:e(t,i,r),index:++n,value:t}});return Qe(r,a)}function lr(t,e,i,n){return null==t?[]:(n&&qi(e,i,n)&&(i=b),Da(e)||(e=null==e?[]:[e]),Da(i)||(i=null==i?[]:[i]),Ke(t,e,i))}function cr(t,e){return Kn(t,We(e))}function ur(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Qo(Y);var i=t;t=e,e=i}return t=ys(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hr(t,e,i){return i&&qi(t,e,i)&&(e=b),e=t&&null==e?t.length:bs(+e||0,0),Bi(t,T,b,b,b,b,e)}function gr(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new Qo(Y);var n=t;t=e,e=n}return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=b),i}}function dr(t,e,i){function n(){d&&as(d),c&&as(c),f=0,c=d=p=b}function r(e,i){i&&as(i),c=d=p=b,e&&(f=fa(),u=t.apply(g,l),d||c||(l=g=b))}function o(){var t=e-(fa()-h);t<=0||t>e?r(p,c):d=gs(o,t)}function s(){r(m,d)}function a(){if(l=arguments,h=fa(),g=this,p=m&&(d||!C),I===!1)var i=C&&!d;else{c||C||(f=h);var n=I-(h-f),r=n<=0||n>I;r?(c&&(c=as(c)),f=h,u=t.apply(g,l)):c||(c=gs(s,n))}return r&&d?d=as(d):d||e===I||(d=gs(o,e)),i&&(r=!0,u=t.apply(g,l)),!r||d||c||(l=g=b),u}var l,c,u,h,g,d,p,f=0,I=!1,m=!0;if("function"!=typeof t)throw new Qo(Y);if(e=e<0?0:+e||0,i===!0){var C=!0;m=!1}else Sr(i)&&(C=!!i.leading,I="maxWait"in i&&bs(+i.maxWait||0,e),m="trailing"in i?!!i.trailing:m);return a.cancel=n,a}function pr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Qo(Y);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=t.apply(this,n);return i.cache=o.set(r,s),s};return i.cache=new pr.Cache,i}function fr(t){if("function"!=typeof t)throw new Qo(Y);return function(){return!t.apply(this,arguments)}}function Ir(t){return gr(2,t)}function mr(t,e){if("function"!=typeof t)throw new Qo(Y);return e=bs(e===b?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,r=bs(i.length-e,0),o=_o(r);++n<r;)o[n]=i[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,i[0],o);case 2:return t.call(this,i[0],i[1],o)}var s=_o(e+1);for(n=-1;++n<e;)s[n]=i[n];return s[e]=o,t.apply(this,s)}}function Cr(t){if("function"!=typeof t)throw new Qo(Y);return function(e){return t.apply(this,e)}}function Ar(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Qo(Y);return i===!1?n=!1:Sr(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),dr(t,e,{leading:n,maxWait:+e,trailing:r})}function yr(t,e){return e=null==e?ko:e,Bi(e,D,b,[t],[])}function vr(t,e,i,n){return e&&"boolean"!=typeof e&&qi(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),"function"==typeof i?ve(t,e,oi(i,n,1)):ve(t,e)}function br(t,e,i){return"function"==typeof e?ve(t,!0,oi(e,i,1)):ve(t,!0)}function wr(t,e){return t>e}function xr(t,e){return t>=e}function Nr(t){return p(t)&&Qi(t)&&es.call(t,"callee")&&!us.call(t,"callee")}function Mr(t){return t===!0||t===!1||p(t)&&ns.call(t)==X}function jr(t){return p(t)&&ns.call(t)==U}function kr(t){return!!t&&1===t.nodeType&&p(t)&&!Yr(t)}function Dr(t){return null==t||(Qi(t)&&(Da(t)||Rr(t)||Nr(t)||p(t)&&Zr(t.splice))?!t.length:!Ya(t).length)}function zr(t,e,i,n){i="function"==typeof i?oi(i,n,3):b;var r=i?i(t,e):b;return r===b?Le(t,e,i):!!r}function Tr(t){return p(t)&&"string"==typeof t.message&&ns.call(t)==F}function Gr(t){return"number"==typeof t&&ys(t)}function Zr(t){return Sr(t)&&ns.call(t)==V}function Sr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Lr(t,e,i,n){return i="function"==typeof i?oi(i,n,3):b,Oe(t,Ei(e),i)}function Br(t){return Wr(t)&&t!=+t}function Or(t){return null!=t&&(Zr(t)?os.test(ts.call(t)):p(t)&&Tt.test(t))}function Pr(t){return null===t}function Wr(t){return"number"==typeof t||p(t)&&ns.call(t)==J}function Yr(t){var e;if(!p(t)||ns.call(t)!=Q||Nr(t)||!es.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var i;return ze(t,function(t,e){i=e}),i===b||es.call(t,i)}function _r(t){return Sr(t)&&ns.call(t)==K}function Rr(t){return"string"==typeof t||p(t)&&ns.call(t)==$}function Er(t){return p(t)&&en(t.length)&&!!Wt[ns.call(t)]}function Xr(t){return t===b}function Ur(t,e){return t<e}function Fr(t,e){return t<=e}function Vr(t){var e=t?Rs(t):0;return en(e)?e?ie(t):[]:oo(t)}function Hr(t){return Ae(t,to(t))}function Jr(t,e,i){var n=Ls(t);return i&&qi(t,e,i)&&(e=b),e?me(n,e):n}function Qr(t){return Ze(t,to(t))}function Kr(t,e,i){var n=null==t?b:Se(t,gn(e),e+"");return n===b?i:n}function qr(t,e){if(null==t)return!1;var i=es.call(t,e);if(!i&&!$i(e)){if(e=gn(e),t=1==e.length?t:Se(t,He(e,0,-1)),null==t)return!1;e=Mn(e),i=es.call(t,e)}return i||en(t.length)&&Ki(e,t.length)&&(Da(t)||Nr(t))}function $r(t,e,i){i&&qi(t,e,i)&&(e=b);for(var n=-1,r=Ya(t),o=r.length,s={};++n<o;){var a=r[n],l=t[a];e?es.call(s,l)?s[l].push(a):s[l]=[a]:s[l]=a}return s}function to(t){if(null==t)return[];Sr(t)||(t=Vo(t));var e=t.length;e=e&&en(e)&&(Da(t)||Nr(t))&&e||0;for(var i=t.constructor,n=-1,r="function"==typeof i&&i.prototype===t,o=_o(e),s=e>0;++n<e;)o[n]=n+"";for(var a in t)s&&Ki(a,e)||"constructor"==a&&(r||!es.call(t,a))||o.push(a);return o}function eo(t){t=hn(t);for(var e=-1,i=Ya(t),n=i.length,r=_o(n);++e<n;){var o=i[e];r[e]=[o,t[o]]}return r}function io(t,e,i){var n=null==t?b:t[e];return n===b&&(null==t||$i(e,t)||(e=gn(e),t=1==e.length?t:Se(t,He(e,0,-1)),n=null==t?b:t[Mn(e)]),n=n===b?i:n),Zr(n)?n.call(t):n}function no(t,e,i){if(null==t)return t;var n=e+"";e=null!=t[n]||$i(e,t)?[n]:gn(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var l=e[r];Sr(a)&&(r==s?a[l]=i:null==a[l]&&(a[l]=Ki(e[r+1])?[]:{})),a=a[l]}return t}function ro(t,e,i,n){var r=Da(t)||Er(t);if(e=Yi(e,n,4),null==i)if(r||Sr(t)){var o=t.constructor;i=r?Da(t)?new o:[]:Ls(Zr(o)?o.prototype:b)}else i={};return(r?ne:Te)(t,function(t,n,r){return e(i,t,n,r)}),i}function oo(t){return ti(t,Ya(t))}function so(t){return ti(t,to(t))}function ao(t,e,i){return e=+e||0,i===b?(i=e,e=0):i=+i||0,t>=ws(e,i)&&t<bs(e,i)}function lo(t,e,i){i&&qi(t,e,i)&&(e=i=b);var n=null==t,r=null==e;if(null==i&&(r&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,r=!0)),n&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,i||t%1||e%1){var o=Ms();return ws(t+o*(e-t+ls("1e-"+((o+"").length-1))),e)}return Fe(t,e)}function co(t){return t=r(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function uo(t){return t=r(t),t&&t.replace(Zt,c).replace(Mt,"")}function ho(t,e,i){t=r(t),e+="";var n=t.length;return i=i===b?n:ws(i<0?0:+i||0,n),i-=e.length,i>=0&&t.indexOf(e,i)==i}function go(t){return t=r(t),t&&mt.test(t)?t.replace(ft,u):t}function po(t){return t=r(t),t&&Nt.test(t)?t.replace(xt,h):t||"(?:)"}function fo(t,e,i){t=r(t),e=+e;var n=t.length;if(n>=e||!ys(e))return t;var o=(e-n)/2,s=Cs(o),a=Is(o);return i=Gi("",a,i),i.slice(0,s)+t+i}function Io(t,e,i){return(i?qi(t,e,i):null==e)?e=0:e&&(e=+e),t=yo(t),Ns(t,e||(zt.test(t)?16:10))}function mo(t,e){var i="";if(t=r(t),e=+e,e<1||!t||!ys(e))return i;do e%2&&(i+=t),e=Cs(e/2),t+=t;while(e);return i}function Co(t,e,i){return t=r(t),i=null==i?0:ws(i<0?0:+i||0,t.length),t.lastIndexOf(e,i)==i}function Ao(t,e,i){var n=H.templateSettings;i&&qi(t,e,i)&&(e=i=b),t=r(t),e=Ie(me({},i||e),n,fe);var o,s,a=Ie(me({},e.imports),n.imports,fe),l=Ya(a),c=ti(a,l),u=0,h=e.interpolate||St,d="__p += '",p=Ho((e.escape||St).source+"|"+h.source+"|"+(h===yt?kt:St).source+"|"+(e.evaluate||St).source+"|$","g"),f="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Pt+"]")+"\n";t.replace(p,function(e,i,n,r,a,l){return n||(n=r),d+=t.slice(u,l).replace(Lt,g),i&&(o=!0,d+="' +\n__e("+i+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),d+="';\n";var I=e.variable;I||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(ht,""):d).replace(gt,"$1").replace(dt,"$1;"),d="function("+(I||"obj")+") {\n"+(I?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Ka(function(){return Xo(l,f+"return "+d).apply(b,c)});if(m.source=d,Tr(m))throw m;return m}function yo(t,e,i){var n=t;return(t=r(t))?(i?qi(n,e,i):null==e)?t.slice(C(t),A(t)+1):(e+="",t.slice(o(t,e),s(t,e)+1)):t}function vo(t,e,i){var n=t;return t=r(t),t?(i?qi(n,e,i):null==e)?t.slice(C(t)):t.slice(o(t,e+"")):t}function bo(t,e,i){var n=t;return t=r(t),t?(i?qi(n,e,i):null==e)?t.slice(0,A(t)+1):t.slice(0,s(t,e+"")+1):t}function wo(t,e,i){i&&qi(t,e,i)&&(e=b);var n=Z,o=S;if(null!=e)if(Sr(e)){var s="separator"in e?e.separator:s;n="length"in e?+e.length||0:n,o="omission"in e?r(e.omission):o}else n=+e||0;if(t=r(t),n>=t.length)return t;var a=n-o.length;if(a<1)return o;var l=t.slice(0,a);if(null==s)return l+o;if(_r(s)){if(t.slice(a).search(s)){var c,u,h=t.slice(0,a);for(s.global||(s=Ho(s.source,(Dt.exec(s)||"")+"g")),s.lastIndex=0;c=s.exec(h);)u=c.index;l=l.slice(0,null==u?a:u)}}else if(t.indexOf(s,a)!=a){var g=l.lastIndexOf(s);g>-1&&(l=l.slice(0,g))}return l+o}function xo(t){return t=r(t),t&&It.test(t)?t.replace(pt,y):t}function No(t,e,i){return i&&qi(t,e,i)&&(e=b),t=r(t),t.match(e||Bt)||[]}function Mo(t,e,i){return i&&qi(t,e,i)&&(e=b),p(t)?Do(t):ye(t,e)}function jo(t){return function(){return t}}function ko(t){return t}function Do(t){return We(ve(t,!0))}function zo(t,e){return Ye(t,ve(e,!0))}function To(t,e,i){if(null==i){var n=Sr(e),r=n?Ya(e):b,o=r&&r.length?Ze(e,r):b;(o?o.length:n)||(o=!1,i=e,e=t,t=this)}o||(o=Ze(e,Ya(e)));var s=!0,a=-1,l=Zr(t),c=o.length;i===!1?s=!1:Sr(i)&&"chain"in i&&(s=i.chain);for(;++a<c;){var u=o[a],h=e[u];t[u]=h,l&&(t.prototype[u]=function(e){return function(){var i=this.__chain__;if(s||i){var n=t(this.__wrapped__),r=n.__actions__=ie(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}return e.apply(t,ce([this.value()],arguments))}}(h))}return t}function Go(){return $t._=rs,this}function Zo(){}function So(t){return $i(t)?Ee(t):Xe(t)}function Lo(t){return function(e){return Se(t,gn(e),e+"")}}function Bo(t,e,i){i&&qi(t,e,i)&&(e=i=b),t=+t||0,i=null==i?1:+i||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,r=bs(Is((e-t)/(i||1)),0),o=_o(r);++n<r;)o[n]=t,t+=i;return o}function Oo(t,e,i){if(t=Cs(t),t<1||!ys(t))return[];var n=-1,r=_o(ws(t,Ds));for(e=oi(e,i,1);++n<t;)n<Ds?r[n]=e(n):e(n);return r}function Po(t){var e=++is;return r(t)+e}function Wo(t,e){return(+t||0)+(+e||0)}function Yo(t,e,i){return i&&qi(t,e,i)&&(e=b),e=Yi(e,i,3),1==e.length?de(Da(t)?t:un(t),e):qe(t,e)}f=f?te.defaults($t.Object(),f,te.pick($t,Ot)):$t;var _o=f.Array,Ro=f.Date,Eo=f.Error,Xo=f.Function,Uo=f.Math,Fo=f.Number,Vo=f.Object,Ho=f.RegExp,Jo=f.String,Qo=f.TypeError,Ko=_o.prototype,qo=Vo.prototype,$o=Jo.prototype,ts=Xo.prototype.toString,es=qo.hasOwnProperty,is=0,ns=qo.toString,rs=$t._,os=Ho("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=f.ArrayBuffer,as=f.clearTimeout,ls=f.parseFloat,cs=Uo.pow,us=qo.propertyIsEnumerable,hs=Xi(f,"Set"),gs=f.setTimeout,ds=Ko.splice,ps=f.Uint8Array,fs=Xi(f,"WeakMap"),Is=Uo.ceil,ms=Xi(Vo,"create"),Cs=Uo.floor,As=Xi(_o,"isArray"),ys=f.isFinite,vs=Xi(Vo,"keys"),bs=Uo.max,ws=Uo.min,xs=Xi(Ro,"now"),Ns=f.parseInt,Ms=Uo.random,js=Fo.NEGATIVE_INFINITY,ks=Fo.POSITIVE_INFINITY,Ds=4294967295,zs=Ds-1,Ts=Ds>>>1,Gs=9007199254740991,Zs=fs&&new fs,Ss={};H.support={};H.templateSettings={escape:Ct,evaluate:At,interpolate:yt,variable:"",imports:{_:H}};var Ls=function(){function t(){}return function(e){if(Sr(e)){t.prototype=e;var i=new t;t.prototype=b}return i||{}}}(),Bs=hi(Te),Os=hi(Ge,!0),Ps=gi(),Ws=gi(!0),Ys=Zs?function(t,e){return Zs.set(t,e),t}:ko,_s=Zs?function(t){return Zs.get(t)}:Zo,Rs=Ee("length"),Es=function(){var t=0,e=0;return function(i,n){var r=fa(),o=B-(r-e);if(e=r,o>0){if(++t>=L)return i}else t=0;return Ys(i,n)}}(),Xs=mr(function(t,e){return p(t)&&Qi(t)?we(t,De(e,!1,!0)):[]}),Us=vi(),Fs=vi(!0),Vs=mr(function(t){for(var e=t.length,n=e,r=_o(h),o=Ri(),s=o==i,a=[];n--;){var l=t[n]=Qi(l=t[n])?l:[];r[n]=s&&l.length>=120?pi(n&&l):null}var c=t[0],u=-1,h=c?c.length:0,g=r[0];t:for(;++u<h;)if(l=c[u],(g?Kt(g,l):o(a,l,0))<0){for(var n=e;--n;){var d=r[n];if((d?Kt(d,l):o(t[n],l,0))<0)continue t}g&&g.push(l),a.push(l)}return a}),Hs=mr(function(e,i){i=De(i);var n=Ce(e,i);return Ue(e,i.sort(t)),n}),Js=Li(),Qs=Li(!0),Ks=mr(function(t){return $e(De(t,!1,!0))}),qs=mr(function(t,e){return Qi(t)?we(t,e):[]}),$s=mr(On),ta=mr(function(t){var e=t.length,i=e>2?t[e-2]:b,n=e>1?t[e-1]:b;return e>2&&"function"==typeof i?e-=2:(i=e>1&&"function"==typeof n?(--e,n):b,n=b),t.length=e,Pn(t,i,n)}),ea=mr(function(t){return t=De(t),this.thru(function(e){return ee(Da(e)?e:[hn(e)],t)})}),ia=mr(function(t,e){return Ce(t,De(e))}),na=ci(function(t,e,i){es.call(t,i)?++t[i]:t[i]=1}),ra=yi(Bs),oa=yi(Os,!0),sa=xi(ne,Bs),aa=xi(re,Os),la=ci(function(t,e,i){es.call(t,i)?t[i].push(e):t[i]=[e]}),ca=ci(function(t,e,i){t[i]=e}),ua=mr(function(t,e,i){var n=-1,r="function"==typeof e,o=$i(e),s=Qi(t)?_o(t.length):[];return Bs(t,function(t){var a=r?e:o&&null!=t?t[e]:b;s[++n]=a?a.apply(t,i):Ji(t,e,i)}),s}),ha=ci(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),ga=zi(ue,Bs),da=zi(he,Os),pa=mr(function(t,e){if(null==t)return[];var i=e[2];return i&&qi(e[0],e[1],i)&&(e.length=1),Ke(t,De(e),[])}),fa=xs||function(){return(new Ro).getTime()},Ia=mr(function(t,e,i){var n=x;if(i.length){var r=I(i,Ia.placeholder);n|=D}return Bi(t,n,e,i,r)}),ma=mr(function(t,e){e=e.length?De(e):Qr(t);for(var i=-1,n=e.length;++i<n;){var r=e[i];t[r]=Bi(t[r],x,t)}return t}),Ca=mr(function(t,e,i){var n=x|N;if(i.length){var r=I(i,Ca.placeholder);n|=D}return Bi(e,n,t,i,r)}),Aa=mi(j),ya=mi(k),va=mr(function(t,e){return be(t,1,e)}),ba=mr(function(t,e,i){return be(t,e,i)}),wa=wi(),xa=wi(!0),Na=mr(function(t,e){if(e=De(e),"function"!=typeof t||!oe(e,n))throw new Qo(Y);var i=e.length;return mr(function(n){for(var r=ws(n.length,i);r--;)n[r]=e[r](n[r]);return t.apply(this,n)})}),Ma=Di(D),ja=Di(z),ka=mr(function(t,e){return Bi(t,G,b,b,b,De(e))}),Da=As||function(t){return p(t)&&en(t.length)&&ns.call(t)==E},za=ui(_e),Ta=ui(function(t,e,i){return i?Ie(t,e,i):me(t,e)}),Ga=Ci(Ta,pe),Za=Ci(za,on),Sa=bi(Te),La=bi(Ge),Ba=Ni(Ps),Oa=Ni(Ws),Pa=Mi(Te),Wa=Mi(Ge),Ya=vs?function(t){var e=null==t?b:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Qi(t)?cn(t):Sr(t)?vs(t):[]}:cn,_a=ji(!0),Ra=ji(),Ea=mr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=le(De(e),Jo);return sn(t,we(to(t),e))}var i=oi(e[0],e[1],3);return an(t,function(t,e,n){return!i(t,e,n)})}),Xa=mr(function(t,e){return null==t?{}:"function"==typeof e[0]?an(t,oi(e[0],e[1],3)):sn(t,De(e))}),Ua=fi(function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)}),Fa=fi(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),Va=ki(),Ha=ki(!0),Ja=fi(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),Qa=fi(function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ka=mr(function(t,e){try{return t.apply(b,e)}catch(i){return Tr(i)?i:new Eo(i)}}),qa=mr(function(t,e){return function(i){return Ji(i,t,e)}}),$a=mr(function(t,e){return function(i){return Ji(t,i,e)}}),tl=Si("ceil"),el=Si("floor"),il=Ai(wr,js),nl=Ai(Ur,ks),rl=Si("round");return H.prototype=q.prototype,tt.prototype=Ls(q.prototype),tt.prototype.constructor=tt,_t.prototype=Ls(q.prototype),_t.prototype.constructor=_t,Ut.prototype["delete"]=Ft,Ut.prototype.get=Vt,Ut.prototype.has=Ht,Ut.prototype.set=Jt,Qt.prototype.push=qt,pr.Cache=Ut,H.after=ur,H.ary=hr,H.assign=Ta,H.at=ia,H.before=gr,H.bind=Ia,H.bindAll=ma,H.bindKey=Ca,H.callback=Mo,H.chain=_n,H.chunk=pn,H.compact=fn,H.constant=jo,H.countBy=na,H.create=Jr,H.curry=Aa,H.curryRight=ya,H.debounce=dr,H.defaults=Ga,H.defaultsDeep=Za,H.defer=va,H.delay=ba,H.difference=Xs,H.drop=In,H.dropRight=mn,H.dropRightWhile=Cn,H.dropWhile=An,H.fill=yn,H.filter=Kn,H.flatten=bn,H.flattenDeep=wn,H.flow=wa,H.flowRight=xa,H.forEach=sa,H.forEachRight=aa,H.forIn=Ba,H.forInRight=Oa,H.forOwn=Pa,H.forOwnRight=Wa,H.functions=Qr,H.groupBy=la,H.indexBy=ca,H.initial=Nn,H.intersection=Vs,H.invert=$r,H.invoke=ua,H.keys=Ya,H.keysIn=to,H.map=tr,H.mapKeys=_a,H.mapValues=Ra,H.matches=Do,H.matchesProperty=zo,H.memoize=pr,H.merge=za,H.method=qa,H.methodOf=$a,H.mixin=To,H.modArgs=Na,H.negate=fr,H.omit=Ea,H.once=Ir,H.pairs=eo,H.partial=Ma,H.partialRight=ja,H.partition=ha,H.pick=Xa,H.pluck=er,H.property=So,H.propertyOf=Lo,H.pull=kn,
H.pullAt=Hs,H.range=Bo,H.rearg=ka,H.reject=ir,H.remove=Dn,H.rest=zn,H.restParam=mr,H.set=no,H.shuffle=rr,H.slice=Tn,H.sortBy=ar,H.sortByAll=pa,H.sortByOrder=lr,H.spread=Cr,H.take=Gn,H.takeRight=Zn,H.takeRightWhile=Sn,H.takeWhile=Ln,H.tap=Rn,H.throttle=Ar,H.thru=En,H.times=Oo,H.toArray=Vr,H.toPlainObject=Hr,H.transform=ro,H.union=Ks,H.uniq=Bn,H.unzip=On,H.unzipWith=Pn,H.values=oo,H.valuesIn=so,H.where=cr,H.without=qs,H.wrap=yr,H.xor=Wn,H.zip=$s,H.zipObject=Yn,H.zipWith=ta,H.backflow=xa,H.collect=tr,H.compose=xa,H.each=sa,H.eachRight=aa,H.extend=Ta,H.iteratee=Mo,H.methods=Qr,H.object=Yn,H.select=Kn,H.tail=zn,H.unique=Bn,To(H,H),H.add=Wo,H.attempt=Ka,H.camelCase=Ua,H.capitalize=co,H.ceil=tl,H.clone=vr,H.cloneDeep=br,H.deburr=uo,H.endsWith=ho,H.escape=go,H.escapeRegExp=po,H.every=Qn,H.find=ra,H.findIndex=Us,H.findKey=Sa,H.findLast=oa,H.findLastIndex=Fs,H.findLastKey=La,H.findWhere=qn,H.first=vn,H.floor=el,H.get=Kr,H.gt=wr,H.gte=xr,H.has=qr,H.identity=ko,H.includes=$n,H.indexOf=xn,H.inRange=ao,H.isArguments=Nr,H.isArray=Da,H.isBoolean=Mr,H.isDate=jr,H.isElement=kr,H.isEmpty=Dr,H.isEqual=zr,H.isError=Tr,H.isFinite=Gr,H.isFunction=Zr,H.isMatch=Lr,H.isNaN=Br,H.isNative=Or,H.isNull=Pr,H.isNumber=Wr,H.isObject=Sr,H.isPlainObject=Yr,H.isRegExp=_r,H.isString=Rr,H.isTypedArray=Er,H.isUndefined=Xr,H.kebabCase=Fa,H.last=Mn,H.lastIndexOf=jn,H.lt=Ur,H.lte=Fr,H.max=il,H.min=nl,H.noConflict=Go,H.noop=Zo,H.now=fa,H.pad=fo,H.padLeft=Va,H.padRight=Ha,H.parseInt=Io,H.random=lo,H.reduce=ga,H.reduceRight=da,H.repeat=mo,H.result=io,H.round=rl,H.runInContext=v,H.size=or,H.snakeCase=Ja,H.some=sr,H.sortedIndex=Js,H.sortedLastIndex=Qs,H.startCase=Qa,H.startsWith=Co,H.sum=Yo,H.template=Ao,H.trim=yo,H.trimLeft=vo,H.trimRight=bo,H.trunc=wo,H.unescape=xo,H.uniqueId=Po,H.words=No,H.all=Qn,H.any=sr,H.contains=$n,H.eq=zr,H.detect=ra,H.foldl=ga,H.foldr=da,H.head=vn,H.include=$n,H.inject=ga,To(H,function(){var t={};return Te(H,function(e,i){H.prototype[i]||(t[i]=e)}),t}(),!1),H.sample=nr,H.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return nr(e,t)}):nr(this.value())},H.VERSION=w,ne(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){H[t].placeholder=H}),ne(["drop","take"],function(t,e){_t.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new _t(this);i=null==i?1:bs(Cs(i)||0,0);var r=this.clone();return n?r.__takeCount__=ws(r.__takeCount__,i):r.__views__.push({size:i,type:t+(r.__dir__<0?"Right":"")}),r},_t.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ne(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i!=W;_t.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:Yi(t,e,1),type:i}),r.__filtered__=r.__filtered__||n,r}}),ne(["first","last"],function(t,e){var i="take"+(e?"Right":"");_t.prototype[t]=function(){return this[i](1).value()[0]}}),ne(["initial","rest"],function(t,e){var i="drop"+(e?"":"Right");_t.prototype[t]=function(){return this.__filtered__?new _t(this):this[i](1)}}),ne(["pluck","where"],function(t,e){var i=e?"filter":"map",n=e?We:So;_t.prototype[t]=function(t){return this[i](n(t))}}),_t.prototype.compact=function(){return this.filter(ko)},_t.prototype.reject=function(t,e){return t=Yi(t,e,1),this.filter(function(e){return!t(e)})},_t.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=this;return i.__filtered__&&(t>0||e<0)?new _t(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==b&&(e=+e||0,i=e<0?i.dropRight(-e):i.take(e-t)),i)},_t.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},_t.prototype.toArray=function(){return this.take(ks)},Te(_t.prototype,function(t,e){var i=/^(?:filter|map|reject)|While$/.test(e),n=/^(?:first|last)$/.test(e),r=H[n?"take"+("last"==e?"Right":""):e];r&&(H.prototype[e]=function(){var e=n?[1]:arguments,o=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,l=s instanceof _t,c=e[0],u=l||Da(s);u&&i&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=function(t){return n&&o?r(t,1)[0]:r.apply(b,ce([t],e))},g={func:En,args:[h],thisArg:b},d=l&&!a;if(n&&!o)return d?(s=s.clone(),s.__actions__.push(g),t.call(s)):r.call(b,this.value())[0];if(!n&&u){s=d?s:new _t(this);var p=t.apply(s,e);return p.__actions__.push(g),new tt(p,o)}return this.thru(h)})}),ne(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?$o:Ko)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:join|pop|replace|shift)$/.test(t);H.prototype[t]=function(){var t=arguments;return n&&!this.__chain__?e.apply(this.value(),t):this[i](function(i){return e.apply(i,t)})}}),Te(_t.prototype,function(t,e){var i=H[e];if(i){var n=i.name,r=Ss[n]||(Ss[n]=[]);r.push({name:e,func:i})}}),Ss[Ti(b,N).name]=[{name:"wrapper",func:b}],_t.prototype.clone=Rt,_t.prototype.reverse=Et,_t.prototype.value=Xt,H.prototype.chain=Xn,H.prototype.commit=Un,H.prototype.concat=ea,H.prototype.plant=Fn,H.prototype.reverse=Vn,H.prototype.toString=Hn,H.prototype.run=H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=Jn,H.prototype.collect=H.prototype.map,H.prototype.head=H.prototype.first,H.prototype.select=H.prototype.filter,H.prototype.tail=H.prototype.rest,H}var b,w="3.10.1",x=1,N=2,M=4,j=8,k=16,D=32,z=64,T=128,G=256,Z=30,S="...",L=150,B=16,O=200,P=1,W=2,Y="Expected a function",_="__lodash_placeholder__",R="[object Arguments]",E="[object Array]",X="[object Boolean]",U="[object Date]",F="[object Error]",V="[object Function]",H="[object Map]",J="[object Number]",Q="[object Object]",K="[object RegExp]",q="[object Set]",$="[object String]",tt="[object WeakMap]",et="[object ArrayBuffer]",it="[object Float32Array]",nt="[object Float64Array]",rt="[object Int8Array]",ot="[object Int16Array]",st="[object Int32Array]",at="[object Uint8Array]",lt="[object Uint8ClampedArray]",ct="[object Uint16Array]",ut="[object Uint32Array]",ht=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,ft=/[&<>"'`]/g,It=RegExp(pt.source),mt=RegExp(ft.source),Ct=/<%-([\s\S]+?)%>/g,At=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,bt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,xt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Nt=RegExp(xt.source),Mt=/[\u0300-\u036f\ufe20-\ufe23]/g,jt=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,zt=/^0[xX]/,Tt=/^\[object .+?Constructor\]$/,Gt=/^\d+$/,Zt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,St=/($^)/,Lt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ot=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Pt=-1,Wt={};Wt[it]=Wt[nt]=Wt[rt]=Wt[ot]=Wt[st]=Wt[at]=Wt[lt]=Wt[ct]=Wt[ut]=!0,Wt[R]=Wt[E]=Wt[et]=Wt[X]=Wt[U]=Wt[F]=Wt[V]=Wt[H]=Wt[J]=Wt[Q]=Wt[K]=Wt[q]=Wt[$]=Wt[tt]=!1;var Yt={};Yt[R]=Yt[E]=Yt[et]=Yt[X]=Yt[U]=Yt[it]=Yt[nt]=Yt[rt]=Yt[ot]=Yt[st]=Yt[J]=Yt[Q]=Yt[K]=Yt[$]=Yt[at]=Yt[lt]=Yt[ct]=Yt[ut]=!0,Yt[F]=Yt[V]=Yt[H]=Yt[q]=Yt[tt]=!1;var _t={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Et={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Xt={"function":!0,object:!0},Ut={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ft={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=Xt[typeof exports]&&exports&&!exports.nodeType&&exports,Ht=Xt[typeof module]&&module&&!module.nodeType&&module,Jt=Vt&&Ht&&"object"==typeof global&&global&&global.Object&&global,Qt=Xt[typeof self]&&self&&self.Object&&self,Kt=Xt[typeof window]&&window&&window.Object&&window,qt=Ht&&Ht.exports===Vt&&Vt,$t=Jt||Kt!==(this&&this.window)&&Kt||Qt||this,te=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?($t._=te,define(function(){return te})):Vt&&Ht?qt?(Ht.exports=te)._=te:Vt._=te:$t._=te}.call(this),function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,r){e.Backbone=t(e,r,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(r){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,r){return i[e](this[n],l(t,this),r)};case 4:return function(t,r,o){return i[e](this[n],l(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},a=function(t,e,n){i.each(e,function(e,r){i[r]&&(t.prototype[r]=s(e,r,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},h=/\s+/,g=function(t,e,n,r,o){var s,a=0;if(n&&"object"==typeof n){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(s=i.keys(n);a<s.length;a++)e=g(t,e,s[a],n[s[a]],o)}else if(n&&h.test(n))for(s=n.split(h);a<s.length;a++)e=t(e,s[a],r,o);else e=t(e,n,r,o);return e};u.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,n,r){if(t._events=g(p,t._events||{},e,i,{context:n,ctx:t,listening:r}),r){var o=t._listeners||(t._listeners={});o[r.id]=r}return t};u.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=o[r];if(!s){var a=this._listenId||(this._listenId=i.uniqueId("l"));s=o[r]={obj:t,objId:r,id:a,listeningTo:o,count:0}}return d(t,e,n,this,s),this};var p=function(t,e,i,n){if(i){var r=t[e]||(t[e]=[]),o=n.context,s=n.ctx,a=n.listening;a&&a.count++,r.push({callback:i,context:o,ctx:o||s,listening:a})}return t};u.off=function(t,e,i){return this._events?(this._events=g(f,this._events,t,e,{context:i,listeners:this._listeners}),this):this},u.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:i.keys(r),s=0;s<o.length;s++){var a=r[o[s]];if(!a)break;a.obj.off(e,n,this)}return this};var f=function(t,e,n,r){if(t){var o,s=0,a=r.context,l=r.listeners;if(e||n||a){for(var c=e?[e]:i.keys(t);s<c.length;s++){e=c[s];var u=t[e];if(!u)break;for(var h=[],g=0;g<u.length;g++){var d=u[g];n&&n!==d.callback&&n!==d.callback._callback||a&&a!==d.context?h.push(d):(o=d.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}h.length?t[e]=h:delete t[e]}return t}for(var p=i.keys(l);s<p.length;s++)o=l[p[s]],delete l[o.id],delete o.listeningTo[o.objId]}};u.once=function(t,e,n){var r=g(I,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},u.listenToOnce=function(t,e,n){var r=g(I,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,r)};var I=function(t,e,n,r){if(n){var o=t[e]=i.once(function(){r(e,o),n.apply(this,arguments)});o._callback=n}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return g(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&C(r,n),o&&C(o,[e].concat(n))}return t},C=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}};u.bind=u.on,u.unbind=u.off,i.extend(e,u);var A=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var r=i.result(this,"defaults");n=i.defaults(i.extend({},r,n),r),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(A.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var o=n.unset,s=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;for(var g in r)e=r[g],i.isEqual(c[g],e)||a.push(g),i.isEqual(h[g],e)?delete u[g]:u[g]=e,o?delete c[g]:c[g]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){a.length&&(this._pending=n);for(var d=0;d<a.length;d++)this.trigger("change:"+a[d],this,c[a[d]],n)}if(l)return this;if(!s)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var r in t){var o=t[r];i.isEqual(e[r],o)||(n[r]=o)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var r=t.parse?e.parse(i,t):i;return!!e.set(r,t)&&(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t))},_(this,t),this.sync("read",this,t)},save:function(t,e,n){var r;null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(r&&!o){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;var s=this,a=n.success,l=this.attributes;n.success=function(t){s.attributes=l;var e=n.parse?s.parse(t,n):t;return o&&(e=i.extend({},r,e)),!(e&&!s.set(e,n))&&(a&&a.call(n.context,s,t,n),void s.trigger("sync",s,t,n))},_(this,n),r&&o&&(this.attributes=i.extend({},l,r));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=r);var u=this.sync(c,this,n);return this.attributes=l,u},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){r&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var s=!1;return this.isNew()?i.defer(t.success):(_(this,t),s=this.sync("delete",this,t)),r||o(),s},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||Y();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};a(A,y,"attributes");var v=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},x=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,r=Array(t.length-i),o=e.length;for(n=0;n<r.length;n++)r[n]=t[n+i];for(n=0;n<o;n++)t[n+i]=e[n];for(n=0;n<r.length;n++)t[n+o+i]=r[n]};i.extend(v.prototype,u,{model:A,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,w))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),n?r[0]:r},set:function(t,e){if(null!=t){e=i.extend({},b,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,s,a=[],l=[],c=[],u=[],h={},g=e.add,d=e.merge,p=e.remove,f=!1,I=this.comparator&&null==r&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){o=t[s];var C=this.get(o);if(C){if(d&&o!==C){var A=this._isModel(o)?o.attributes:o;e.parse&&(A=C.parse(A,e)),C.set(A,e),c.push(C),I&&!f&&(f=C.hasChanged(m))}h[C.cid]||(h[C.cid]=!0,a.push(C)),t[s]=C}else g&&(o=t[s]=this._prepareModel(o,e),o&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o)))}if(p){for(s=0;s<this.length;s++)o=this.models[s],h[o.cid]||u.push(o);u.length&&this._removeModels(u,e)}var y=!1,v=!I&&g&&p;if(a.length&&v?(y=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,x(this.models,a,0),this.length=this.models.length):l.length&&(I&&(f=!0),x(this.models,l,null==r?this.length:r),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=r&&(e.index=r+s),o=l[s],o.trigger("add",o,this,e);(f||y)&&this.trigger("sort",this,e),(l.length||u.length||c.length)&&(e.changes={added:l,removed:u,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},_(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,i){n&&r.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var r=this.get(t[n]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],e.silent||(e.index=o,r.trigger("remove",r,this,e)),i.push(r),this._removeReference(r,e)}}return i},_isModel:function(t){return t instanceof A},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var N={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};a(v,N,"models");var M=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},j=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];i.extend(M.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var r=e.match(j);this.delegate(r[1],r[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,r){var o=D[t];i.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=i.result(n,"url")||Y()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var l=r.error;r.error=function(t,e,i){r.textStatus=e,r.errorThrown=i,l&&l.call(r.context,t,e,i)};var c=r.xhr=e.ajax(i.extend(s,r));return n.trigger("request",n,c,r),c};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var z=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,Z=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(z.prototype,u,{initialize:function(){},route:function(t,n,r){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var o=this;return e.history.route(t,function(i){var s=o._extractParameters(t,i);o.execute(r,s,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),e.history.trigger("route",o,n,s))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(T,"(?:$1)?").replace(G,function(t,e){return e?t:"([^/?]+)"}).replace(Z,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var L=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,P=/#.*$/;L.started=!1,i.extend(L.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(B,"")},start:function(t){if(L.started)throw new Error("Backbone.history has already been started");if(L.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(O,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,r=n.insertBefore(this.iframe,n.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!L.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(P,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new L;var W=function(t,e){var n,r=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},i.extend(n,r,e),n.prototype=i.create(r.prototype,t),n.prototype.constructor=n,n.__super__=r.prototype,n};A.extend=v.extend=z.extend=M.extend=L.extend=W;var Y=function(){throw new Error('A "url" property or function must be specified')},_=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t,e){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(i,n,r){return i.$=r,e(t,i,n,r)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("lodash"),r=i.$=require("jquery");module.exports=e(t,i,n,r)}else{var i=t.Backbone,n=t._,r=i.$=t.jQuery||t.$;t.joint=e(t,i,n,r),t.g=t.joint.g,t.V=t.Vectorizer=t.joint.V}}(this,function(t,e,i,n){!function(){function t(t){this.message=t}var e="undefined"!=typeof exports?exports:this,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",
e.btoa||(e.btoa=function(e){for(var n,r,o=String(e),s=0,a=i,l="";o.charAt(0|s)||(a="=",s%1);l+=a.charAt(63&n>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|r}return l}),e.atob||(e.atob=function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,s=0,a=0,l="";o=n.charAt(a++);~o&&(r=s%4?64*r+o:o,s++%4)?l+=String.fromCharCode(255&r>>(-2*s&6)):0)o=i.indexOf(o);return l})}(),function(){function t(t,e){return this.slice(t,e)}function e(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function i(i){var n;if("number"==typeof i){n=new Array(i);for(var r=0;r<i;++r)n[r]=0}else n=i.slice(0);return n.subarray=t,n.buffer=n,n.byteLength=n.length,n.set=e,"object"==typeof i&&i.buffer&&(n.buffer=i.buffer),n}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=i,window.Uint32Array=i,window.Int32Array=i)}(),function(){"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}}))}();var r,o,s=function(){var t={},e=Math,i=e.abs,n=e.cos,r=e.sin,o=e.sqrt,s=e.min,a=e.max,l=e.atan2,c=e.round,u=e.floor,h=e.PI,g=e.random;t.bezier={curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),i=["M",t[0].x,t[0].y],n=0;n<e[0].length;n++)i.push("C",e[0][n].x,e[0][n].y,e[1][n].x,e[1][n].y,t[n+1].x,t[n+1].y);return i},getCurveControlPoints:function(t){var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=f((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=f(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var o=[];for(e=1;e<r-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[r-1]=(8*t[r-1].x+t[r].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<r-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[r-1]=(8*t[r-1].y+t[r].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<r;e++)i.push(f(s[e],a[e])),e<r-1?n.push(f(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):n.push(f((t[r].x+s[r-1])/2,(t[r].y+a[r-1])/2));return[i,n]},getCurveDivider:function(t,e,i,n){return function(r){var o=p(t,e).pointAt(r),s=p(e,i).pointAt(r),a=p(i,n).pointAt(r),l=p(o,s).pointAt(r),c=p(s,a).pointAt(r),u=p(l,c).pointAt(r);return[{p0:t,p1:o,p2:l,p3:u},{p0:u,p1:c,p2:a,p3:n}]}},getFirstControlPoints:function(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var o=1;o<e;o++)n[o]=1/r,r=(o<e-1?4:3.5)-n[o],i[o]=(t[o]-i[o-1])/r;for(o=1;o<e;o++)i[e-o-1]-=n[e-o]*i[e-o];return i},getInversionSolver:function(t,e,i,n){function r(t,e){var i=o[t],n=o[e];return function(r){var o=(t%3?3:1)*(e%3?3:1),s=r.x*(i.y-n.y)+r.y*(n.x-i.x)+i.x*n.y-i.y*n.x;return o*s}}var o=arguments;return function(i){var n=3*r(2,3)(e),o=r(1,3)(t)/n,s=-r(2,3)(t)/n,a=o*r(3,1)(i)+s*(r(3,0)(i)+r(2,1)(i))+r(2,0)(i),l=o*r(3,0)(i)+s*r(2,0)(i)+r(1,0)(i);return l/(l-a)}}};var d=t.Ellipse=function(t,e,i){return this instanceof d?t instanceof d?new d(f(t),t.a,t.b):(t=f(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=i)):new d(t,e,i)};t.Ellipse.fromRect=function(t){return t=I(t),d(t.center(),t.width/2,t.height/2)},t.Ellipse.prototype={bbox:function(){return I(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},clone:function(){return d(this)},normalizedDistance:function(t){var e=t.x,i=t.y,n=this.a,r=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(n*n)+(i-s)*(i-s)/(r*r)},containsPoint:function(t){return this.normalizedDistance(t)<=1},center:function(){return f(this.x,this.y)},tangentTheta:function(e){var i,n,r=30,o=e.x,s=e.y,a=this.a,l=this.b,c=this.bbox().center(),u=c.x,h=c.y,g=o>c.x+a/2,d=o<c.x-a/2;return g||d?(i=o>c.x?s-r:s+r,n=a*a/(o-u)-a*a*(s-h)*(i-h)/(l*l*(o-u))+u):(n=s>c.y?o+r:o-r,i=l*l/(s-h)-l*l*(o-u)*(n-u)/(a*a*(s-h))+h),t.point(n,i).theta(e)},equals:function(t){return t=d(t),t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},intersectionWithLineFromCenterToPoint:function(t,e){t=f(t),e&&t.rotate(f(this.x,this.y),e);var i,n=t.x-this.x,r=t.y-this.y;if(0===n)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(f(this.x,this.y),-e):i;var s=r/n,a=s*s,l=this.a*this.a,c=this.b*this.b,u=o(1/(1/l+a/c));u=n<0?-u:u;var h=s*u;return i=f(this.x+u,this.y+h),e?i.rotate(f(this.x,this.y),-e):i},toString:function(){return f(this.x,this.y).toString()+" "+this.a+" "+this.b}};var p=t.Line=function(t,e){return this instanceof p?(this.start=f(t),void(this.end=f(e))):new p(t,e)};t.Line.prototype={bearing:function(){var t=y(this.start.y),e=y(this.end.y),i=this.start.x,o=this.end.x,s=y(o-i),a=r(s)*n(e),c=n(t)*r(e)-r(t)*n(e)*n(s),u=A(l(a,c)),h=["NE","E","SE","S","SW","W","NW","N"],g=u-22.5;return g<0&&(g+=360),g=parseInt(g/45),h[g]},clone:function(){return p(this)},intersection:function(t){var e=f(this.end.x-this.start.x,this.end.y-this.start.y),i=f(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*i.y-e.y*i.x,r=f(t.start.x-this.start.x,t.start.y-this.start.y),o=r.x*i.y-r.y*i.x,s=r.x*e.y-r.y*e.x;if(0===n||o*n<0||s*n<0)return null;if(n>0){if(o>n||s>n)return null}else if(o<n||s<n)return null;return f(this.start.x+o*e.x/n,this.start.y+o*e.y/n)},length:function(){return o(this.squaredLength())},midpoint:function(){return f((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},pointAt:function(t){var e=(1-t)*this.start.x+t*this.end.x,i=(1-t)*this.start.y+t*this.end.y;return f(e,i)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},squaredLength:function(){var t=this.start.x,e=this.start.y,i=this.end.x,n=this.end.y;return(t-=i)*t+(e-=n)*e},toString:function(){return this.start.toString()+" "+this.end.toString()}};var f=t.Point=function(t,e){if(!(this instanceof f))return new f(t,e);if("string"==typeof t){var i=t.split(t.indexOf("@")===-1?" ":"@");t=parseInt(i[0],10),e=parseInt(i[1],10)}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};t.Point.fromPolar=function(t,e,o){o=o&&f(o)||f(0,0);var s=i(t*n(e)),a=i(t*r(e)),l=m(A(e));return l<90?a=-a:l<180?(s=-s,a=-a):l<270&&(s=-s),f(o.x+s,o.y+a)},t.Point.random=function(t,e,i,n){return f(u(g()*(e-t+1)+t),u(g()*(n-i+1)+i))},t.Point.prototype={adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=s(a(this.x,t.x),t.x+t.width),this.y=s(a(this.y,t.y),t.y+t.height),this)},bearing:function(t){return p(this,t).bearing()},changeInAngle:function(t,e,i){return f(this).offset(-t,-e).theta(i)-this.theta(i)},clone:function(){return f(this)},difference:function(t){return f(this.x-t.x,this.y-t.y)},distance:function(t){return p(this,t).length()},equals:function(t){return this.x===t.x&&this.y===t.y},magnitude:function(){return o(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return i(t.x-this.x)+i(t.y-this.y)},move:function(t,e){var i=y(f(t).theta(this));return this.offset(n(i)*e,-r(i)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return this.x+=t||0,this.y+=e||0,this},reflection:function(t){return f(t).move(this,this.distance(t))},rotate:function(t,e){e=(e+360)%360,this.toPolar(t),this.y+=y(e);var i=f.fromPolar(this.x,this.y,t);return this.x=i.x,this.y=i.y,this},round:function(t){return this.x=t?this.x.toFixed(t):c(this.x),this.y=t?this.y.toFixed(t):c(this.y),this},scale:function(t,e,i){return i=i&&f(i)||f(0,0),this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this},snapToGrid:function(t,e){return this.x=C(this.x,t),this.y=C(this.y,e||t),this},theta:function(t){t=f(t);var e=-(t.y-this.y),i=t.x-this.x,n=10,r=0==e.toFixed(n)&&0==i.toFixed(n)?0:l(e,i);return r<0&&(r=2*h+r),180*r/h},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&f(t)||f(0,0);var e=this.x,i=this.y;return this.x=o((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)),this.y=y(t.theta(f(e,i))),this},toString:function(){return this.x+"@"+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this}};var I=t.Rect=function(t,e,i,n){return this instanceof I?(Object(t)===t&&(e=t.y,i=t.width,n=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===i?0:i,void(this.height=void 0===n?0:n)):new I(t,e,i,n)};t.Rect.fromEllipse=function(t){return t=d(t),I(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},t.Rect.prototype={bbox:function(t){var e=y(t||0),o=i(r(e)),s=i(n(e)),a=this.width*s+this.height*o,l=this.width*o+this.height*s;return I(this.x+(this.width-a)/2,this.y+(this.height-l)/2,a,l)},bottomLeft:function(){return f(this.x,this.y+this.height)},bottomMiddle:function(){return f(this.x+this.width/2,this.y+this.height)},center:function(){return f(this.x+this.width/2,this.y+this.height/2)},clone:function(){return I(this)},containsPoint:function(t){return t=f(t),t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=I(this).normalize(),i=I(t).normalize(),n=e.width,r=e.height,o=i.width,s=i.height;if(!(n&&r&&o&&s))return!1;var a=e.x,l=e.y,c=i.x,u=i.y;return o+=c,n+=a,s+=u,r+=l,a<=c&&o<=n&&l<=u&&s<=r},corner:function(){return f(this.x+this.width,this.y+this.height)},equals:function(t){var e=I(this).normalize(),i=I(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},intersect:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||n.x>=i.x||n.y>=i.y)return null;var o=Math.max(e.x,n.x),s=Math.max(e.y,n.y);return I(o,s,Math.min(i.x,r.x)-o,Math.min(i.y,r.y)-s)},intersectionWithLineFromCenterToPoint:function(t,e){t=f(t);var i,n=f(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var r=[p(this.origin(),this.topRight()),p(this.topRight(),this.corner()),p(this.corner(),this.bottomLeft()),p(this.bottomLeft(),this.origin())],o=p(n,t),s=r.length-1;s>=0;--s){var a=r[s].intersection(o);if(null!==a){i=a;break}}return i&&e&&i.rotate(n,-e),i},leftMiddle:function(){return f(this.x,this.y+this.height/2)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,i=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=i,this.height=n,this},origin:function(){return f(this.x,this.y)},pointNearestToPoint:function(t){if(t=f(t),this.containsPoint(t)){var e=this.sideNearestToPoint(t);switch(e){case"right":return f(this.x+this.width,t.y);case"left":return f(this.x,t.y);case"bottom":return f(t.x,this.y+this.height);case"top":return f(t.x,this.y)}}return t.adhereToRect(this)},rightMiddle:function(){return f(this.x+this.width,this.y+this.height/2)},round:function(t){return this.x=t?this.x.toFixed(t):c(this.x),this.y=t?this.y.toFixed(t):c(this.y),this.width=t?this.width.toFixed(t):c(this.width),this.height=t?this.height.toFixed(t):c(this.height),this},scale:function(t,e,i){return i=this.origin().scale(t,e,i),this.x=i.x,this.y=i.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){t=f(t);var e=t.x-this.x,i=this.x+this.width-t.x,n=t.y-this.y,r=this.y+this.height-t.y,o=e,s="left";return i<o&&(o=i,s="right"),n<o&&(o=n,s="top"),r<o&&(o=r,s="bottom"),s},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,this},topMiddle:function(){return f(this.x+this.width/2,this.y)},topRight:function(){return f(this.x+this.width,this.y)},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner(),o=Math.min(e.x,n.x),s=Math.min(e.y,n.y),a=Math.max(i.x,r.x),l=Math.max(i.y,r.y);return I(o,s,a-o,l-s)}};var m=t.normalizeAngle=function(t){return t%360+(t<0?360:0)};t.scale={linear:function(t,e,i){var n=t[1]-t[0],r=e[1]-e[0];return(i-t[0])/n*r+e[0]||0}};var C=t.snapToGrid=function(t,e){return e*Math.round(t/e)},A=t.toDeg=function(t){return 180*t/h%360},y=t.toRad=function(t,e){return e=e||!1,t=e?t:t%360,t*h/180};return t.ellipse=t.Ellipse,t.line=t.Line,t.point=t.Point,t.rect=t.Rect,t}();r=o=function(){"use strict";var t="object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));if(!t)return function(){throw new Error("SVG is required to use Vectorizer.")};var e={xmlns:"http://www.w3.org/2000/svg",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink"},i="1.1",n=function(t,i,r){if(!(this instanceof n))return n.apply(Object.create(n.prototype),arguments);if(t){if(n.isV(t)&&(t=t.node),i=i||{},n.isString(t))if("svg"===t.toLowerCase())t=n.createSvgDocument();else if("<"===t[0]){var o=n.createSvgDocument(t);if(o.childNodes.length>1){var s,a,l=[];for(s=0,a=o.childNodes.length;s<a;s++){var c=o.childNodes[s];l.push(new n(document.importNode(c,!0)))}return l}t=document.importNode(o.firstChild,!0)}else t=document.createElementNS(e.xmlns,t);return this.node=t,this.node.id||(this.node.id=n.uniqueId()),this.setAttributes(i),r&&this.append(r),this}};n.prototype.getTransformToElement=function(t){return t.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},n.prototype.transform=function(t,e){if(n.isUndefined(t))return this.node.parentNode?this.getTransformToElement(this.node.parentNode):this.node.getScreenCTM();var i=this.node.transform.baseVal;e&&e.absolute&&i.clear();var r=n.createSVGTransform(t);return i.appendItem(r),this},n.prototype.translate=function(t,e,i){i=i||{},e=e||0;var r=this.attr("transform")||"",o=n.parseTransformString(r);if(n.isUndefined(t))return o.translate;r=r.replace(/translate\([^\)]*\)/g,"").trim();var s=i.absolute?t:o.translate.tx+t,a=i.absolute?e:o.translate.ty+e,l="translate("+s+","+a+")";return this.attr("transform",(l+" "+r).trim()),this},n.prototype.rotate=function(t,e,i,r){r=r||{};var o=this.attr("transform")||"",s=n.parseTransformString(o);if(n.isUndefined(t))return s.rotate;o=o.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var a=r.absolute?t:s.rotate.angle+t,l=void 0!==e&&void 0!==i?","+e+","+i:"",c="rotate("+a+l+")";return this.attr("transform",(o+" "+c).trim()),this},n.prototype.scale=function(t,e){e=n.isUndefined(e)?t:e;var i=this.attr("transform")||"",r=n.parseTransformString(i);if(n.isUndefined(t))return r.scale;i=i.replace(/scale\([^\)]*\)/g,"").trim();var o="scale("+t+","+e+")";return this.attr("transform",(i+" "+o).trim()),this},n.prototype.bbox=function(t,e){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var i;try{i=this.node.getBBox(),i={x:i.x,y:i.y,width:i.width,height:i.height}}catch(r){i={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(t)return i;var o=this.getTransformToElement(e||this.node.ownerSVGElement);return n.transformRect(i,o)},n.prototype.text=function(t,e){t=n.sanitizeText(t),e=e||{};var i,r=t.split("\n"),o=this.attr("y");o||this.attr("y","0.8em"),this.attr("display",t?null:"none"),this.attr("xml:space","preserve"),this.node.textContent="";var s=this.node;if(e.textPath){var a=this.find("defs");0===a.length&&(a=n("defs"),this.append(a));var l=Object(e.textPath)===e.textPath?e.textPath.d:e.textPath;if(l){var c=n("path",{d:l});a.append(c)}var u=n("textPath");!e.textPath["xlink:href"]&&c&&u.attr("xlink:href","#"+c.node.id),Object(e.textPath)===e.textPath&&u.attr(e.textPath),this.append(u),s=u.node}for(var h=0,g=0;g<r.length;g++){var d=r[g],p=e.lineHeight||"1em";"auto"===e.lineHeight&&(p="1.5em");var f=n("tspan",{dy:0==g?"0em":p,x:this.attr("x")||0});if(f.addClass("v-line"),d)if(e.annotations){for(var I=0,m=n.annotateString(r[g],n.isArray(e.annotations)?e.annotations:[e.annotations],{offset:-h,includeAnnotationIndices:e.includeAnnotationIndices}),C=0;C<m.length;C++){var A=m[C];if(n.isObject(A)){var y=parseInt(A.attrs["font-size"],10);y&&y>I&&(I=y),i=n("tspan",A.attrs),e.includeAnnotationIndices&&i.attr("annotations",A.annotations),A.attrs["class"]&&i.addClass(A.attrs["class"]),i.node.textContent=A.t}else i=document.createTextNode(A||" ");f.append(i)}"auto"===e.lineHeight&&I&&0!==g&&f.attr("dy",1.2*I+"px")}else f.node.textContent=d;else f.addClass("v-empty-line"),f.node.style.fillOpacity=0,f.node.style.strokeOpacity=0,f.node.textContent="-";n(s).append(f),h+=d.length+1}return this},n.prototype.removeAttr=function(t){var e=n.qualifyAttr(t),i=this.node;return e.ns?i.hasAttributeNS(e.ns,e.local)&&i.removeAttributeNS(e.ns,e.local):i.hasAttribute(t)&&i.removeAttribute(t),this},n.prototype.attr=function(t,e){if(n.isUndefined(t)){for(var i=this.node.attributes,r={},o=0;o<i.length;o++)r[i[o].name]=i[o].value;return r}if(n.isString(t)&&n.isUndefined(e))return this.node.getAttribute(t);if("object"==typeof t)for(var s in t)t.hasOwnProperty(s)&&this.setAttribute(s,t[s]);else this.setAttribute(t,e);return this},n.prototype.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},n.prototype.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},n.prototype.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},n.prototype.append=function(t){n.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++)this.node.appendChild(n.toNode(t[e]));return this},n.prototype.prepend=function(t){var e=this.node.firstChild;return e?n(e).before(t):this.append(t)},n.prototype.before=function(t){var e=this.node,i=e.parentNode;if(i){n.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++)i.insertBefore(n.toNode(t[r]),e)}return this},n.prototype.svg=function(){return this.node instanceof window.SVGSVGElement?this:n(this.node.ownerSVGElement)},n.prototype.defs=function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?n(t[0]):void 0},n.prototype.clone=function(){var t=n(this.node.cloneNode(!0));return t.node.id=n.uniqueId(),t},n.prototype.findOne=function(t){var e=this.node.querySelector(t);return e?n(e):void 0},n.prototype.find=function(t){var e=[],i=this.node.querySelectorAll(t);if(i)for(var r=0;r<i.length;r++)e.push(n(i[r]));return e},n.prototype.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},n.prototype.findParentByClass=function(t,e){for(var i=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==e&&r!==i;){var o=n(r);if(o.hasClass(t))return o;r=r.parentNode}return null},n.prototype.toLocalPoint=function(t,e){var i=this.svg().node,n=i.createSVGPoint();n.x=t,n.y=e;try{var r=n.matrixTransform(i.getScreenCTM().inverse()),o=this.getTransformToElement(i).inverse()}catch(s){return n}return r.matrixTransform(o)},n.prototype.translateCenterToPoint=function(t){var e=this.bbox(),i=s.rect(e).center();this.translate(t.x-i.x,t.y-i.y)},n.prototype.translateAndAutoOrient=function(t,e,i){var r=this.scale();this.attr("transform",""),this.scale(r.sx,r.sy);var o=this.svg().node,a=this.bbox(!1,i),l=o.createSVGTransform();l.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var c=o.createSVGTransform(),u=s.point(t).changeInAngle(t.x-e.x,t.y-e.y,e);c.setRotate(u,0,0);var h=o.createSVGTransform(),g=s.point(t).move(e,a.width/2);h.setTranslate(t.x+(t.x-g.x),t.y+(t.y-g.y));var d=this.getTransformToElement(i),p=o.createSVGTransform();p.setMatrix(h.matrix.multiply(c.matrix.multiply(l.matrix.multiply(d))));var f=n.decomposeMatrix(p.matrix);return this.translate(f.translateX,f.translateY),this.rotate(f.rotation),this},n.prototype.animateAlongPath=function(t,e){var i=n("animateMotion",t),r=n("mpath",{"xlink:href":"#"+n(e).node.id});i.append(r),this.append(i);try{i.node.beginElement()}catch(o){if("fake"===document.documentElement.getAttribute("smiling")){var s=i.node;s.animators=[];var a=s.getAttribute("id");a&&(id2anim[a]=s);for(var l=getTargets(s),c=0,u=l.length;c<u;c++){var h=l[c],g=new Animator(s,h,c);animators.push(g),s.animators[c]=g,g.register()}}}},n.prototype.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},n.prototype.addClass=function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},n.prototype.removeClass=function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},n.prototype.toggleClass=function(t,e){var i=n.isUndefined(e)?this.hasClass(t):!e;return i?this.removeClass(t):this.addClass(t),this},n.prototype.sample=function(t){t=t||1;for(var e,i=this.node,n=i.getTotalLength(),r=[],o=0;o<n;)e=i.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},n.prototype.convertToPath=function(){var t=n("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},n.prototype.convertToPathData=function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return n.convertLineToPathData(this.node);case"POLYGON":return n.convertPolygonToPathData(this.node);case"POLYLINE":return n.convertPolylineToPathData(this.node);case"ELLIPSE":return n.convertEllipseToPathData(this.node);case"CIRCLE":return n.convertCircleToPathData(this.node);case"RECT":return n.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},n.prototype.findIntersection=function(t,e){var i=this.svg().node;e=e||i;var r=s.rect(this.bbox(!1,e)),o=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var a,l=this.node.localName.toUpperCase();if("RECT"===l){var c=s.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(e),h=n.decomposeMatrix(u),g=i.createSVGTransform();g.setRotate(-h.rotation,o.x,o.y);var d=n.transformRect(c,g.matrix.multiply(u));a=s.rect(d).intersectionWithLineFromCenterToPoint(t,h.rotation)}else if("PATH"===l||"POLYGON"===l||"POLYLINE"===l||"CIRCLE"===l||"ELLIPSE"===l){var p,f,I,m,C,A,y="PATH"===l?this:this.convertToPath(),v=y.sample(),b=1/0,w=[];for(p=0;p<v.length;p++)f=v[p],I=n.createSVGPoint(f.x,f.y),I=I.matrixTransform(this.getTransformToElement(e)),f=s.point(I),m=f.distance(o),C=1.1*f.distance(t),A=m+C,A<b?(b=A,w=[{sample:f,refDistance:C}]):A<b+1&&w.push({sample:f,refDistance:C});w.sort(function(t,e){return t.refDistance-e.refDistance}),w[0]&&(a=w[0].sample)}return a}},n.prototype.setAttribute=function(t,e){var i=this.node;if(null===e)return this.removeAttr(t),this;var r=n.qualifyAttr(t);return r.ns?i.setAttributeNS(r.ns,t,e):"id"===t?i.id=e:i.setAttribute(t,e),this},n.createSvgDocument=function(t){var r='<svg xmlns="'+e.xmlns+'" xmlns:xlink="'+e.xlink+'" version="'+i+'">'+(t||"")+"</svg>",o=n.parseXML(r,{async:!1});return o.documentElement},n.idCounter=0,n.uniqueId=function(){var t=++n.idCounter+"";return"v-"+t},n.sanitizeText=function(t){return(t||"").replace(/ /g,"")},n.isUndefined=function(t){return"undefined"==typeof t},n.isString=function(t){return"string"==typeof t},n.isObject=function(t){return t&&"object"==typeof t},n.isArray=Array.isArray,n.parseXML=function(t,e){e=e||{};var i;try{var r=new DOMParser;n.isUndefined(e.async)||(r.async=e.async),i=r.parseFromString(t,"text/xml")}catch(o){i=void 0}if(!i||i.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return i},n.qualifyAttr=function(t){if(t.indexOf(":")!==-1){var i=t.split(":");return{ns:e[i[0]],local:i[1]}}return{ns:null,local:t}},n.parseTransformString=function(t){var e,i,n;if(t){var r=/[ ,]+/,o=t.match(/translate\((.*)\)/);o&&(e=o[1].split(r));var s=t.match(/rotate\((.*)\)/);s&&(i=s[1].split(r));var a=t.match(/scale\((.*)\)/);a&&(n=a[1].split(r))}var l=n&&n[0]?parseFloat(n[0]):1;return{translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:l,sy:n&&n[1]?parseFloat(n[1]):l}}},n.deltaTransformPoint=function(t,e){var i=e.x*t.a+e.y*t.c+0,n=e.x*t.b+e.y*t.d+0;return{x:i,y:n}},n.decomposeMatrix=function(t){var e=n.deltaTransformPoint(t,{x:0,y:1}),i=n.deltaTransformPoint(t,{x:1,y:0}),r=180/Math.PI*Math.atan2(e.y,e.x)-90,o=180/Math.PI*Math.atan2(i.y,i.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:r,skewY:o,rotation:r}},n.isV=function(t){return t instanceof n},n.isVElement=n.isV;var r=n("svg").node;return n.createSVGMatrix=function(t){var e=r.createSVGMatrix();for(var i in t)e[i]=t[i];return e},n.createSVGTransform=function(t){return n.isUndefined(t)?r.createSVGTransform():(t instanceof SVGMatrix||(t=n.createSVGMatrix(t)),r.createSVGTransformFromMatrix(t))},n.createSVGPoint=function(t,e){var i=r.createSVGPoint();return i.x=t,i.y=e,i},n.transformRect=function(t,e){var i=r.createSVGPoint();i.x=t.x,i.y=t.y;var n=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y;var o=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y+t.height;var s=i.matrixTransform(e);i.x=t.x,i.y=t.y+t.height;var a=i.matrixTransform(e),l=Math.min(n.x,o.x,s.x,a.x),c=Math.max(n.x,o.x,s.x,a.x),u=Math.min(n.y,o.y,s.y,a.y),h=Math.max(n.y,o.y,s.y,a.y);return{x:l,y:u,width:c-l,height:h-u}},n.transformPoint=function(t,e){return n.createSVGPoint(t.x,t.y).matrixTransform(e)},n.styleToObject=function(t){for(var e={},i=t.split(";"),n=0;n<i.length;n++){var r=i[n],o=r.split("=");e[o[0].trim()]=o[1].trim()}return e},n.createSlicePathData=function(t,e,i,n){var r=2*Math.PI-1e-6,o=t,s=e,a=i,l=n,c=(l<a&&(c=a,a=l,l=c),l-a),u=c<Math.PI?"0":"1",h=Math.cos(a),g=Math.sin(a),d=Math.cos(l),p=Math.sin(l);return c>=r?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*h+","+s*g+"A"+s+","+s+" 0 "+u+",1 "+s*d+","+s*p+"L"+o*d+","+o*p+"A"+o+","+o+" 0 "+u+",0 "+o*h+","+o*g+"Z":"M"+s*h+","+s*g+"A"+s+","+s+" 0 "+u+",1 "+s*d+","+s*p+"L0,0Z"},n.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?n.isObject(t[i])&&n.isObject(e[i])?t[i]=n.mergeAttrs(t[i],e[i]):n.isObject(t[i])?t[i]=n.mergeAttrs(t[i],n.styleToObject(e[i])):n.isObject(e[i])?t[i]=n.mergeAttrs(n.styleToObject(t[i]),e[i]):t[i]=n.mergeAttrs(n.styleToObject(t[i]),n.styleToObject(e[i])):t[i]=e[i];return t},n.annotateString=function(t,e,i){e=e||[],i=i||{};for(var r,o,s,a=i.offset||0,l=[],c=[],u=0;u<t.length;u++){o=c[u]=t[u];for(var h=0;h<e.length;h++){var g=e[h],d=g.start+a,p=g.end+a;u>=d&&u<p&&(n.isObject(o)?o.attrs=n.mergeAttrs(n.mergeAttrs({},o.attrs),g.attrs):o=c[u]={t:t[u],attrs:g.attrs},i.includeAnnotationIndices&&(o.annotations||(o.annotations=[])).push(h))}s=c[u-1],s?n.isObject(o)&&n.isObject(s)?JSON.stringify(o.attrs)===JSON.stringify(s.attrs)?r.t+=o.t:(l.push(r),r=o):n.isObject(o)?(l.push(r),r=o):n.isObject(s)?(l.push(r),r=o):r=(r||"")+o:r=o}return r&&l.push(r),l},n.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&i.push(t)}),i},n.findAnnotationsBetweenIndexes=function(t,e,i){var n=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&n.push(t)}),n},n.shiftAnnotations=function(t,e,i){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)}),t},n.convertLineToPathData=function(t){t=n(t);var e=["M",t.attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ");return e},n.convertPolygonToPathData=function(t){var e=n.getPointsFromSvgNode(n(t).node);return e.length>0?n.svgPointsToPath(e)+" Z":null},n.convertPolylineToPathData=function(t){var e=n.getPointsFromSvgNode(n(t).node);return e.length>0?n.svgPointsToPath(e):null},n.svgPointsToPath=function(t){var e;for(e=0;e<t.length;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},n.getPointsFromSvgNode=function(t){var e,i=[];for(e=0;e<t.points.numberOfItems;e++)i.push(t.points.getItem(e));return i},n.KAPPA=.5522847498307935,n.convertCircleToPathData=function(t){t=n(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),o=r*n.KAPPA,s=["M",e,i-r,"C",e+o,i-r,e+r,i-o,e+r,i,"C",e+r,i+o,e+o,i+r,e,i+r,"C",e-o,i+r,e-r,i+o,e-r,i,"C",e-r,i-o,e-o,i-r,e,i-r,"Z"].join(" ");return s},n.convertEllipseToPathData=function(t){t=n(t);var e=parseFloat(t.attr("cx"))||0,i=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),o=parseFloat(t.attr("ry"))||r,s=r*n.KAPPA,a=o*n.KAPPA,l=["M",e,i-o,"C",e+s,i-o,e+r,i-a,e+r,i,"C",e+r,i+a,e+s,i+o,e,i+o,"C",e-s,i+o,e-r,i+a,e-r,i,"C",e-r,i-a,e-s,i-o,e,i-o,"Z"].join(" ");return l},n.convertRectToPathData=function(t){t=n(t);var e,i=parseFloat(t.attr("x"))||0,r=parseFloat(t.attr("y"))||0,o=parseFloat(t.attr("width"))||0,a=parseFloat(t.attr("height"))||0,l=parseFloat(t.attr("rx"))||0,c=parseFloat(t.attr("ry"))||0,u=s.rect(i,r,o,a);if(l||c){var h=i+o,g=r+a;e=["M",i+l,r,"L",h-l,r,"Q",h,r,h,r+c,"L",h,r+a-c,"Q",h,g,h-l,g,"L",i+l,g,"Q",i,g,i,g-l,"L",i,r+c,"Q",i,r,i+l,r,"Z"].join(" ")}else e=["M",u.origin().x,u.origin().y,"H",u.corner().x,"V",u.corner().y,"H",u.origin().x,"V",u.origin().y,"Z"].join(" ");return e},n.rectToPath=function(t){var e=t.rx||t["top-rx"]||0,i=t.rx||t["bottom-rx"]||0,n=t.ry||t["top-ry"]||0,r=t.ry||t["bottom-ry"]||0;return["M",t.x,t.y+n,"v",t.height-n-r,"a",i,r,0,0,0,i,r,"h",t.width-2*i,"a",i,r,0,0,0,i,-r,"v",-(t.height-r-n),"a",e,n,0,0,0,-e,-n,"h",-(t.width-2*e),"a",e,n,0,0,0,-e,n].join(" ")},n.toNode=function(t){return n.isV(t)?t.node:t.nodeName&&t||t[0]},n}();var a={version:"1.0.3",config:{classNamePrefix:"joint-",defaultTheme:"default"},dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},highlighters:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},i.invoke(a.mvc.views,"setTheme",t,e),a.mvc.View.prototype.defaultTheme=t},env:{_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return a.env._tests[t]=e},test:function(t){var e=a.env._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=a.env._results[t];if("undefined"!=typeof i)return i;try{i=e()}catch(n){i=!1}return a.env._results[t]=i,i}},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var i=0;i<t.length;i++){var n=t.charCodeAt(i);e=(e<<5)-e+n,e&=e}return e},getByPath:function(t,e,i){i=i||"/";for(var n,r=e.split(i);r.length;){if(n=r.shift(),!(Object(t)===t&&n in t))return;t=t[n]}return t},setByPath:function(t,e,i,n){n=n||"/";var r=e.split(n),o=t,s=0;if(e.indexOf(n)>-1){for(var a=r.length;s<a-1;s++)o=o[r[s]]||(o[r[s]]={});o[r[a-1]]=i}else t[e]=i;return t},unsetByPath:function(t,e,i){i=i||"/";var n=e.lastIndexOf(i);if(n>-1){var r=a.util.getByPath(t,e.substr(0,n),i);r&&delete r[e.slice(n+1)]}else delete t[e];return t},flattenObject:function(t,e,i){e=e||"/";var n={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&i&&i(t[r])&&(o=!1),o){var s=this.flattenObject(t[r],e,i);for(var a in s)s.hasOwnProperty(a)&&(n[r+e+a]=s[a])}else n[r]=t[r]}return n},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)})},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},mixin:i.assign,supplement:i.defaults,deepMixin:i.mixin,deepSupplement:i.defaultsDeep,normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),
!t){var e=0;t=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=setTimeout(function(){t(i+n)},n);return e=i+n,r}}return function(e,n){return t(n?i.bind(e,n):e)}}(),cancelFrame:function(){var t,e="undefined"!=typeof window;return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?i.bind(t,window):t}(),shapePerimeterConnectionPoint:function(t,e,i,n){var o,a;if(!i){var l=e.$(".scalable")[0],c=e.$(".rotatable")[0];l&&l.firstChild?i=l.firstChild:c&&c.firstChild&&(i=c.firstChild)}return i?(a=r(i).findIntersection(n,t.paper.viewport),a||(o=s.rect(r(i).bbox(!1,t.paper.viewport)))):(o=e.model.getBBox(),a=o.intersectionWithLineFromCenterToPoint(n)),a||o.center()},breakText:function(t,e,i,n){n=n||{};var o=e.width,s=e.height,a=n.svgDocument||r("svg").node,l=r("<text><tspan></tspan></text>").attr(i||{}).node,c=l.firstChild,u=document.createTextNode("");l.style.opacity=0,l.style.display="block",c.style.display="block",c.appendChild(u),a.appendChild(l),n.svgDocument||document.body.appendChild(a);for(var h,g=t.split(" "),d=[],p=[],f=0,I=0,m=g.length;f<m;f++){var C=g[f];if(u.data=p[I]?p[I]+" "+C:C,c.getComputedTextLength()<=o)p[I]=u.data,h&&(d[I++]=!0,h=0);else{if(!p[I]||h){var A=!!h;if(h=C.length-1,A||!h){if(!h){if(!p[I]){p=[];break}g.splice(f,2,C+g[f+1]),m--,d[I++]=!0,f--;continue}g[f]=C.substring(0,h),g[f+1]=C.substring(h)+g[f+1]}else g.splice(f,1,C.substring(0,h),C.substring(h)),m++,I&&!d[I-1]&&I--;f--;continue}I++,f--}if("undefined"!=typeof s){var y=y||1.25*l.getBBox().height;if(y*p.length>s){p.splice(Math.floor(s/y));break}}}return n.svgDocument?a.removeChild(l):document.body.removeChild(a),p.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var i=function(e,i){if(200===e.status){var n=new FileReader;n.onload=function(t){var e=t.target.result;i(null,e)},n.onerror=function(){i(new Error("Failed to load image "+t))},n.readAsDataURL(e.response)}else i(new Error("Failed to load image "+t))},n=function(e,i){var n=function(t){for(var e=32768,i=[],n=0;n<t.length;n+=e)i.push(String.fromCharCode.apply(null,t.subarray(n,n+e)));return i.join("")};if(200===e.status){var r=new Uint8Array(e.response),o=t.split(".").pop()||"png",s={svg:"svg+xml"},a="data:image/"+(s[o]||o)+";base64,",l=a+btoa(n(r));i(null,l)}else i(new Error("Failed to load image "+t))},r=new XMLHttpRequest;r.open("GET",t,!0),r.addEventListener("error",function(){e(new Error("Failed to load image "+t))}),r.responseType=window.FileReader?"blob":"arraybuffer",r.addEventListener("load",function(){window.FileReader?i(r,e):n(r,e)}),r.send()},getElementBBox:function(t){var e=n(t);if(0===e.length)throw new Error("Element not found");var i=e[0],o=i.ownerDocument,s=i.getBoundingClientRect(),a=0,l=0;if(i.ownerSVGElement){var c=r(i).bbox();a=s.width-c.width,l=s.height-c.height}return{x:s.left+window.pageXOffset-o.documentElement.offsetLeft+a/2,y:s.top+window.pageYOffset-o.documentElement.offsetTop+l/2,width:s.width-a,height:s.height-l}},sortElements:function(t,e){var i=n(t),r=i.map(function(){var t=this,e=t.parentNode,i=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,i),e.removeChild(i)}});return Array.prototype.sort.call(i,e).each(function(t){r[t].call(this)})},setAttributesBySelector:function(t,e){var r=n(t);i.each(e,function(t,e){var n=r.find(e).addBack().filter(e);i.has(t,"class")&&(n.addClass(t["class"]),t=i.omit(t,"class")),n.attr(t)})},normalizeSides:function(t){return Object(t)!==t?(t=t||0,{top:t,bottom:t,left:t,right:t}):{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;1;e+=i,i/=2)if(t>=(7-4*e)/11){var n=(11-6*e-11*t)/4;return-n*n+i*i}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,i){return e=e||0,i=i||1,function(n){var r=t(n);return r<e?e:r>i?i:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var i=e-t;return function(e){return t+i*e}},object:function(t,e){var n=i.keys(t);return function(i){var r,o,s={};for(r=n.length-1;r!=-1;r--)o=n[r],s[o]=t[o]+(e[o]-t[o])*i;return s}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),r=255&i,o=(255&n)-r,s=65280&i,a=(65280&n)-s,l=16711680&i,c=(16711680&n)-l;return function(t){var e=r+o*t&255,i=s+a*t&65280,n=l+c*t&16711680;return"#"+(1<<24|e|i|n).toString(16).slice(1)}},unit:function(t,e){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=i.exec(t),r=i.exec(e),o=r[1].indexOf("."),s=o>0?r[1].length-o-1:0;t=+n[1];var a=+r[1]-t,l=n[2];return function(e){return(t+a*e).toFixed(s)+l}}},filter:{outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',n=i.isFinite(t.margin)?t.margin:2,r=i.isFinite(t.width)?t.width:1;return a.util.template(e)({color:t.color||"blue",opacity:i.isFinite(t.opacity)?t.opacity:1,outerRadius:n+r,innerRadius:n})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return a.util.template(e)({color:t.color||"red",width:i.isFinite(t.width)?t.width:1,blur:i.isFinite(t.blur)?t.blur:0,opacity:i.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=i.isFinite(t.x)?t.x:2;return a.util.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:i.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return a.util.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:i.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:i.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=i.isFinite(t.amount)?t.amount:1;return a.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=i.isFinite(t.amount)?t.amount:1;return a.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=i.isFinite(t.amount)?t.amount:1;return a.util.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return a.util.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=i.isFinite(t.amount)?t.amount:1;return a.util.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return a.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:i.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=i.isFinite(t.amount)?t.amount:1;return a.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,i){function n(t){for(var e=t.length,n=[],r=0,o=i.grouping[0];e>0&&o>0;)n.push(t.substring(e-=o,e+o)),o=i.grouping[r=(r+1)%i.grouping.length];return n.reverse().join(i.thousands)}i=i||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var r=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,o=r.exec(t),s=o[1]||" ",a=o[2]||">",l=o[3]||"",c=o[4]||"",u=o[5],h=+o[6],g=o[7],d=o[8],p=o[9],f=1,I="",m="",C=!1;switch(d&&(d=+d.substring(1)),(u||"0"===s&&"="===a)&&(u=s="0",a="=",g&&(h-=Math.floor((h-1)/4))),p){case"n":g=!0,p="g";break;case"%":f=100,m="%",p="f";break;case"p":f=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(I="0"+p.toLowerCase());break;case"c":case"d":C=!0,d=0;break;case"s":f=-1,p="r"}"$"===c&&(I=i.currency[0],m=i.currency[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d))));var A=u&&g;if(C&&e%1)return"";var y=e<0||0===e&&1/e<0?(e=-e,"-"):l,v=m;if(f<0){var b=this.prefix(e,d);e=b.scale(e),v=b.symbol+m}else e*=f;e=this.convert(p,e,d);var w=e.lastIndexOf("."),x=w<0?e:e.substring(0,w),N=w<0?"":i.decimal+e.substring(w+1);!u&&g&&i.grouping&&(x=n(x));var M=I.length+x.length+N.length+(A?0:y.length),j=M<h?new Array(M=h-M+1).join(s):"";return A&&(x=n(j+x)),y+=I,e=x+N,("<"===a?y+e+j:">"===a?j+y+e:"^"===a?j.substring(0,M>>=1)+y+e+j.substring(M):y+(A?e:j+e))+v},string:function(t,e){for(var i,n="{",r=!1,o=[];(i=t.indexOf(n))!==-1;){var s,a,l;if(s=t.slice(0,i),r){a=s.split(":"),l=a.shift().split("."),s=e;for(var c=0;c<l.length;c++)s=s[l[c]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(i+1),n=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,i){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(i);case"e":return e.toExponential(i);case"f":return e.toFixed(i);case"r":return(e=this.round(e,this.precision(e,i))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),i))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var n=i.map(["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],function(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}}),r=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r<=0?r+1:r-1)/3)))),n[8+r/3]}},template:function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^\{\} ]+) ?\}|\{\{([^\{\} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.prototype.slice.call(arguments),r=i.find(e.slice(1,4),function(t){return!!t}),o=r.split("."),s=n[o.shift()];!i.isUndefined(s)&&o.length;)s=s[o.shift()];return i.isUndefined(s)?"":s})}},toggleFullScreen:function(t){function e(t,e){for(var n=["webkit","moz","ms","o",""],r=0;r<n.length;r++){var o=n[r],s=o?o+e:e.substr(0,1).toLowerCase()+e.substr(1);if(!i.isUndefined(t[s]))return i.isFunction(t[s])?t[s]():t[s]}}t=t||document.body,e(document,"FullScreen")||e(document,"IsFullScreen")?e(document,"CancelFullScreen"):e(t,"RequestFullScreen")},addClassNamePrefix:function(t){return t?i.map(t.toString().split(" "),function(t){return t.substr(0,a.config.classNamePrefix.length)!==a.config.classNamePrefix&&(t=a.config.classNamePrefix+t),t}).join(" "):t},removeClassNamePrefix:function(t){return t?i.map(t.toString().split(" "),function(t){return t.substr(0,a.config.classNamePrefix.length)===a.config.classNamePrefix&&(t=t.substr(a.config.classNamePrefix.length)),t}).join(" "):t},wrapWith:function(t,e,n){if(i.isString(n)){if(!a.util.wrappers[n])throw new Error('Unknown wrapper: "'+n+'"');n=a.util.wrappers[n]}if(!i.isFunction(n))throw new Error("Wrapper must be a function.");i.each(e,function(e){t[e]=n(t[e])})},wrappers:{cells:function(t){return function(){var e=Array.prototype.slice.call(arguments),n=e.length>0&&i.first(e)||[],r=e.length>1&&i.last(e)||{};return i.isArray(n)||(r instanceof a.dia.Cell?(n=e,r={}):n=i.initial(e)),t.call(this,n,r)}}}}};if(a.mvc.View=e.View.extend({options:{},theme:null,themeClassNamePrefix:a.util.addClassNamePrefix("theme-"),requireSetThemeOverride:!1,defaultTheme:a.config.defaultTheme,constructor:function(t){e.View.call(this,t)},initialize:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=i.extend({},this.options,t),i.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),a.mvc.views[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this._ensureElClassName(),this.init()},_ensureElClassName:function(){var t=i.result(this,"className"),e=a.util.addClassNamePrefix(t);this.$el.removeClass(t),this.$el.addClass(e)},init:function(){},onRender:function(){},setTheme:function(t,e){if(e=e||{},!this.theme||!this.requireSetThemeOverride||e.override)return this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),a.mvc.views[this.cid]=null,e.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),function(){a.mvc.View._extend=a.mvc.View.extend,a.mvc.View.extend=function(t,e){t=t||{};var i=t.render||this.prototype.render||null;return t.render=function(){return i&&i.apply(this,arguments),this.onRender(),this},a.mvc.View._extend.call(this,t,e)}}(),a.dia.GraphCells=e.Collection.extend({cellNamespace:a.shapes,initialize:function(t,e){e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var i=e.collection,n=i.cellNamespace,r="link"===t.type?a.dia.Link:a.util.getByPath(n,t.type,".")||a.dia.Element,o=new r(t,e);return o.graph=i.graph,o},comparator:function(t){return t.get("z")||0}}),a.dia.Graph=e.Model.extend({_batches:{},initialize:function(t,i){i=i||{};var n=new a.dia.GraphCells([],{model:i.cellModel,cellNamespace:i.cellNamespace,graph:this});e.Model.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this.on("batch:stop",this._onBatchStop,this),this._out={},this._in={},this._nodes={},this._edges={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.hasActiveBatch("to-front")||this.hasActiveBatch("to-back")||this.get("cells").sort()},_onBatchStop:function(t){var e=t&&t.batchName;"to-front"!==e&&"to-back"!==e||this.hasActiveBatch(e)||this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),i=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),i=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},i.each(t,this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.get("source");i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,n,r){var o;return"object"==typeof t?(o=t,r=n):(o={})[t]=n,o.hasOwnProperty("cells")&&(this.resetCells(o.cells,r),o=i.omit(o,"cells")),e.Model.prototype.set.call(this,o,r)},clear:function(t){t=i.extend({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy(function(t){return t.isLink()?1:2});do n.shift().remove(t);while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,n){var r;if(t instanceof e.Model?(r=t.attributes,t.graph||n&&n.dry||(t.graph=this)):r=t,!i.isString(r.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t?t.get("z")||0:0},addCell:function(t,n){return i.isArray(t)?this.addCells(t,n):(t instanceof e.Model?t.has("z")||t.set("z",this.maxZIndex()+1):i.isUndefined(t.z)&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,n),n||{}),this)},addCells:function(t,e){return t.length&&(t=i.flattenDeep(t),e.position=t.length,this.startBatch("add"),i.each(t,function(t){e.position--,this.addCell(t,e)},this),this.stopBatch("add")),this},resetCells:function(t,e){var n=i.map(t,i.bind(this._prepareCell,this,i,e));return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),i.invoke(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){i=i||{},i.clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return i.map(this._nodes,function(t,e){return this.getCell(e)},this)},getLinks:function(){return i.map(this._edges,function(t,e){return this.getCell(e)},this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var n=e.inbound,r=e.outbound;i.isUndefined(n)&&i.isUndefined(r)&&(n=r=!0);var o=[],s={};if(r&&i.each(this.getOutboundEdges(t.id),function(t,e){s[e]||(o.push(this.getCell(e)),s[e]=!0)},this),n&&i.each(this.getInboundEdges(t.id),function(t,e){s[e]||(o.push(this.getCell(e)),s[e]=!0)},this),e.deep){var a=t.getEmbeddedCells({deep:!0}),l={};i.each(a,function(t){t.isLink()&&(l[t.id]=!0)}),i.each(a,function(t){t.isLink()||(r&&i.each(this.getOutboundEdges(t.id),function(t,e){s[e]||l[e]||(o.push(this.getCell(e)),s[e]=!0)},this),n&&i.each(this.getInboundEdges(t.id),function(t,e){s[e]||l[e]||(o.push(this.getCell(e)),s[e]=!0)},this))},this)}return o},getNeighbors:function(t,e){e=e||{};var n=e.inbound,r=e.outbound;i.isUndefined(n)&&i.isUndefined(r)&&(n=r=!0);var o=i.transform(this.getConnectedLinks(t,e),function(o,s){var a=s.get("source"),l=s.get("target"),c=s.hasLoop(e);if(n&&i.has(a,"id")&&!o[a.id]){var u=this.getCell(a.id);!c&&(!u||u===t||e.deep&&u.isEmbeddedIn(t))||(o[a.id]=u)}if(r&&i.has(l,"id")&&!o[l.id]){var h=this.getCell(l.id);!c&&(!h||h===t||e.deep&&h.isEmbeddedIn(t))||(o[l.id]=h)}},{},this);return i.values(o)},getCommonAncestor:function(){var t=i.map(arguments,function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e},this);t=i.sortBy(t,"length");var e=i.find(t.shift(),function(e){return i.every(t,function(t){return i.contains(t,e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},i.extend({},e,{outbound:!0})),n},cloneCells:function(t){t=i.unique(t);var e=i.transform(t,function(t,e){t[e.id]=e.clone()},{});return i.each(t,function(t){var n=e[t.id];if(n.isLink()){var r=n.get("source"),o=n.get("target");r.id&&e[r.id]&&n.prop("source/id",e[r.id].id),o.id&&e[o.id]&&n.prop("target/id",e[o.id].id)}var s=t.get("parent");s&&e[s]&&n.set("parent",e[s].id);var a=i.reduce(t.get("embeds"),function(t,i){return e[i]&&t.push(e[i].id),t},[]);i.isEmpty(a)||n.set("embeds",a)}),e},cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var n=[],r={},o=[],s=[];return i.each(t,function(t){if(r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?s.push(t):o.push(t)),e.deep){var a=t.getEmbeddedCells({deep:!0});i.each(a,function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?s.push(t):o.push(t))})}}),i.each(s,function(t){var e=t.get("source"),i=t.get("target");if(e.id&&!r[e.id]){var s=this.getCell(e.id);n.push(s),r[s.id]=s,o.push(s)}if(i.id&&!r[i.id]){var a=this.getCell(i.id);n.push(this.getCell(i.id)),r[a.id]=a,o.push(a)}},this),i.each(o,function(t){var o=this.getConnectedLinks(t,e);i.each(o,function(t){var e=t.get("source"),i=t.get("target");!r[t.id]&&e.id&&r[e.id]&&i.id&&r[i.id]&&(n.push(t),r[t.id]=t)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},i.extend({},e,{inbound:!0})),n},search:function(t,e,i){i=i||{},i.breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,n){n=n||{};var r={},o={},s=[];for(s.push(t),o[t.id]=0;s.length>0;){var a=s.shift();if(!r[a.id]){if(r[a.id]=!0,e(a,o[a.id])===!1)return;i.each(this.getNeighbors(a,n),function(t){o[t.id]=o[a.id]+1,s.push(t)})}}},dfs:function(t,e,n,r,o){n=n||{};var s=r||{},a=o||0;e(t,a)!==!1&&(s[t.id]=!0,i.each(this.getNeighbors(t,n),function(t){s[t.id]||this.dfs(t,e,n,s,a+1)},this))},getSources:function(){var t=[];return i.each(this._nodes,function(e,n){this._in[n]&&!i.isEmpty(this._in[n])||t.push(this.getCell(n))},this),t},getSinks:function(){var t=[];return i.each(this._nodes,function(e,n){this._out[n]&&!i.isEmpty(this._out[n])||t.push(this.getCell(n))},this),t},isSource:function(t){return!this._in[t.id]||i.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||i.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var i=!1;return this.search(t,function(n){if(n===e&&n!==t)return i=!0,!1},{outbound:!0}),i},isPredecessor:function(t,e){var i=!1;return this.search(t,function(n){if(n===e&&n!==t)return i=!0,!1},{inbound:!0}),i},isNeighbor:function(t,e,n){n=n||{};var r=n.inbound,o=n.outbound;i.isUndefined(r)&&i.isUndefined(o)&&(r=o=!0);var s=!1;return i.each(this.getConnectedLinks(t,n),function(t){var n=t.get("source"),a=t.get("target");return r&&i.has(n,"id")&&n.id===e.id?(s=!0,!1):o&&i.has(a,"id")&&a.id===e.id?(s=!0,!1):void 0}),s},disconnectLinks:function(t,e){i.each(this.getConnectedLinks(t),function(i){i.set(i.get("source").id===t.id?"source":"target",s.point(0,0),e)})},removeLinks:function(t,e){i.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return i.filter(this.getElements(),function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){t=s.rect(t),e=i.defaults(e||{},{strict:!1});var n=e.strict?"containsRect":"intersect";return i.filter(this.getElements(),function(e){return t[n](e.getBBox())})},findModelsUnderElement:function(t,e){e=i.defaults(e||{},{searchBy:"bbox"});var n=t.getBBox(),r="bbox"==e.searchBy?this.findModelsInArea(n):this.findModelsFromPoint(n[e.searchBy]());return i.reject(r,function(e){return t.id==e.id||e.isEmbeddedIn(t)})},getBBox:function(t,e){return this.getCellsBBox(t||this.getElements(),e)},getCellsBBox:function(t,e){return i.reduce(t,function(t,i){return i.isLink()?t:t?t.union(i.getBBox(e)):i.getBBox(e)},null)},translate:function(t,e,n){var r=i.reject(this.getCells(),function(t){return t.isEmbedded()});i.invoke(r,"translate",t,e,n)},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,n,r){var o=this.getCellsBBox(n);if(o){var s=Math.max(t/o.width,0),a=Math.max(e/o.height,0);i.invoke(n,"scale",s,a,o.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",i.extend({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",i.extend({},e,{batchName:t}))},hasActiveBatch:function(t){return t?this._batches[t]:i.any(this._batches,function(t){return t>0})}}),a.util.wrapWith(a.dia.Graph.prototype,["resetCells","addCells","removeCells"],"cells"),a.dia.Cell=e.Model.extend({constructor:function(t,e){var n,r=t||{};this.cid=i.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(n=i.result(this,"defaults"))&&(r=i.merge({},n,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,n={};i.each(e,function(e,r){var o=t[r];i.each(e,function(t,e){i.isObject(t)&&!i.isArray(t)?i.each(t,function(t,s){o&&o[e]&&i.isEqual(o[e][s],t)||(n[r]=n[r]||{},(n[r][e]||(n[r][e]={}))[s]=t)}):o&&i.isEqual(o[e],t)||(n[r]=n[r]||{},n[r][e]=t)})});var r=i.cloneDeep(i.omit(this.attributes,"attrs"));return r.attrs=n,r},initialize:function(t){t&&t.id||this.set("id",a.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};i.each(this.get("attrs"),function(t,n){t&&t.port&&(i.isUndefined(t.port.id)?e[t.port]={id:t.port}:e[t.port.id]=t.port)});var n={};if(i.each(t,function(t,i){e[i]||(n[i]=!0)}),this.graph&&!i.isEmpty(n)){var r=this.graph.getConnectedLinks(this,{inbound:!0});i.each(r,function(t){n[t.get("target").port]&&t.remove()});var o=this.graph.getConnectedLinks(this,{outbound:!0});i.each(o,function(t){n[t.get("source").port]&&t.remove()})}this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.startBatch("remove");var n=this.get("parent");if(n){var r=e&&e.getCell(n);r.unembed(this)}return i.invoke(this.getEmbeddedCells(),"remove",t),this.trigger("remove",this,this.collection,t),e&&e.stopBatch("remove"),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.startBatch("to-front").set("z",e,t),t.deep){var n=this.getEmbeddedCells({deep:!0,breadthFirst:!0});i.each(n,function(i){i.set("z",++e,t)})}this.stopBatch("to-front")}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.startBatch("to-back"),t.deep){var n=this.getEmbeddedCells({deep:!0,breadthFirst:!0});i.eachRight(n,function(i){i.set("z",e--,t)})}this.set("z",e,t).stopBatch("to-back")}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var n=i.clone(this.get("embeds")||[]);return n[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",i.uniq(n),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",i.without(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var i=this.graph.getCell(e);if(void 0===i)break;t.push(i),e=i.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var n=this.getEmbeddedCells();n.length>0;){var r=n.shift();e.push(r),n.push.apply(n,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),i.each(e,function(i){e.push.apply(e,i.getEmbeddedCells(t))});else e=i.map(this.get("embeds"),this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var n=i.isString(t)?t:t.id,r=this.get("parent");if(e=i.defaults({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).get("parent")}return!1}return r===n},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if(t=t||{},t.deep)return i.values(a.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var n=e.Model.prototype.clone.apply(this,arguments);return n.set("id",a.util.uuid()),n.unset("embeds"),n.unset("parent"),n},prop:function(t,e,n){var r="/";if(i.isString(t)){if(arguments.length>1){var o=t,s=o.split("/"),l=s[0];if(s.shift(),n=n||{},n.propertyPath=o,n.propertyValue=e,0===s.length)return this.set(l,e,n);var c={},u=c,h=l;i.each(s,function(t){u=u[h]=i.isFinite(Number(t))?[]:{},h=t}),c=a.util.setByPath(c,o,e,"/");var g=i.merge({},this.attributes);n.rewrite&&a.util.unsetByPath(g,o,"/");var d=i.merge(g,c);return this.set(l,d[l],n)}return a.util.getByPath(this.attributes,t,r)}return this.set(i.merge({},this.attributes,t),e)},removeProp:function(t,e){e=e||{},e.dirty=!0;var n=t.split("/");if(1===n.length)return this.unset(t,e);var r=n[0],o=n.slice(1).join("/"),s=i.merge({},this.get(r));return a.util.unsetByPath(s,o,"/"),this.set(r,s,e)},attr:function(t,e,n){var r=Array.prototype.slice.call(arguments);return i.isString(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r)},removeAttr:function(t,e){return i.isArray(t)?(i.each(t,function(t){this.removeAttr(t,e)},this),this):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/";var o={duration:100,delay:10,timingFunction:a.util.timing.linear,valueFunction:a.util.interpolate.number};n=i.extend(o,n);var s,l=0,c=i.bind(function(e){var i,r,o;l=l||e,e-=l,r=e/n.duration,r<1?this._transitionIds[t]=i=a.util.nextFrame(c):(r=1,delete this._transitionIds[t]),o=s(n.timingFunction(r)),n.transitionId=i,this.prop(t,o,n),i||this.trigger("transition:end",this,t)},this),u=i.bind(function(i){this.stopTransitions(t),s=n.valueFunction(a.util.getByPath(this.attributes,t,r),e),this._transitionIds[t]=a.util.nextFrame(i),this.trigger("transition:start",this,t)},this);return i.delay(u,n.delay,c)},getTransitions:function(){return i.keys(this._transitionIds);
},stopTransitions:function(t,e){e=e||"/";var n=t&&t.split(e);return i(this._transitionIds).keys().filter(n&&function(t){return i.isEqual(n,t.split(e).slice(0,n.length))}).each(function(t){a.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,i.extend({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,i.extend({},e,{cell:this})),this}}),a.dia.CellView=a.mvc.View.extend({tagName:"g",className:function(){var t=["cell"],e=this.model.get("type");return e&&i.each(e.toLowerCase().split("."),function(e,i,n){t.push("type-"+n.slice(0,i+1).join("-"))}),t.join(" ")},attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||a.util.guid(this),a.mvc.View.call(this,t)},init:function(){i.bindAll(this,"remove","update"),this.$el.data("view",this),this.$el.attr("data-type",this.model.get("type")),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,i){return i.dirty?this.render():this.update(t,e,i)},can:function(t){var e=i.isFunction(this.options.interactive)?this.options.interactive(this):this.options.interactive;return i.isObject(e)&&e[t]!==!1||i.isBoolean(e)&&e!==!1},_ensureElement:function(){var t;if(this.el)t=i.result(this,"el");else{var e=i.extend({id:this.id},i.result(this,"attributes"));this.className&&(e["class"]=i.result(this,"className")),t=r(i.result(this,"tagName"),e).node}this.setElement(t,!1)},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],this.vel=r(this.el)},findBySelector:function(t){var e="."===t?this.$el:this.$el.find(t);return e},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var i,n=r(t).bbox(!1,this.paper.viewport);return i=e?r(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),i=parseFloat(i)||0,s.rect(n).moveAndExpand({x:-i/2,y:-i/2,width:i,height:i})},getBBox:function(){return s.rect(this.vel.bbox())},highlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),i=this.$el;0===e.length&&(e=i);do{var n=e.attr("magnet");if((n||e.is(i))&&"false"!==n)return e[0];e=e.parent()}while(e.length>0)},applyFilter:function(t,e){var o=i.isString(t)?this.findBySelector(t):n(t),s=e.name+this.paper.svg.id+a.util.hashCode(JSON.stringify(e));if(!this.paper.svg.getElementById(s)){var l=a.util.filter[e.name]&&a.util.filter[e.name](e.args||{});if(!l)throw new Error("Non-existing filter "+e.name);var c=r(l);c.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),e.attrs&&c.attr(e.attrs),c.node.id=s,r(this.paper.svg).defs().append(c)}o.each(function(){r(this).attr("filter","url(#"+s+")")})},applyGradient:function(t,e,o){var s=i.isString(t)?this.findBySelector(t):n(t),l=o.type+this.paper.svg.id+a.util.hashCode(JSON.stringify(o));if(!this.paper.svg.getElementById(l)){var c=["<"+o.type+">",i.map(o.stops,function(t){return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+(i.isFinite(t.opacity)?t.opacity:1)+'" />'}).join(""),"</"+o.type+">"].join(""),u=r(c);o.attrs&&u.attr(o.attrs),u.node.id=l,r(this.paper.svg).defs().append(u)}s.each(function(){r(this).attr(e,"url(#"+l+")")})},getSelector:function(t,e){if(t===this.el)return e;var i;if(t){var n=r(t).index()+1;i=t.tagName+":nth-child("+n+")",e&&(i+=" > "+e),i=this.getSelector(t.parentNode,i)}return i},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},pointerdown:function(t,e,i){this.model.graph&&(this.model.startBatch("pointer"),this._graph=this.model.graph),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){this.notify("cell:pointerup",t,e,i),this._graph&&(this._graph.stopBatch("pointer",{cell:this.model}),delete this._graph)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mousewheel:function(t,e,i,n){this.notify("cell:mousewheel",t,e,i,n)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},setInteractivity:function(t){this.options.interactive=t}}),a.dia.Element=a.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),a.dia.Cell.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},isElement:function(){return!0},position:function(t,e,n){var r=i.isNumber(e);if(n=(r?n:t)||{},n.parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var o=this.graph.getCell(this.get("parent")),a=o&&!o.isLink()?o.get("position"):{x:0,y:0}}if(r)return n.parentRelative&&(t+=a.x,e+=a.y),this.set("position",{x:t,y:e},n);var l=s.point(this.get("position"));return n.parentRelative?l.difference(a):l},translate:function(t,e,n){if(t=t||0,e=e||0,0===t&&0===e)return this;n=n||{},n.translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0};if(n.restrictedArea&&n.translateBy===this.id){var o=this.getBBox({deep:!0}),s=n.restrictedArea,l=r.x-o.x,c=r.y-o.y,u=Math.max(s.x+l,Math.min(s.x+s.width+l-o.width,r.x+t)),h=Math.max(s.y+c,Math.min(s.y+s.height+c-o.height,r.y+e));t=u-r.x,e=h-r.y}var g={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(i.isObject(n.transition)||(n.transition={}),this.transition("position",g,i.extend({},n.transition,{valueFunction:a.util.interpolate.object}))):this.set("position",g,n),i.invoke(this.getEmbeddedCells(),"translate",t,e,n),this},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var n=this.get("size");switch(i.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width}var r=s.normalizeAngle(this.get("angle")||0),o={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(o+=Math.floor((r+45)/90),o%=4);var a=this.getBBox(),l=a[["bottomLeft","corner","topRight","origin"][o]](),c=s.point(l).rotate(a.center(),-r),u=Math.sqrt(t*t+e*e)/2,h=o*Math.PI/2;h+=Math.atan(o%2==0?e/t:t/e),h-=s.toRad(r);var g=s.point.fromPolar(u,h,c),d=s.point(g).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(d.x,d.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,n){var r=this.getBBox().scale(t,e,i);return this.startBatch("scale",n),this.position(r.x,r.y,n),this.resize(r.width,r.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.startBatch("fit-embeds",t),t.deep&&i.invoke(e,"fitEmbeds",t);var n=this.graph.getCellsBBox(e),r=a.util.normalizeSides(t.padding);n.moveAndExpand({x:-r.left,y:-r.top,width:r.right+r.left,height:r.bottom+r.top}),this.set({position:{x:n.x,y:n.y},size:{width:n.width,height:n.height}},t),this.stopBatch("fit-embeds")}return this},rotate:function(t,e,n,r){if(n){var o=this.getBBox().center(),s=this.get("size"),a=this.get("position");o.rotate(n,this.get("angle")-t);var l=o.x-s.width/2-a.x,c=o.y-s.height/2-a.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.translate(l,c,i.clone(r)),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},getBBox:function(t){if(t=t||{},t.deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var i=this.get("position"),n=this.get("size");return s.rect(i.x,i.y,n.width,n.height)}}),a.dia.ElementView=a.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],_removePorts:function(){},_renderPorts:function(){},className:function(){var t=a.dia.CellView.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){a.dia.CellView.prototype.initialize.apply(this,arguments);var t=this.model;this.listenTo(t,"change:position",this.translate),this.listenTo(t,"change:size",this.resize),this.listenTo(t,"change:angle",this.rotate),this.listenTo(t,"change:markup",this.render),this._initializePorts()},_initializePorts:function(){},updateAttr:function(t,e){var o=this.SPECIAL_ATTRIBUTES.slice();i.isObject(e.filter)&&(o.push("filter"),this.applyFilter(t,e.filter)),i.isObject(e.fill)&&(o.push("fill"),this.applyGradient(t,"fill",e.fill)),i.isObject(e.stroke)&&(o.push("stroke"),this.applyGradient(t,"stroke",e.stroke)),i.isUndefined(e.text)||(t.each(function(){i.isUndefined(e.x)||(r(this).attr("x",e.x),o.push("x")),i.isUndefined(e.y)||(r(this).attr("y",e.y),o.push("y")),r(this).text(e.text+"",{lineHeight:e.lineHeight,textPath:e.textPath,annotations:e.annotations})}),o.push("lineHeight","textPath","annotations"));var s=i.omit(e,o);t.each(function(){r(this).attr(s)}),e.port&&t.attr("port",i.isUndefined(e.port.id)?e.port:e.port.id),e.style&&t.css(e.style),i.isUndefined(e.html)||t.each(function(){n(this).html(e.html+"")})},update:function(t,e){this._removePorts();var n=this.model.get("attrs"),o=this.rotatableNode;if(o){var s=o.attr("transform");o.attr("transform","")}var a=[],l={};i.each(e||n,function(t,e){var n="."===e?this.$el:this.findBySelector(e),r=n.length;if(0!==r&&(l[e]=n,this.updateAttr(n,t),!(i.isUndefined(t["ref-x"])&&i.isUndefined(t["ref-y"])&&i.isUndefined(t["ref-dx"])&&i.isUndefined(t["ref-dy"])&&i.isUndefined(t["x-alignment"])&&i.isUndefined(t["y-alignment"])&&i.isUndefined(t["ref-width"])&&i.isUndefined(t["ref-height"]))))for(var o=0;o<r;o++){var s=n.eq(o);s.selector=e,a.push(s)}},this);var c=this.model.get("size"),u={x:0,y:0,width:c.width,height:c.height};e=e||{},i.each(a,function(t){var o=e[t.selector],s=o?i.merge({},n[t.selector],o):n[t.selector];this.positionRelative(r(t[0]),u,s,l)},this),o&&o.attr("transform",s||""),this._renderPorts()},positionRelative:function(t,e,n,o){var s=n.ref,a=parseFloat(n["ref-dx"]),l=parseFloat(n["ref-dy"]),c=n["y-alignment"],u=n["x-alignment"],h=n["ref-y"],g=i.isString(h)&&"%"===h.slice(-1);h=parseFloat(h),g&&(h/=100);var d=n["ref-x"],p=i.isString(d)&&"%"===d.slice(-1);d=parseFloat(d),p&&(d/=100);var f=n["ref-width"],I=i.isString(f)&&"%"===f.slice(-1);f=parseFloat(f),I&&(f/=100);var m=n["ref-height"],C=i.isString(m)&&"%"===m.slice(-1);m=parseFloat(m),C&&(m/=100);var A=t.findParentByClass("scalable",this.el);if(s){var y;if(y=o&&o[s]?r(o[s][0]):"."===s?this.vel:this.vel.findOne(s),!y)throw new Error("dia.ElementView: reference does not exists.");e=y.bbox(!1,this.el)}t.attr("transform")&&t.attr("transform",t.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),isFinite(f)&&(I||f>=0&&f<=1?t.attr("width",f*e.width):t.attr("width",Math.max(f+e.width,0))),isFinite(m)&&(C||m>=0&&m<=1?t.attr("height",m*e.height):t.attr("height",Math.max(m+e.height,0)));var v,b=0,w=0;if(isFinite(a)&&(A?(v=v||A.scale(),b=e.x+e.width+a/v.sx):b=e.x+e.width+a),isFinite(l)&&(A?(v=v||A.scale(),w=e.y+e.height+l/v.sy):w=e.y+e.height+l),isFinite(d)&&(p||d>0&&d<1?b=e.x+e.width*d:A?(v=v||A.scale(),b=e.x+d/v.sx):b=e.x+d),isFinite(h)&&(g||h>0&&h<1?w=e.y+e.height*h:A?(v=v||A.scale(),w=e.y+h/v.sy):w=e.y+h),!i.isUndefined(c)||!i.isUndefined(u)){var x=t.node,N=t.bbox(!1,x.parentNode),M=x.nodeName.toUpperCase();"TEXT"!==M&&"TSPAN"!==M||(N.height+=N.y,N.width+=N.x),A&&(v=v||A.scale(),N.width*=v.sx,N.height*=v.sy),"middle"===c?w-=N.height/2:"bottom"===c?w-=N.height:isFinite(c)&&(w+=c>-1&&c<1?N.height*c:c),"middle"===u?b-=N.width/2:"right"===u?b-=N.width:isFinite(u)&&(b+=u>-1&&u<1?N.width*u:u)}t.translate(b,w)},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=a.util.template(t)(),i=r(e);this.vel.append(i)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(t,e){this.vel.scale(t,e)},resize:function(t,e,i){var n=this.model,r=n.get("size")||{width:1,height:1},o=n.get("angle")||0,s=this.scalableNode;if(!s)return 0!==o&&this.rotate(),void this.update();var a=s.bbox(!0);s.attr("transform","scale("+r.width/(a.width||1)+","+r.height/(a.height||1)+")");var l=this.rotatableNode,c=l&&l.attr("transform");if(c&&"null"!==c){l.attr("transform",c+" rotate("+-o+","+r.width/2+","+r.height/2+")");var u=s.bbox(!1,this.paper.viewport);n.set("position",{x:u.x,y:u.y},i),this.rotate()}this.update()},translate:function(t,e,i){var n=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+n.x+","+n.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,i=this.model.get("size")||{width:1,height:1},n=i.width/2,r=i.height/2;0!==e?t.attr("transform","rotate("+e+","+n+","+r+")"):t.removeAttr("transform")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle")),i=this.paper.viewport.getCTM();return s.rect(r.transformRect(e,i))}return a.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){t=t||{};var e=t.model||this.model,n=t.paper||this.paper,r=n.model;e.startBatch("to-front",t),e.toFront({deep:!0,ui:!0});var o=r.get("cells").max("z").get("z"),s=r.getConnectedLinks(e,{deep:!0});i.invoke(s,"set","z",o+1,{ui:!0}),e.stopBatch("to-front");var a=e.get("parent");a&&r.getCell(a).unembed(e,{ui:!0})},processEmbedding:function(t){t=t||{};var e=t.model||this.model,i=t.paper||this.paper,n=i.options,r=i.model.findModelsUnderElement(e,{searchBy:n.findParentBy});n.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=this._candidateEmbedView,a=r.length-1;a>=0;a--){var l=r[a];if(s&&s.model.id==l.id){o=s;break}var c=l.findView(i);if(n.validateEmbedding.call(i,this,c)){o=c;break}}o&&o!=s&&(this.clearEmbedding(),this._candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&this.clearEmbedding()},clearEmbedding:function(){var t=this._candidateEmbedView;t&&(t.unhighlight(null,{embedding:!0}),this._candidateEmbedView=null)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;e&&(e.model.embed(n,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),i.invoke(r.model.getConnectedLinks(n,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,i){var n=this.paper;if(t.target.getAttribute("magnet")&&this.can("addLinkFromMagnet")&&n.options.validateMagnet.call(n,this,t.target)){this.model.startBatch("add-link");var r=n.getDefaultLink(this,t.target);r.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:i}}),n.model.addCell(r);var o=this._linkView=n.findViewByModel(r);o.pointerdown(t,e,i),o.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=i,this.restrictedArea=n.getRestrictedArea(this),a.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,i)},pointermove:function(t,e,i){if(this._linkView)this._linkView.pointermove(t,e,i);else{var n=this.paper.options.gridSize;if(this.can("elementMove")){var r=this.model.get("position"),o=s.snapToGrid(r.x,n)-r.x+s.snapToGrid(e-this._dx,n),l=s.snapToGrid(r.y,n)-r.y+s.snapToGrid(i-this._dy,n);this.model.translate(o,l,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=s.snapToGrid(e,n),this._dy=s.snapToGrid(i,n),a.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,i)}},pointerup:function(t,e,i){this._linkView?(this._linkView.pointerup(t,e,i),this._linkView=null,this.model.stopBatch("add-link")):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,i),a.dia.CellView.prototype.pointerup.apply(this,arguments))}}),a.dia.Link=a.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(){return this.set({source:s.point(0,0),target:s.point(0,0)})},label:function(t,e){t=t||0;var n=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return n[t];var r=i.merge({},n[t],e),o=n.slice();return o[t]=r,this.set({labels:o})},translate:function(t,e,i){return i=i||{},i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints(function(i){return{x:(i.x||0)+t,y:(i.y||0)+e}},i)},scale:function(t,e,i,n){return this.applyToPoints(function(n){return s.point(n).scale(t,e,i).toJSON()},n)},applyToPoints:function(t,e){if(!i.isFunction(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},r=this.get("source");r.id||(n.source=t(r));var o=this.get("target");o.id||(n.target=t(o));var s=this.get("vertices");return s&&s.length>0&&(n.vertices=i.map(s,t)),this.set(n,e)},reparent:function(t){var e;if(this.graph){var i=this.graph.getCell(this.get("source").id),n=this.graph.getCell(this.get("target").id),r=this.graph.getCell(this.get("parent"));i&&n&&(e=this.graph.getCommonAncestor(i,n)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.get("source").id,i=this.get("target").id;if(!e||!i)return!1;var n=e===i;if(!n&&t.deep&&this.graph){var r=this.graph.getCell(e),o=this.graph.getCell(i);n=r.isEmbeddedIn(o)||o.isEmbeddedIn(r)}return n},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=i.compact([this,this.getSourceElement(),this.getTargetElement()]);t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=i.isString(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),a.dia.LinkView=a.dia.CellView.extend({className:function(){var t=a.dia.CellView.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){a.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,i){this.watchSource(t,e),i.translateBy&&this.model.get("target").id||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onTargetChange:function(t,e,i){this.watchTarget(t,e),i.translateBy||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onVerticesChange:function(t,e,i){this.renderVertexMarkers(),i.translateBy&&i.translateBy!==this.model.id||(i.updateConnectionOnly=!0,this.update(t,null,i))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=t.get("markup")||t.markup,o=r(e);if(i.isArray(o)||(o=[o]),this._V={},i.each(o,function(t){var e=t.attr("class");e&&(e=a.util.removeClassNamePrefix(e),this._V[n.camelCase(e)]=t)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(o),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var t=n(this._V.labels.node).empty(),e=this.model.get("labels")||[];if(!e.length)return this;var o=a.util.template(this.model.get("labelMarkup")||this.model.labelMarkup),s=r(o()),l=this.can("labelMove");return i.each(e,function(e,o){var c=s.clone().node;r(c).attr("label-idx",o),l&&r(c).attr("cursor","move"),this._labelCache[o]=r(c);var u=n(c).find("text"),h=n(c).find("rect"),g=i.extend({"text-anchor":"middle","font-size":14},a.util.getByPath(e,"attrs/text","/"));u.attr(i.omit(g,"text")),i.isUndefined(g.text)||r(u[0]).text(g.text+"",{annotations:g.annotations}),t.append(c);var d=r(u[0]).bbox(!0,t[0]);r(u[0]).translate(0,-d.height/2);var p=i.extend({fill:"white",rx:3,ry:3},a.util.getByPath(e,"attrs/rect","/"));h.attr(i.extend(p,{x:d.x,y:d.y-d.height/2,width:d.width,height:d.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var t=n(this._V.linkTools.node).empty(),e=a.util.template(this.model.get("toolMarkup")||this.model.toolMarkup),i=r(e());if(t.append(i.node),this._toolCache=i,this.options.doubleLinkTools){var o;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=a.util.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),o=r(e())):o=i.clone(),t.append(o.node),this._tool2Cache=o}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=n(this._V.markerVertices.node).empty(),e=a.util.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return i.each(this.model.get("vertices"),function(n,o){t.append(r(e(i.extend({idx:o},n))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=n(this._V.markerArrowheads.node);t.empty();var e=a.util.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=r(e({end:"source"})),this._V.targetArrowhead=r(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,i){return i=i||{},i.updateConnectionOnly||this.updateAttributes(),this.updateConnection(i),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,n=this.model;if(t.translateBy&&n.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=this.route=i.map(this.route,function(t){return s.point(t).offset(r,o)}),this._translateConnectionPoints(r,o)}else e=this.route=this.findRoute(n.get("vertices")||[],t),this._findConnectionPoints(e);var a=this.getPathData(e);this._V.connection.attr("d",a),this._V.connectionWrap&&this._V.connectionWrap.attr("d",a),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){i.each(this.model.get("attrs"),function(t,e){var n=[];i.isObject(t.fill)&&(this.applyGradient(e,"fill",t.fill),n.push("fill")),i.isObject(t.stroke)&&(this.applyGradient(e,"stroke",t.stroke),n.push("stroke")),i.isObject(t.filter)&&(this.applyFilter(e,t.filter),n.push("filter")),n.length>0&&(n.unshift(t),t=i.omit.apply(i,n)),this.findBySelector(e).attr(t)},this)},_findConnectionPoints:function(t){var e,n,r,o,a=i.first(t);e=this.getConnectionPoint("source",this.model.get("source"),a||this.model.get("target")).round();var l=i.last(t);n=this.getConnectionPoint("target",this.model.get("target"),l||e).round();var c=this._markerCache;this._V.markerSource&&(c.sourceBBox=c.sourceBBox||this._V.markerSource.bbox(!0),r=s.point(e).move(a||n,c.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(c.targetBBox=c.targetBBox||this._V.markerTarget.bbox(!0),o=s.point(n).move(l||e,c.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),c.sourcePoint=r||e,c.targetPoint=o||n,this.sourcePoint=e,this.targetPoint=n},_translateConnectionPoints:function(t,e){var i=this._markerCache;i.sourcePoint.offset(t,e),i.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.model.get("labels")||[];if(!t.length)return this;var e=this._V.connection.node,n=e.getTotalLength();if(!i.isNaN(n)){var r;i.each(t,function(t,o){var a=t.position,l=i.isObject(a)?a.distance:a,c=i.isObject(a)?a.offset:{x:0,y:0};i.isNaN(l)?l=n/2:(l=l>n?n:l,l=l<0?n+l:l,l=l>1?l:n*l);var u=e.getPointAtLength(l);if(i.isObject(c))u=s.point(u).offset(c.x,c.y);else if(i.isNumber(c)){r||(r=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var h,g,d,p=1/0,f=0;f<r.length;f++)g=r[f],d=s.line(g,u).squaredLength(),d<p&&(p=d,h=f);var I=r[h-1],m=r[h+1],C=0;m?C=s.point(u).theta(m):I&&(C=s.point(I).theta(u)),u=s.point(u).offset(c).rotate(u,C-90)}this._labelCache[o].attr("transform","translate("+u.x+", "+u.y+")")},this)}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,n=this.getConnectionLength();if(!i.isNaN(n)){n<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&n>=this.options.longLinkLength){var o=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(n-o),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===n.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){function e(e,i){i=i||{};var r=null,o=e.previous(t)||{};return o.id&&this.stopListening(this.paper.getModelById(o.id),"change",n),i.id&&(r=this.paper.getModelById(i.id),this.listenTo(r,"change",n)),n.call(this,r,{cacheOnly:!0}),this}var n=i.partial(this.onEndModelChange,t);return e},onEndModelChange:function(t,e,n){var r=!n.cacheOnly,o=this.model,a=o.get(t)||{};if(e){var l=this.constructor.makeSelector(a),c="source"==t?"target":"source",u=o.get(c)||{},h=u.id&&this.constructor.makeSelector(u);if(n.handleBy===this.cid&&l==h)this[t+"BBox"]=this[c+"BBox"],this[t+"View"]=this[c+"View"],this[t+"Magnet"]=this[c+"Magnet"];else if(n.translateBy){var g=this[t+"BBox"];g.x+=n.tx,g.y+=n.ty}else{var d=this.paper.findViewByModel(a.id),p=d.el.querySelector(l);this[t+"BBox"]=d.getStrokeBBox(p),this[t+"View"]=d,this[t+"Magnet"]=p}if(n.handleBy===this.cid&&n.translateBy&&o.isEmbeddedIn(e)&&!i.isEmpty(o.get("vertices"))&&(r=!1),!this.updatePostponed&&u.id){var f=this.paper.getModelById(u.id);a.id===u.id&&(n.handleBy=this.cid),(n.handleBy===this.cid||n.translateBy&&f.isEmbeddedIn(n.translateBy))&&(this.updatePostponed=!0,r=!1)}}else this[t+"BBox"]=s.rect(a.x||0,a.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;r&&(n.updateConnectionOnly=!0,this.update(o,null,n))},_translateAndAutoOrientArrows:function(t,e){t&&t.translateAndAutoOrient(this.sourcePoint,i.first(this.route)||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,i.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=i.clone(this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e,i=(this.model.get("vertices")||[]).slice(),n=i.slice(),o=this._V.connection.node.cloneNode(!1),s=o.getTotalLength(),a=20,l=i.length+1;l--&&(i.splice(l,0,t),r(o).attr("d",this.getPathData(this.findRoute(i))),
e=o.getTotalLength(),e-s>a);)i=n.slice();return l===-1&&(l=0,i.splice(l,0,t)),this.model.set("vertices",i,{ui:!0}),l},sendToken:function(t,e,n){e=e||1e3,r(this.paper.viewport).append(t),r(t).animateAlongPath({dur:e+"ms",repeatCount:1},this._V.connection.node),i.delay(function(){r(t).remove(),n&&n()},e)},findRoute:function(t){var e=a.routers,n=this.model.get("router"),r=this.paper.options.defaultRouter;if(!n)if(this.model.get("manhattan"))n={name:"orthogonal"};else{if(!r)return t;n=r}var o=n.args||{},s=i.isFunction(n)?n:e[n.name];if(!i.isFunction(s))throw new Error('unknown router: "'+n.name+'"');var l=s.call(this,t||[],o,this);return l},getPathData:function(t){var e=a.connectors,n=this.model.get("connector"),r=this.paper.options.defaultConnector;n||(n=this.model.get("smooth")?{name:"smooth"}:r||{});var o=i.isFunction(n)?n:e[n.name],s=n.args||{};if(!i.isFunction(o))throw new Error('unknown connector: "'+n.name+'"');var l=o.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},s,this);return l},getConnectionPoint:function(t,e,n){var r;if(i.isEmpty(e)&&(e={x:0,y:0}),i.isEmpty(n)&&(n={x:0,y:0}),e.id){var o,a=s.Rect("source"===t?this.sourceBBox:this.targetBBox);if(n.id){var l=s.Rect("source"===t?this.targetBBox:this.sourceBBox);o=l.intersectionWithLineFromCenterToPoint(a.center()),o=o||l.center()}else o=s.Point(n);var c=this.paper.options;if(c.perpendicularLinks||this.options.perpendicular){var u,h=a.origin(),g=a.corner();if(h.y<=o.y&&o.y<=g.y)switch(u=a.sideNearestToPoint(o)){case"left":r=s.Point(h.x,o.y);break;case"right":r=s.Point(g.x,o.y);break;default:r=a.center()}else if(h.x<=o.x&&o.x<=g.x)switch(u=a.sideNearestToPoint(o)){case"top":r=s.Point(o.x,h.y);break;case"bottom":r=s.Point(o.x,g.y);break;default:r=a.center()}else r=a.intersectionWithLineFromCenterToPoint(o),r=r||a.center()}else if(c.linkConnectionPoint){var d="target"===t?this.targetView:this.sourceView,p="target"===t?this.targetMagnet:this.sourceMagnet;r=c.linkConnectionPoint(this,d,p,o)}else r=a.intersectionWithLineFromCenterToPoint(o),r=r||a.center()}else r=s.Point(e);return r},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){i.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){function e(t,e){return i[o]=t,i[o+1]=t.el===e?void 0:e,i}var i=[];i[4]=t,i[5]=this;var n,r=0,o=0;"source"===t?(r=2,n="target"):(o=2,n="source");var s=this.model.get(n);return s.id&&(i[r]=this.paper.findViewByModel(s.id),i[r+1]=s.selector&&i[r].el.querySelector(s.selector)),e},_markAvailableMagnets:function(){function t(t,e){var i=t.paper,n=i.options.validateConnection;return n.apply(i,this._validateConnectionArgs(t,e))}var e=this.paper,n=e.model.getElements();this._marked={},i.chain(n).map(e.findViewByModel,e).each(function(e){var n=Array.prototype.slice.call(e.el.querySelectorAll("[magnet]"));"false"!==e.el.getAttribute("magnet")&&n.push(e.el);var r=i.filter(n,i.partial(t,e),this);r.length>0&&(i.each(r,i.partial(e.highlight,i,{magnetAvailability:!0}),e),e.highlight(null,{elementAvailability:!0}),this._marked[e.model.id]=r)},this).value()},_unmarkAvailableMagnets:function(){i.each(this._marked,function(t,e){var n=this.paper.findViewByModel(e);n&&(i.each(t,i.partial(n.unhighlight,i,{magnetAvailability:!0}),n),n.unhighlight(null,{elementAvailability:!0}))},this),this._marked=null},startArrowheadMove:function(t,e){e=i.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialMagnet=this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),this._initialEnd=i.clone(this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},pointerdown:function(t,e,i){if(a.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,i),this._dx=e,this._dy=i,null==t.target.getAttribute("magnet")){var n,o=a.util.removeClassNamePrefix(t.target.getAttribute("class")),s=a.util.removeClassNamePrefix(t.target.parentNode.getAttribute("class"));switch("label"===s?(o=s,n=t.target.parentNode):n=t.target,o){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(r(n).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var l=t.target.parentNode.getAttribute("event");l?this.can("useLinkTools")&&("remove"===l?this.model.remove():this.notify(l,t,e,i)):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:i}),this._action="vertex-move")}}},pointermove:function(t,e,n){switch(this._action){case"vertex-move":var o=i.clone(this.model.get("vertices"));o[this._vertexIdx]={x:e,y:n},this.model.set("vertices",o,{ui:!0});break;case"label-move":for(var l,c,u,h,g={x:e,y:n},d=this._samples,p=1/0,f=0,I=d.length;f<I;f++)u=d[f],h=s.line(u,g).squaredLength(),h<p&&(p=h,l=u,c=f);var m=d[c-1],C=d[c+1],A=0;m&&C?A=s.line(m,C).pointOffset(g):m?A=s.line(m,l).pointOffset(g):C&&(A=s.line(l,C).pointOffset(g)),this.model.label(this._labelIdx,{position:{distance:l.distance/this._linkLength,offset:A}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var y=this.paper.options.snapLinks.radius||50,v=this.paper.findViewsInArea({x:e-y,y:n-y,width:2*y,height:2*y});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var b,w=Number.MAX_VALUE,x=s.point(e,n);i.each(v,function(t){"false"!==t.el.getAttribute("magnet")&&(b=t.model.getBBox().center().distance(x),b<y&&b<w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(w=b,this._closestView=t,this._closestEnd={id:t.model.id})),t.$("[magnet]").each(i.bind(function(e,i){var n=r(i).bbox(!1,this.paper.viewport);b=x.distance({x:n.x+n.width/2,y:n.y+n.height/2}),b<y&&b<w&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,i))&&(w=b,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(i),port:i.getAttribute("port")})},this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:n},{ui:!0})}else{var N="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._targetEvent!==N&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(N),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(N),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=N,this.model.set(this._arrowhead,{x:e,y:n},{ui:!0})}}this._dx=e,this._dy=n,a.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,n)},pointerup:function(t,e,i){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var n,r=this.paper,o=r.options,s=this._arrowhead,l=this._initialEnd;if(o.snapLinks)this._closestView&&(this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),n=this._closestView.findMagnet(this._closestEnd.selector)),this._closestView=this._closestEnd=null;else{var c=this._viewUnderPointer;if(n=this._magnetUnderPointer,this._viewUnderPointer=null,this._magnetUnderPointer=null,n){c.unhighlight(n,{connecting:!0});var u=c.getSelector(n),h=n.getAttribute("port"),g={id:c.model.id};null!=u&&(g.port=h),null!=h&&(g.selector=u),this.model.set(s,g,{ui:!0})}}if(!r.linkAllowed(this))switch(this._whenNotAllowed){case"remove":this.model.remove();break;case"revert":default:this.model.set(s,l,{ui:!0})}o.embeddingMode&&this.model.reparent()&&(this._z=null);var d=this.model.prop(s)||{},p=!a.dia.Link.endsEqual(l,d);p&&(l.id&&this.notify("link:disconnect",t,r.findViewByModel(l.id),this._initialMagnet,s),d.id&&this.notify("link:connect",t,r.findViewByModel(d.id),n,s)),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this._initialMagnet=null,this._initialEnd=null,this._validateConnectionArgs=null,this.notify("link:pointerup",t,e,i),a.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),a.dia.Paper=a.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,perpendicularLinks:!1,elementView:a.dia.ElementView,linkView:a.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:{"default":{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},preventContextMenu:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new a.dia.Link,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,n,r,o){return("target"===r?i:t)instanceof a.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:a.shapes,highlighterNamespace:a.highlighters},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",touchend:"mouseclick",touchmove:"pointermove",mousemove:"pointermove","mouseover .joint-cell":"cellMouseover","mouseout .joint-cell":"cellMouseout",contextmenu:"contextmenu",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel"},_highlights:[],init:function(){i.bindAll(this,"pointerup"),this.model=this.options.model||new a.dia.Graph,this.options.origin=i.clone(this.options.origin),this.options.defaultConnector=i.clone(this.options.defaultConnector),i.defaults(this.options.highlighting,this.constructor.prototype.options.highlighting),this.options.highlighting=i.cloneDeep(this.options.highlighting),this.svg=r("svg").node,this.viewport=r("g").addClass(a.util.addClassNamePrefix("viewport")).node,this.defs=r("defs").node,r(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this._onSort),this.listenTo(this.model,"batch:stop",this._onBatchStop),this.setOrigin(),this.setDimensions(),n(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on("cell:highlight",this.onCellHighlight,this),this.on("cell:unhighlight",this.onCellUnhighlight,this)},_onSort:function(){this.model.hasActiveBatch("add")||this.sortViews()},_onBatchStop:function(t){var e=t&&t.batchName;"add"!==e||this.model.hasActiveBatch("add")||this.sortViews()},onRemove:function(){this.removeViews(),n(document).off("mouseup touchend",this.pointerup)},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,r(this.svg).attr({width:t,height:e}),this.trigger("resize",t,e)},setOrigin:function(t,e){this.options.origin.x=t||0,this.options.origin.y=e||0,r(this.viewport).translate(t,e,{absolute:!0}),this.trigger("translate",t,e),this.options.drawGrid&&this.drawGrid()},fitToContent:function(t,e,n,o){i.isObject(t)?(o=t,t=o.gridWidth||1,e=o.gridHeight||1,n=o.padding||0):(o=o||{},t=t||1,e=e||1,n=n||0),n=a.util.normalizeSides(n);var s=r(this.viewport).bbox(!0,this.svg),l=r(this.viewport).scale();s.x*=l.sx,s.y*=l.sy,s.width*=l.sx,s.height*=l.sy;var c=Math.max(Math.ceil((s.width+s.x)/t),1)*t,u=Math.max(Math.ceil((s.height+s.y)/e),1)*e,h=0,g=0;("negative"==o.allowNewOrigin&&s.x<0||"positive"==o.allowNewOrigin&&s.x>=0||"any"==o.allowNewOrigin)&&(h=Math.ceil(-s.x/t)*t,h+=n.left,c+=h),("negative"==o.allowNewOrigin&&s.y<0||"positive"==o.allowNewOrigin&&s.y>=0||"any"==o.allowNewOrigin)&&(g=Math.ceil(-s.y/e)*e,g+=n.top,u+=g),c+=n.right,u+=n.bottom,c=Math.max(c,o.minWidth||0),u=Math.max(u,o.minHeight||0),c=Math.min(c,o.maxWidth||Number.MAX_VALUE),u=Math.min(u,o.maxHeight||Number.MAX_VALUE);var d=c!=this.options.width||u!=this.options.height,p=h!=this.options.origin.x||g!=this.options.origin.y;p&&this.setOrigin(h,g),d&&this.setDimensions(c,u)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},i.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var n=t.padding,o=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,c=t.maxScaleY||t.maxScale,u=t.fittingBBox||{x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};u=s.rect(u).moveAndExpand({x:n,y:n,width:-2*n,height:-2*n});var h=r(this.viewport).scale(),g=u.width/e.width*h.sx,d=u.height/e.height*h.sy;if(t.preserveAspectRatio&&(g=d=Math.min(g,d)),t.scaleGrid){var p=t.scaleGrid;g=p*Math.floor(g/p),d=p*Math.floor(d/p)}g=Math.min(a,Math.max(o,g)),d=Math.min(c,Math.max(l,d)),this.scale(g,d);var f=this.getContentBBox(),I=u.x-f.x,m=u.y-f.y;this.setOrigin(I,m)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.viewport.getScreenCTM(),i=this.viewport.getCTM();return s.rect({x:t.left-e.e+i.e,y:t.top-e.f+i.f,width:t.width,height:t.height})},getArea:function(){var t=this.viewport.getCTM().inverse(),e={x:0,y:0,width:this.options.width,height:this.options.height};return s.rect(r.transformRect(e,t))},getRestrictedArea:function(){var t;return t=i.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):this.options.restrictTranslate===!0?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var i,n,r=this.options.cellViewNamespace,o=t.get("type")+"View",s=a.util.getByPath(r,o,".");t.isLink()?(i=this.options.linkView,n=a.dia.LinkView):(i=this.options.elementView,n=a.dia.ElementView);var l=i.prototype instanceof e.View?s||i:i.call(this,t)||s||n;return new l({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,n){if(this.options.async&&n.async!==!1&&i.isNumber(n.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==n.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,n),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return r(this.viewport).append(e.el),e.paper=this,e.render(),n(e.el).find("image").on("dragstart",function(){return!1}),e},beforeRenderViews:function(t){return t.sort(function(t){return t instanceof a.dia.Link?1:-1}),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){this.removeViews();var n=t.models.slice();n=this.beforeRenderViews(n,e)||n,this._frameId&&(a.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(n,e):(i.each(n,this.renderView,this),this.sortViews())},removeViews:function(){i.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:i.noop,asyncRenderViews:function(t,e){if(this._frameId){var n=this.options.async&&this.options.async.batchSize||50,r=t.splice(0,n),o=this.model.get("cells");i.each(r,function(t){t.collection===o&&this.renderView(t)},this),this.asyncBatchAdded()}t.length?this._frameId=a.util.nextFrame(function(){this.asyncRenderViews(t,e)},this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=n(this.viewport).children("[model-id]"),e=this.model.get("cells");a.util.sortElements(t,function(t,i){var r=e.get(n(t).attr("model-id")),o=e.get(n(i).attr("model-id"));return(r.get("z")||0)>(o.get("z")||0)?1:-1})},scale:function(t,e,n,o){e=e||t,i.isUndefined(n)&&(n=0,o=0),r(this.viewport).attr("transform","");var s=this.options.origin.x,a=this.options.origin.y;if(n||o||s||a){var l=s-n*(t-1),c=a-o*(e-1);this.setOrigin(l,c)}return r(this.viewport).scale(t,e),this.trigger("scale",t,e,n,o),this.options.drawGrid&&this.drawGrid(),this},rotate:function(t,e,n){if(i.isUndefined(e)){var o=this.viewport.getBBox();e=o.width/2,n=o.height/2}r(this.viewport).rotate(t,e,n)},findView:function(t){for(var e=i.isString(t)?this.viewport.querySelector(t):t instanceof n?t[0]:t;e&&e!==this.el&&e!==document;){var r=e.getAttribute("model-id");if(r)return this._views[r];e=e.parentNode}},findViewByModel:function(t){var e=i.isString(t)?t:t.id;return this._views[e]},findViewsFromPoint:function(t){t=s.point(t);var e=i.map(this.model.getElements(),this.findViewByModel,this);return i.filter(e,function(e){return e&&s.rect(e.vel.bbox(!1,this.viewport)).containsPoint(t)},this)},findViewsInArea:function(t,e){e=i.defaults(e||{},{strict:!1}),t=s.rect(t);var n=i.map(this.model.getElements(),this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return i.filter(n,function(e){return e&&t[r](s.rect(e.vel.bbox(!1,this.viewport)))},this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t){var e=r(this.viewport).toLocalPoint(t.x,t.y);return{x:s.snapToGrid(e.x,this.options.gridSize),y:s.snapToGrid(e.y,this.options.gridSize)}},clientToLocalPoint:function(t){t=s.point(t);var e=r("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});r(this.svg).prepend(e);var i=n(this.svg).offset();e.remove();var o=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollLeft||document.documentElement.scrollLeft;return t.offset(a-i.left,o-i.top),r.transformPoint(t,this.viewport.getCTM().inverse())},linkAllowed:function(t){var e;if(t instanceof a.dia.Link)e=t;else{if(!(t instanceof a.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var n=e.get("source"),r=e.get("target");if(n.id&&r.id){var o=e.getSourceElement();if(o){var s=this.model.getConnectedLinks(o,{outbound:!0,inbound:!1}),l=i.filter(s,function(t){var e=t.get("source"),i=t.get("target");return e&&e.id===n.id&&(!e.port||e.port===n.port)&&i&&i.id===r.id&&(!i.port||i.port===r.port)}).length;if(l>1)return!1}}}return!!(this.options.linkPinning||i.has(e.get("source"),"id")&&i.has(e.get("target"),"id"))},getDefaultLink:function(t,e){return i.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){t=t||{};var e=t.highlighter,n=this.options;if(i.isUndefined(e)){var r=i.chain(t).pick("embedding","connecting","magnetAvailability","elementAvailability").keys().first().value();e=r&&n.highlighting[r]||n.highlighting["default"]}if(!e)return!1;i.isString(e)&&(e={name:e});var o=e.name,s=n.highlighterNamespace[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){if(n=this.resolveHighlighter(n)){var r=n.name+e.id+JSON.stringify(n.options);if(!this._highlights[r]){var o=n.highlighter;o.highlight(t,e,i.clone(n.options)),this._highlights[r]={cellView:t,magnetEl:e,opt:n.options,highlighter:o}}}},onCellUnhighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options),r=this._highlights[n];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[n]=null)}},mousedblclick:function(t){t.preventDefault(),t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},guard:function(t,e){return!(!this.options.guard||!this.options.guard(t,e))||(t.data&&!i.isUndefined(t.data.guarded)?t.data.guarded:!(e&&e.model&&e.model instanceof a.dia.Cell)&&(this.svg!==t.target&&this.el!==t.target&&!n.contains(this.svg,t.target)))},contextmenu:function(t){t=a.util.normalizeEvent(t),this.options.preventContextMenu&&t.preventDefault();var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){t.preventDefault(),this._mousemoved=0;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?(this.sourceView=e,e.pointerdown(t,i.x,i.y)):this.trigger("blank:pointerdown",t,i.x,i.y)}},pointermove:function(t){if(this.sourceView){t.preventDefault(),t=a.util.normalizeEvent(t),this._mousemoved++;var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView.pointermove(t,e.x,e.y)}},pointerup:function(t){t=a.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},mousewheel:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=t.originalEvent,n=this.snapToGrid({x:i.clientX,y:i.clientY}),r=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));e?e.mousewheel(t,n.x,n.y,r):this.trigger("blank:mousewheel",t,n.x,n.y,r)}},cellMouseover:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.el.style.backgroundImage="none",this},drawGrid:function(t){t=i.defaults(t||{},this.options.drawGrid,{color:"#aaa",thickness:1});var e=this.options.gridSize;if(e<=1)return this.clearGrid();var n=r(this.viewport).scale(),o=n.sx,s=n.sy,a=this.options.origin.x,l=this.options.origin.y,c=e*o,u=e*s,h=document.createElement("canvas");h.width=c,h.height=u,c=a>=0?a%c:c+a%c,u=l>=0?l%u:u+l%u;var g=h.getContext("2d");g.beginPath(),g.rect(c,u,t.thickness*o,t.thickness*s),g.fillStyle=t.color,g.fill();var d=h.toDataURL("image/png");return this.el.style.backgroundImage='url("'+d+'")',this},setInteractivity:function(t){this.options.interactive=t,i.invoke(this._views,"setInteractivity",t)}}),function(t,e){var i=function(t){var i=e.cloneDeep(t);this.ports=[],this.groups=this._getNormalizedGroups(i),this._init(i)};i.prototype={getPorts:function(){return this.ports},getPort:function(t){return e.find(this.ports,function(e){return e.id===t})},getGroup:function(t){return this.groups[t]||this._createGroupNode()},addPort:function(t){t=this._evaluatePort(t),this.ports.push(t)},_init:function(t){t=t||{};var i=t.items||[];e.each(i,function(t){this.addPort(t)},this)},_evaluatePort:function(t){var i=e.clone(t),n=e.extend(this._createGroupNode(),t.group?this.groups[t.group]:null);return i.markup=i.markup||n.markup,i.attrs=e.merge({},n.attrs,i.attrs),i.position=e.merge(this._createPositionNode(),n.position,{args:i.args}),i.label=e.merge({},n.label,this._getLabel(i)),i.z=this._getZIndex(i.z,n.z),i},_getZIndex:function(t,i){return e.isNumber(t)?t:e.isNumber(i)||"auto"===i?i:"auto"},_createPositionNode:function(){return{name:"left",args:{}}},_createGroupNode:function(){return{position:{},label:{position:{name:"left",args:{}}}}},_getNormalizedGroups:function(t){return t=t||{},t.groups=t.groups||{},e.each(t.groups,function(t){t.position=this._getPosition(t.position,!0),t.label=this._getLabel(t,!0)},this),t.groups},_getPosition:function(t,i){var n,r={};e.isFunction(t)?(n="fn",r.fn=t):e.isString(t)?n=t:e.isUndefined(t)?n=i?"left":null:e.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):e.isObject(t)&&(n=t.name,e.extend(r,t.args));var o={args:r};return n&&(o.name=n),o},_getLabel:function(t,e){var i=t.label||{},n=i;return n.position=this._getPosition(i.position,e),n}},e.extend(t.dia.Element.prototype,{_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},i={};e.each(t.items,function(t){i[t.id]=!0});var n=this.previous("ports")||{},r={};e.each(n.items,function(t){i[t.id]||(r[t.id]=!0)});var o=this.graph;if(o&&!e.isEmpty(r)){var s=o.getConnectedLinks(this,{inbound:!0});e.each(s,function(t){r[t.get("target").port]&&t.remove()});var a=o.getConnectedLinks(this,{outbound:!0});e.each(a,function(t){r[t.get("source").port]&&t.remove()})}},hasPorts:function(){return this.prop("ports/items").length>0},hasPort:function(t){return this.getPortIndex(t)!==-1},getPorts:function(){return e.cloneDeep(this.prop("ports/items"))||[]},getPort:function(t){return e.cloneDeep(e.find(this.prop("ports/items"),function(e){return e.id&&e.id===t}))},getPortIndex:function(t){var i=e.isObject(t)?t.id:t;return this._isValidPortId(i)?e.findIndex(this.prop("ports/items"),{id:i}):-1},addPort:function(t,i){if(!e.isObject(t)||e.isArray(t))throw new Error("Element: addPort requires an object.");var n=e.clone(this.prop("ports/items"))||[];return n.push(t),this.prop("ports/items",n,i),this},portProp:function(t,i,n,r){var o=this.getPortIndex(t);if(o===-1)throw new Error("Element: unable to find port with id "+t);var s;return e.isString(i)?(s=Array.prototype.slice.call(arguments,1),s[0]=["ports/items/",o,"/",i].join("")):s=["ports/items/"+o,i,n],this.prop.apply(this,s)},_validatePorts:function(){var i=this.get("ports")||{},n=[];i=i||{};var r=i.items||[];return e.each(r,function(e){this._isValidPortId(e.id)||(e.id=t.util.uuid())},this),e.uniq(r,"id").length!==r.length&&n.push("Element: found id duplicities in ports."),n},_isValidPortId:function(t){return!e.isNull(t)&&!e.isUndefined(t)&&!e.isObject(t)},addPorts:function(t,i){return t.length&&this.prop("ports/items",(e.clone(this.prop("ports/items"))||[]).concat(t),i),this},removePort:function(t,i){var n=i||{},r=e.clone(this.prop("ports/items")),o=this.getPortIndex(t);return o!==-1&&(r.splice(o,1),n.rewrite=!0,this.prop("ports/items",r,n)),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this.portData=new i(this.get("ports"))}}),e.extend(t.dia.ElementView.prototype,{portContainerMarkup:'<g class="joint-port"/>',portMarkup:'<circle class="joint-port-body" r="10" fill="#FFFFFF" stroke="#000000"/>',portLabelMarkup:'<text class="joint-port-label" fill="#000000"/>',_portElementsCache:null,_initializePorts:function(){this._portElementsCache={},this.listenTo(this.model,"change:ports",function(){this._refreshPorts()})},_refreshPorts:function(){this._removePorts(),this._portElementsCache={},this._renderPorts()},_renderPorts:function(){var t=[],i=this._getContainerElement();e.each(i.node.childNodes,function(e){t.push(e)});var n=e.groupBy(this.model.portData.getPorts(),"z"),r="auto";e.each(n[r],function(e){var n=this._getPortElement(e);i.append(n),t.push(n)},this),e.each(n,function(e,i){if(i!==r){var o=parseInt(i,10);this._appendPorts(n[i],o,t)}},this),this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,i,n){var o=this._getContainerElement(),s=e.map(t,this._getPortElement,this);n[i]||i<0?r(n[Math.max(i,0)]).before(s):o.append(s)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},_updatePorts:function(){var t=s.rect(this.model.get("size")),i=this.model.portData.getPorts();e.each(e.groupBy(i,"group"),function(i,n){var r=this.model.portData.getGroup(n);e.each(i,this._updatePortAttrs,this),this._layoutPorts(i,r,t.clone())},this)},_removePorts:function(){e.invoke(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e=r(this._getPortMarkup(t)),i=r(this._getPortLabelMarkup(t.label));if(e&&e.length>1)throw new Error("ElementView: Invalid port markup - multiple roots.");e.attr({port:t.id,"port-group":t.group});var n=r(this.portContainerMarkup).append(e).append(i);return this._portElementsCache[t.id]={portElement:n,portLabelElement:i},n},_updatePortAttrs:function(t){var e=t.attrs||{},i=this._portElementsCache[t.id];i&&this._updateAllAttrs(i.portElement.node,e)},_updateAllAttrs:function(t,i){e.each(i,function(e,i){var r="."===i?n(t):n(t).find(i);this.updateAttr(r,e)},this)},_layoutPorts:function(i,n,r){var o=n.position.name,a=t.layout.Port;a[o]||(o="left");var l=a[o](e.pluck(i,"position.args"),r,n.position.args||{});e.each(l,function(e,n){var o=this.model.portData.getPort(i[n].id),a=this._portElementsCache[o.id]||{};this.applyPortTransform(a.portElement,e);var l=t.layout.PortLabel,c=o.label.position.name;if(l[c]){var u=l[c](s.point(e),r,o.label.position.args);this.applyPortTransform(a.portLabelElement,u,-(e.angle||0))}},this)},applyPortTransform:function(t,e,i){var n=r.createSVGMatrix().rotate(i||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0}),this._updateAllAttrs(t.node,e.attrs||{})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}})}(a,i),a.shapes.basic={},a.shapes.basic.Generic=a.dia.Element.extend({defaults:i.defaultsDeep({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},a.dia.Element.prototype.defaults)}),a.shapes.basic.Rect=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.TextView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),a.shapes.basic.Text=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:i.defaultsDeep({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},a.shapes.basic.Generic.prototype.defaults)
}),a.shapes.basic.Circle=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Ellipse=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Polygon=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Polyline=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Image=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Path=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:i.defaultsDeep({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Rhombus=a.shapes.basic.Path.extend({defaults:i.defaultsDeep({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},a.shapes.basic.Path.prototype.defaults)}),a.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){if(this._portSelectors){var e=i.omit(this.get("attrs"),this._portSelectors);this.set("attrs",e,{silent:!0})}this._portSelectors=[];var n={};i.each(this.get("inPorts"),function(t,e,r){var o=this.getPortAttrs(t,e,r.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(i.keys(o)),i.extend(n,o)},this),i.each(this.get("outPorts"),function(t,e,r){var o=this.getPortAttrs(t,e,r.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(i.keys(o)),i.extend(n,o)},this),this.attr(n,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",i=this.get("inPorts").indexOf(t);if(i<0&&(e=".outPorts",i=this.get("outPorts").indexOf(t),i<0))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(i+1)+")>.port-body"}},a.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),a.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),a.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),n=a.util.template(this.model.portMarkup);i.each(i.filter(this.model.ports,function(t){return"in"===t.type}),function(e,i){t.append(r(n({id:i,port:e})).node)}),i.each(i.filter(this.model.ports,function(t){return"out"===t.type}),function(t,i){e.append(r(n({id:i,port:t})).node)})}},a.shapes.basic.TextBlock=a.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',a.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),defaults:i.defaultsDeep({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},a.shapes.basic.Generic.prototype.defaults),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":i.clone(e),div:{style:i.clone(e)}})},updateContent:function(t,e){a.env.test("svgforeignobject")?this.attr({".content":{html:e}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),a.shapes.basic.TextBlockView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.noSVGForeignObjectElement=!a.env.test("svgforeignobject"),a.env.test("svgforeignobject")||this.listenTo(this.model,"change:content change:size",function(t){this.updateContent(t)})},update:function(t,e){if(a.env.test("svgforeignobject"))a.dia.ElementView.prototype.update.call(this,n,e);else{var n=this.model,r=i.omit(e||n.get("attrs"),".content");a.dia.ElementView.prototype.update.call(this,n,r),e&&!i.has(e,".content")||this.updateContent(n,e)}},updateContent:function(t,e){var n=i.merge({},(e||t.get("attrs"))[".content"]);n=i.omit(n,"text");var r=a.util.breakText(t.get("content"),t.get("size"),n,{svgDocument:this.paper.svg}),o=a.util.setByPath({},".content",n,"/");o[".content"].text=r,a.dia.ElementView.prototype.update.call(this,t,o)}}),a.routers.manhattan=function(t,e,i){"use strict";function n(t){this.map={},this.options=t,this.mapGridSize=100}function r(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function o(e){return t.point(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function s(e,i,n,r){for(var s,a=[],l=o(r.difference(i)),c=i;s=e[c];){var u=o(c.difference(s));u.equals(l)||(a.unshift(c),l=u),c=s}var h=o(t.point(c).difference(n));return h.equals(l)||a.unshift(c),a}function a(t,i,n){var r=n.step,o=t.center(),s=e.chain(n.directionMap).pick(i).map(function(e){var i=e.x*t.width/2,n=e.y*t.height/2,s=o.clone().offset(i,n);return t.containsPoint(s)&&s.offset(e.x*r,e.y*r),s.snapToGrid(r)}).value();return s}function l(e,i,n){var r=360/n;return Math.floor(t.normalizeAngle(e.theta(i)+r/2)/r)*r}function c(t,e){var i=Math.abs(t-e);return i>180?360-i:i}function u(t,e){for(var i=1/0,n=0,r=e.length;n<r;n++){var o=t.manhattanDistance(e[n]);o<i&&(i=o)}return i}function h(i,n,o,h){var g,d,p,f,I=h.step;if(i instanceof t.rect?(g=a(i,h.startDirections,h),p=i.center().snapToGrid(I)):(p=i.clone().snapToGrid(I),g=[p]),n instanceof t.rect?(d=a(n,h.endDirections,h),f=n.center().snapToGrid(I)):(f=n.clone().snapToGrid(I),d=[f]),g=e.filter(g,o.isPointAccessible,o),d=e.filter(d,o.isPointAccessible,o),g.length>0&&d.length>0){var m=new r,C={},A={};e.each(g,function(t){var e=t.toString();m.add(e,u(t,d)),A[e]=0});for(var y,v,b=h.directions,w=b.length,x=h.maximumLoops,N=e.invoke(d,"toString");!m.isEmpty()&&x>0;){var M=m.pop(),j=t.point(M),k=A[M],D=z,z=C[M]?l(C[M],j,w):null!=h.previousDirAngle?h.previousDirAngle:l(p,j,w);if(N.indexOf(M)>=0&&(v=c(z,l(j,f,w)),j.equals(f)||v<180))return h.previousDirAngle=z,s(C,j,p,f);for(var T=0;T<w;T++)if(y=b[T],v=c(z,y.angle),!(D&&v>h.maxAllowedDirectionChange)){var G=j.clone().offset(y.offsetX,y.offsetY),Z=G.toString();if(!m.isClose(Z)&&o.isPointAccessible(G)){var S=k+y.cost+h.penalties[v];(!m.isOpen(Z)||S<A[Z])&&(C[Z]=j,A[Z]=S,m.add(Z,S+u(G,d)))}}x--}}return h.fallbackRoute(p,f,h)}function g(i){i.directions=e.result(i,"directions"),i.penalties=e.result(i,"penalties"),i.paddingBox=e.result(i,"paddingBox"),e.each(i.directions,function(e){var i=t.point(0,0),n=t.point(e.offsetX,e.offsetY);e.angle=t.normalizeAngle(i.theta(n))})}function d(r,o){g(o),this.options.perpendicular=!!o.perpendicular;for(var s=t.rect(this.sourceBBox).moveAndExpand(o.paddingBox),a=t.rect(this.targetBBox).moveAndExpand(o.paddingBox),l=new n(o).build(this.paper.model,this.model),c=e.map(r,t.point),u=[],d=s.center().snapToGrid(o.step),p=0,f=c.length;p<=f;p++){var I=null,m=C||s,C=c[p];if(!C){C=a;var A=!this.model.get("source").id||!this.model.get("target").id;if(A&&e.isFunction(o.draggingRoute)){var y=m instanceof t.rect?m.center():m;I=o.draggingRoute(y,C.origin(),o)}}if(I=I||h(m,C,l,o),null===I){if(!e.isFunction(i.routers.orthogonal))throw new Error("Manhattan requires the orthogonal router.");return i.routers.orthogonal(r,o,this)}var v=e.first(I);v&&v.equals(d)&&I.shift(),d=e.last(I)||d,Array.prototype.push.apply(u,I)}return u}var p={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:e.constant(null),draggingRoute:null};return n.prototype.build=function(t,i){var n=this.options,r=e.chain(n.excludeEnds).map(i.get,i).pluck("id").map(t.getCell,t).value(),o=[],s=t.getCell(i.get("source").id);s&&(o=e.union(o,e.map(s.getAncestors(),"id")));var a=t.getCell(i.get("target").id);a&&(o=e.union(o,e.map(a.getAncestors(),"id")));var l=this.mapGridSize;return e.chain(t.getElements()).difference(r).reject(function(t){return e.contains(n.excludeTypes,t.get("type"))||e.contains(o,t.id)}).invoke("getBBox").invoke("moveAndExpand",n.paddingBox).foldl(function(t,e){for(var i=e.origin().snapToGrid(l),n=e.corner().snapToGrid(l),r=i.x;r<=n.x;r+=l)for(var o=i.y;o<=n.y;o+=l){var s=r+"@"+o;t[s]=t[s]||[],t[s].push(e)}return t},this.map).value(),this},n.prototype.isPointAccessible=function(t){var i=t.clone().snapToGrid(this.mapGridSize).toString();return e.every(this.map[i],function(e){return!e.containsPoint(t)})},r.prototype.add=function(t,i){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=i;var n=e.sortedIndex(this.items,t,function(t){return this.values[t]},this);this.items.splice(n,0,t)},r.prototype.remove=function(t){this.hash[t]=this.CLOSE},r.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},r.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},r.prototype.isEmpty=function(){return 0===this.items.length},r.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,i,n){return d.call(n,t,e.extend({},p,i))}}(s,i,a),a.routers.metro=function(){if(!i.isFunction(a.routers.manhattan))throw new Error("Metro requires the manhattan router.");var t={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,i){var n=t.theta(e),r={x:e.x,y:t.y},o={x:t.x,y:e.y};if(n%180>90){var a=r;r=o,o=a}var l=n%90<45?r:o,c=s.line(t,l),u=90*Math.ceil(n/90),h=s.point.fromPolar(c.squaredLength(),s.toRad(u+135),l),g=s.line(e,h),d=c.intersection(g);return d?[d.round(),e]:[e]}};return function(e,n,r){return a.routers.manhattan(e,i.extend({},t,n),r)}}(),a.routers.normal=function(t,e,i){return t},a.routers.oneSide=function(t,e,i){var n,r,o,s=e.side||"bottom",a=e.padding||40,l=i.sourceBBox,c=i.targetBBox,u=l.center(),h=c.center();switch(s){case"bottom":o=1,n="y",r="height";break;case"top":o=-1,n="y",r="height";break;case"left":o=-1,n="x",r="width";break;case"right":o=1,n="x",r="width";break;default:throw new Error("Router: invalid side")}return u[n]+=o*(l[r]/2+a),h[n]+=o*(c[r]/2+a),o*(u[n]-h[n])>0?h[n]=u[n]:u[n]=h[n],[u].concat(t,h)},a.routers.orthogonal=function(){function t(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function e(t,e){return t["W"==e||"E"==e?"width":"height"]}function n(t,e){return s.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function r(t){return s.rect(t.x,t.y,0,0)}function o(t,e){var i=Math.min(t.x,e.x),n=Math.min(t.y,e.y),r=Math.max(t.x+t.width,e.x+e.width),o=Math.max(t.y+t.height,e.y+e.height);return s.rect(i,n,r-i,o-n)}function a(t,e,i){var n=s.point(t.x,e.y);return i.containsPoint(n)&&(n=s.point(e.x,t.y)),n}function l(e,i,n){var r=s.point(e.x,i.y),o=s.point(i.x,e.y),a=t(e,r),l=t(e,o),c=p[n],u=a==n||a!=c&&(l==c||l!=n)?r:o;return{points:[u],direction:t(u,i)}}function c(e,i,n){var r=a(e,i,n);return{points:[r],direction:t(r,i)}}function u(n,r,o,l){var c,u={},h=[s.point(n.x,r.y),s.point(r.x,n.y)],g=i.filter(h,function(t){return!o.containsPoint(t)}),d=i.filter(g,function(e){return t(e,n)!=l});if(d.length>0)c=i.filter(d,function(e){return t(n,e)==l}).pop(),c=c||d[0],u.points=[c],u.direction=t(c,r);else{c=i.difference(h,g)[0];var p=s.point(r).move(c,-e(o,l)/2),f=a(p,n,o);u.points=[f,p],u.direction=t(p,r)}return u}function h(i,n,r,o){var a=c(n,i,o),u=a.points[0];if(r.containsPoint(u)){a=c(i,n,r);var h=a.points[0];if(o.containsPoint(h)){var g=s.point(i).move(h,-e(r,t(i,h))/2),d=s.point(n).move(u,-e(o,t(n,u))/2),p=s.line(g,d).midpoint(),f=c(i,p,r),I=l(p,n,f.direction);a.points=[f.points[0],I.points[0]],a.direction=I.direction}}return a}function g(e,i,r,l,c){var u,h,g,d={},p=n(o(r,l),1),I=p.center().distance(i)>p.center().distance(e),m=I?i:e,C=I?e:i;return c?(u=s.point.fromPolar(p.width+p.height,f[c],m),u=p.pointNearestToPoint(u).move(u,-1)):u=p.pointNearestToPoint(m).move(m,1),h=a(u,C,p),u.round().equals(h.round())?(h=s.point.fromPolar(p.width+p.height,s.toRad(u.theta(m))+Math.PI/2,C),h=p.pointNearestToPoint(h).move(C,1).round(),g=a(u,h,p),d.points=I?[h,g,u]:[u,g,h]):d.points=I?[h,u]:[u,h],d.direction=I?t(u,i):t(h,i),d}function d(e,o,a){var d=o.elementPadding||20,p=[],f=n(a.sourceBBox,d),I=n(a.targetBBox,d);e=i.map(e,s.point),e.unshift(f.center()),e.push(I.center());for(var m,C=0,A=e.length-1;C<A;C++){var y=null,v=e[C],b=e[C+1],w=!!t(v,b);if(0==C)C+1==A?f.intersect(n(I,1))?y=g(v,b,f,I):w||(y=h(v,b,f,I)):f.containsPoint(b)?y=g(v,b,f,n(r(b),d)):w||(y=c(v,b,f));else if(C+1==A){var x=w&&t(b,v)==m;I.containsPoint(v)||x?y=g(v,b,n(r(v),d),I,m):w||(y=u(v,b,I,m))}else w||(y=l(v,b,m));y?(Array.prototype.push.apply(p,y.points),m=y.direction):m=t(v,b),C+1<A&&p.push(b)}return p}var p={N:"S",S:"N",E:"W",W:"E"},f={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};return d}(),a.connectors.normal=function(t,e,n){var r=["M",t.x,t.y];return i.each(n,function(t){r.push(t.x,t.y)}),r.push(e.x,e.y),r.join(" ")},a.connectors.rounded=function(t,e,n,r){r=r||{};var o,a,l,c,u,h,g=r.radius||10,d=["M",t.x,t.y];return i.each(n,function(i,r){u=n[r-1]||t,h=n[r+1]||e,l=c||s.point(i).distance(u)/2,c=s.point(i).distance(h)/2,o=s.point(i).move(u,-Math.min(g,l)).round(),a=s.point(i).move(h,-Math.min(g,c)).round(),d.push(o.x,o.y,"S",i.x,i.y,a.x,a.y,"L")}),d.push(e.x,e.y),d.join(" ")},a.connectors.smooth=function(t,e,i){var n;if(i.length)n=s.bezier.curveThroughPoints([t].concat(i).concat([e]));else{var r=(t.x+e.x)/2;n=["M",t.x,t.y,"C",r,t.y,r,e.y,e.x,e.y]}return n.join(" ")},a.connectors.jumpover=function(t,e){function i(t,i,n){var r=[].concat(t,n,i);return r.reduce(function(t,i,n){var o=r[n+1];return null!=o&&(t[n]=e.line(i,o)),t},[])}function n(t){var e=t.paper._jumpOverUpdateList;null==e&&(e=t.paper._jumpOverUpdateList=[],t.paper.on("cell:pointerup",r),t.paper.model.on("reset",function(){e=[]})),e.indexOf(t)<0&&(e.push(t),t.listenToOnce(t.model,"change:connector remove",function(){e.splice(e.indexOf(t),1)}))}function r(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function o(e,i){return t(i).map(function(t){return e.intersection(t)}).compact().value()}function s(t,i){return e.line(t,i).squaredLength()}function a(t,i,n){return i.reduce(function(r,o,s){if(o.skip===!0)return r;var a=r.pop()||t,l=e.point(o).move(a.start,-n),c=e.point(o).move(a.start,+n),u=i[s+1];if(null!=u){var g=c.distance(u);g<=n&&(c=u.move(a.start,g),u.skip=!0)}else{var d=l.distance(a.end);if(d<2*n+h)return r.push(a),r}var p=c.distance(a.start);if(p<2*n+h)return r.push(a),r;var f=e.line(l,c);return f.isJump=!0,r.push(e.line(a.start,l),f,e.line(c,a.end)),r},[])}function l(i,n,r){var o=["M",i[0].start.x,i[0].start.y],s=t(i).map(function(t){if(t.isJump){var i;if("arc"===r){i=t.start.difference(t.end);var o=Number(i.x<0&&i.y<0);return["A",n,n,0,0,o,t.end.x,t.end.y]}if("gap"===r)return["M",t.end.x,t.end.y];if("cubic"===r){i=t.start.difference(t.end);var s=t.start.theta(t.end),a=.6*n,l=1.35*n;i.x<0&&i.y<0&&(l*=-1);var c=e.point(t.start.x+a,t.start.y+l).rotate(t.start,s),u=e.point(t.end.x-a,t.end.y+l).rotate(t.end,s);return["C",c.x,c.y,u.x,u.y,t.end.x,t.end.y]}}return["L",t.end.x,t.end.y]}).flatten().value();return[].concat(o,s).join(" ")}var c=5,u=["arc","gap","cubic"],h=1,g=["smooth"];return function(e,r,h,d){n(this);var p=d.size||c,f=d.jump&&(""+d.jump).toLowerCase(),I=d.ignoreConnectors||g;u.indexOf(f)===-1&&(f=u[0]);var m=this.paper,C=m.model,A=C.getLinks();if(1===A.length)return l(i(e,r,h),p,f);var y=this.model,v=A.indexOf(y),b=m.options.defaultConnector||{},w=A.filter(function(e,i){var n=e.get("connector")||b;return!t.contains(I,n.name)&&(!(i>v)||"jumpover"!==n.name)}),x=w.map(function(t){return m.findViewByModel(t)}),N=i(e,r,h),M=x.map(function(t){return null==t?[]:t===this?N:i(t.sourcePoint,t.targetPoint,t.route)},this),j=N.reduce(function(e,i){var n=t(w).map(function(t,e){return t===y?null:o(i,M[e])}).flatten().compact().sortBy(t.partial(s,i.start)).value();return n.length>0?e.push.apply(e,a(i,n,p)):e.push(i),e},[]);return l(j,p,f)}}(i,s),function(t,e,i){function n(e,i,n){var r=e.toJSON();return r.angle=i||0,t.defaults({},n,r)}function r(i,r,o){return t.map(i,function(t,e,i){var r=this.pointAt((e+.5)/i.length);return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),n(r.round(),0,t)},e.line(r,o))}function o(i,r,o,s){var a=r.center(),l=r.width/r.height,c=r.topMiddle(),u=e.Ellipse.fromRect(r);return t.map(i,function(t,e,i){var r=o+s(e,i.length),h=c.clone().rotate(a,-r).scale(l,1,a),g=t.compensateRotation?-u.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(a,t.dr),n(h.round(),g,t)})}function s(i,n){var r=n.x;t.isString(r)&&(r=parseFloat(r)/100*i.width);var o=n.y;return t.isString(o)&&(o=parseFloat(o)/100*i.height),e.point(r||0,o||0)}i.layout.Port={absolute:function(e,i,n){return t.map(e,t.partial(s,i))},fn:function(t,e,i){return i.fn(t,e,i)},line:function(t,e,i){var n=s(e,i.start||e.origin()),o=s(e,i.end||e.corner());return r(t,n,o)},left:function(t,e,i){return r(t,e.origin(),e.bottomLeft())},right:function(t,e,i){return r(t,e.topRight(),e.corner())},top:function(t,e,i){return r(t,e.origin(),e.topRight())},bottom:function(t,e,i){return r(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,i){var n=i.startAngle||0,r=i.step||360/t.length;return o(t,e,n,function(t){return t*r})},ellipse:function(t,e,i){var n=i.startAngle||0,r=i.step||20;return o(t,e,n,function(t,e){return(t+.5-e/2)*r})}}}(i,s,a),function(t,e,i){function n(e,i){return t.defaultsDeep({},e,i,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function r(e,i,r,s){s=t.defaults({},s,{offset:15});var a,l,c,u,h=i.center().theta(e),g=o(i),d=s.offset,p=0;h<g[1]||h>g[2]?(c=".3em",a=d,l=0,u="start"):h<g[0]?(c="0",a=0,l=-d,r?(p=-90,u="start"):u="middle"):h<g[3]?(c=".3em",a=-d,l=0,u="end"):(c=".6em",a=0,l=d,r?(p=90,u="start"):u="middle");var f=Math.round;return n({x:f(a),y:f(l),angle:p,attrs:{".":{y:c,"text-anchor":u}}})}function o(t){var e=t.center(),i=e.theta(t.origin()),n=e.theta(t.bottomLeft()),r=e.theta(t.corner()),o=e.theta(t.topRight());return[i,o,r,n]}function s(e,i,r,s){var a=i.center().theta(e);s=t.defaults({},s,{offset:15});var l,c,u,h,g=s.offset,d=0,p=o(i);a<p[1]||a>p[2]?(u=".3em",l=-g,c=0,h="end"):a<p[0]?(u=".6em",l=0,c=g,r?(d=90,h="start"):h="middle"):a<p[3]?(u=".3em",l=g,c=0,h="start"):(u="0em",l=0,c=-g,r?(d=-90,h="start"):h="middle");var f=Math.round;return n({x:f(l),y:f(c),angle:d,attrs:{".":{y:u,"text-anchor":h}}})}function a(i,r,o){o=t.defaults({},o,{offset:20});var s,a=e.point(0,0),l=-i.theta(a),c=l,u=i.clone().move(a,o.offset).difference(i).round(),h=".3em";(l+90)%180===0?(s=r?"end":"middle",r||l!==-270||(h="0em")):l>-270&&l<-90?(s="start",c=l-180):s="end";var g=Math.round;return n({x:g(u.x),y:g(u.y),angle:r?c:0,attrs:{".":{y:h,"text-anchor":s}}})}i.layout.PortLabel={manual:t.rearg(n,2),left:function(t,e,i){return n(i,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,i){return n(i,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,i){return n(i,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,i){return n(i,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,i){return r(t,e,!0,i)},outside:function(t,e,i){return r(t,e,!1,i)},insideOriented:function(t,e,i){return s(t,e,!0,i)},inside:function(t,e,i){return s(t,e,!1,i)},radial:function(t,e,i){return a(t.difference(e.center()),!1,i)},radialOriented:function(t,e,i){return a(t.difference(e.center()),!0,i)}}}(i,s,a),a.highlighters.addClass={className:a.util.addClassNamePrefix("highlighted"),highlight:function(t,e,i){var n=i||{},o=n.className||this.className;r(e).addClass(o)},unhighlight:function(t,e,i){var n=i||{},o=n.className||this.className;r(e).removeClass(o)}},a.highlighters.opacity={highlight:function(t,e){r(e).addClass(a.util.addClassNamePrefix("highlight-opacity"))},unhighlight:function(t,e){r(e).removeClass(a.util.addClassNamePrefix("highlight-opacity"))}},a.highlighters.stroke={defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},highlight:function(t,e,n){if(!this._views[e.id]){var o=i.defaults(n||{},this.defaultOptions),s=r(e),l=s.bbox(!0);try{var c=s.convertToPathData()}catch(u){c=r.rectToPath(i.extend({},o,l))}var h=r("path").attr({d:c,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(o.attrs);h.transform(t.el.getCTM().inverse()),h.transform(e.getCTM());var g=o.padding;if(g){var d=l.x+l.width/2,p=l.y+l.height/2,f=(l.width+g)/l.width,I=(l.height+g)/l.height;h.transform({a:f,b:0,c:0,d:I,e:d-f*d,f:p-I*p})}var m=this._views[e.id]=new a.mvc.View({className:"highlight-stroke",el:h.node,$el:h});m.listenTo(t.model,"remove",m.remove),t.vel.append(h)}},unhighlight:function(t,e,i){this._views[e.id]&&(this._views[e.id].remove(),this._views[e.id]=null)}},a.shapes.erd={},a.shapes.erd.Entity=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:i.defaultsDeep({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.WeakEntity=a.shapes.erd.Entity.extend({defaults:i.defaultsDeep({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},a.shapes.erd.Entity.prototype.defaults)}),a.shapes.erd.Relationship=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:i.defaultsDeep({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.IdentifyingRelationship=a.shapes.erd.Relationship.extend({defaults:i.defaultsDeep({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},a.shapes.erd.Relationship.prototype.defaults)}),a.shapes.erd.Attribute=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:i.defaultsDeep({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.Multivalued=a.shapes.erd.Attribute.extend({defaults:i.defaultsDeep({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Derived=a.shapes.erd.Attribute.extend({defaults:i.defaultsDeep({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Key=a.shapes.erd.Attribute.extend({defaults:i.defaultsDeep({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Normal=a.shapes.erd.Attribute.extend({defaults:i.defaultsDeep({type:"erd.Normal",attrs:{text:{text:"Normal"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.ISA=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:i.defaultsDeep({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.Line=a.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),a.shapes.fsa={},a.shapes.fsa.State=a.shapes.basic.Circle.extend({defaults:i.defaultsDeep({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},a.shapes.basic.Circle.prototype.defaults)}),a.shapes.fsa.StartState=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:i.defaultsDeep({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},a.dia.Element.prototype.defaults)}),a.shapes.fsa.EndState=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:i.defaultsDeep({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},a.dia.Element.prototype.defaults)}),a.shapes.fsa.Arrow=a.dia.Link.extend({defaults:i.defaultsDeep({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},a.dia.Link.prototype.defaults)}),a.shapes.org={},a.shapes.org.Member=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',defaults:i.defaultsDeep({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},a.dia.Element.prototype.defaults)}),a.shapes.org.Arrow=a.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),a.shapes.chess={},a.shapes.chess.KingWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.KingWhite",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KingBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',
defaults:i.defaultsDeep({type:"chess.KingBlack",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.QueenWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.QueenWhite",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.QueenBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.QueenBlack",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.RookWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.RookWhite",size:{width:32,height:34}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.RookBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.RookBlack",size:{width:32,height:34}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.BishopWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.BishopWhite",size:{width:38,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.BishopBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.BishopBlack",size:{width:38,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KnightWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.KnightWhite",size:{width:38,height:37}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KnightBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:i.defaultsDeep({type:"chess.KnightBlack",size:{width:38,height:37}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.PawnWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:i.defaultsDeep({type:"chess.PawnWhite",size:{width:28,height:33}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.PawnBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:i.defaultsDeep({type:"chess.PawnBlack",size:{width:28,height:33}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn={},a.shapes.pn.Place=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:i.defaultsDeep({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn.PlaceView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){a.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(r("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(r("<circle/>").node,r("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(r("<circle/>").node,r("<circle/>").node,r("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(r("<text/>").text(e+"").node)}}}),a.shapes.pn.Transition=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:i.defaultsDeep({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn.Link=a.dia.Link.extend({defaults:i.defaultsDeep({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},a.dia.Link.prototype.defaults)}),a.shapes.devs={},a.shapes.devs.Model=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',defaults:i.defaultsDeep({type:"devs.Model",inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{"in":{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},a.shapes.basic.Generic.prototype.defaults),initialize:function(){a.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,n){var r=i.uniq(this.get("inPorts")),o=i.difference(i.uniq(this.get("outPorts")),r),s=this.createPortItems("in",r),a=this.createPortItems("out",o);this.prop("ports/items",s.concat(a),i.extend({rewrite:!0},n))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return i.map(e,i.bind(this.createPortItem,this,t))},_addGroupPort:function(t,e,n){var r=this.get(e);return this.set(e,i.isArray(r)?r.concat(t):[t],n)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,n){return this.set(e,i.without(this.get(e),t),n)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,n){return this.prop("ports/groups/"+t,i.isObject(e)?e:{},n)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),a.shapes.devs.Atomic=a.shapes.devs.Model.extend({defaults:i.defaultsDeep({type:"devs.Atomic",size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}},a.shapes.devs.Model.prototype.defaults)}),a.shapes.devs.Coupled=a.shapes.devs.Model.extend({defaults:i.defaultsDeep({type:"devs.Coupled",size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}},a.shapes.devs.Model.prototype.defaults)}),a.shapes.devs.Link=a.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),a.shapes.uml={},a.shapes.uml.Class=a.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:i.defaultsDeep({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},a.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],n=0;i.each(e,function(e){var r=i.isArray(e.text)?e.text:[e.text],o=20*r.length+20;t[".uml-class-"+e.type+"-text"].text=r.join("\n"),t[".uml-class-"+e.type+"-rect"].height=o,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+n+")",n+=o})}}),a.shapes.uml.ClassView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),a.shapes.uml.Abstract=a.shapes.uml.Class.extend({defaults:i.defaultsDeep({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},a.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),a.shapes.uml.AbstractView=a.shapes.uml.ClassView,a.shapes.uml.Interface=a.shapes.uml.Class.extend({defaults:i.defaultsDeep({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},a.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),a.shapes.uml.InterfaceView=a.shapes.uml.ClassView,a.shapes.uml.Generalization=a.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),a.shapes.uml.Implementation=a.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),a.shapes.uml.Aggregation=a.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),a.shapes.uml.Composition=a.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),a.shapes.uml.Association=a.dia.Link.extend({defaults:{type:"uml.Association"}}),a.shapes.uml.State=a.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:i.defaultsDeep({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},a.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),a.shapes.uml.StartState=a.shapes.basic.Circle.extend({defaults:i.defaultsDeep({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},a.shapes.basic.Circle.prototype.defaults)}),a.shapes.uml.EndState=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:i.defaultsDeep({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.uml.Transition=a.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),a.shapes.logic={},a.shapes.logic.Gate=a.shapes.basic.Generic.extend({defaults:i.defaultsDeep({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},a.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),a.shapes.logic.IO=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:i.defaultsDeep({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Input=a.shapes.logic.IO.extend({defaults:i.defaultsDeep({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,"class":"output",port:"out"},text:{text:"input"}}},a.shapes.logic.IO.prototype.defaults)}),a.shapes.logic.Output=a.shapes.logic.IO.extend({defaults:i.defaultsDeep({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive","class":"input",port:"in"},text:{text:"output"}}},a.shapes.logic.IO.prototype.defaults)}),a.shapes.logic.Gate11=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:i.defaultsDeep({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Gate21=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:i.defaultsDeep({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Repeater=a.shapes.logic.Gate11.extend({defaults:i.defaultsDeep({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="
}}},a.shapes.logic.Gate11.prototype.defaults),operation:function(t){return t}}),a.shapes.logic.Not=a.shapes.logic.Gate11.extend({defaults:i.defaultsDeep({type:"logic.Not",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate11.prototype.defaults),operation:function(t){return!t}}),a.shapes.logic.Or=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t||e}}),a.shapes.logic.And=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t&&e}}),a.shapes.logic.Nor=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t||e)}}),a.shapes.logic.Nand=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.Nand",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="
}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t&&e)}}),a.shapes.logic.Xor=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||e)&&(t||!e)}}),a.shapes.logic.Xnor=a.shapes.logic.Gate21.extend({defaults:i.defaultsDeep({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||!e)&&(t||e)}}),a.shapes.logic.Wire=a.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:i.defaultsDeep({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},a.dia.Link.prototype.defaults)}),"object"==typeof exports)var l=require("graphlib"),c=require("dagre");return l=l||"undefined"!=typeof window&&window.graphlib,c=c||"undefined"!=typeof window&&window.dagre,a.layout.DirectedGraph={layout:function(t,e){var n;n=t instanceof a.dia.Graph?t:(new a.dia.Graph).resetCells(t,{dry:!0}),t=null,e=i.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var r=n.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),o={},l=e.marginX||0,u=e.marginY||0;e.rankDir&&(o.rankdir=e.rankDir),e.align&&(o.align=e.align),e.nodeSep&&(o.nodesep=e.nodeSep),e.edgeSep&&(o.edgesep=e.edgeSep),e.rankSep&&(o.ranksep=e.rankSep),l&&(o.marginx=l),u&&(o.marginy=u),r.setGraph(o),c.layout(r,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),n.fromGraphLib(r,{importNode:function(t,i){var n=this.getCell(t),r=i.node(t);e.setPosition?e.setPosition(n,r):n.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,i){var n=this.getCell(t.name),r=i.edge(t),o=r.points||[];e.setLinkVertices&&(e.setVertices?e.setVertices(n,o):n.set("vertices",o.slice(1,o.length-1)))}}),e.resizeClusters&&i.chain(r.nodes()).filter(function(t){return r.children(t).length>0}).map(n.getCell,n).sortBy(function(t){return-t.getAncestors().length}).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),n.stopBatch("layout");var h=r.graph();return s.Rect(l,u,Math.abs(h.width-2*l),Math.abs(h.height-2*u))},fromGraphLib:function(t,e){e=e||{};var n=e.importNode||i.noop,r=e.importEdge||i.noop,o=this instanceof a.dia.Graph?this:new a.dia.Graph;return t.nodes().forEach(function(i){n.call(o,i,t,o,e)}),t.edges().forEach(function(i){r.call(o,i,t,o,e)}),o},toGraphLib:function(t,e){e=e||{};var n=i.pick(e,"directed","compound","multigraph"),r=new l.Graph(n),o=e.setNodeLabel||i.noop,s=e.setEdgeLabel||i.noop,a=e.setEdgeName||i.noop;return t.get("cells").each(function(t){if(t.isLink()){var e=t.get("source"),i=t.get("target");if(!e.id||!i.id)return;r.setEdge(e.id,i.id,s(t),a(t))}else r.setNode(t.id,o(t)),r.isCompound()&&t.has("parent")&&r.setParent(t.id,t.get("parent"))}),r}},a.dia.Graph.prototype.toGraphLib=function(t){return a.layout.DirectedGraph.toGraphLib(this,t)},a.dia.Graph.prototype.fromGraphLib=function(t,e){return a.layout.DirectedGraph.fromGraphLib.call(this,t,e)},a.g=s,a.V=a.Vectorizer=r,a});var _links=[],buildDiagram=function(){function t(t,o,s){var a=joint.dia.LinkView.extend({mouseover:function(t,e,i){},mouseout:function(){}}),l=new joint.dia.Graph,c=new joint.dia.Paper({gridSize:1,model:l,interactive:e,linkView:a}),u=new joint.ui.PaperScroller({autoResizePaper:!0,paper:c});c.on("blank:pointerdown",u.startPanning),u.$el.css({width:$(window).width()-x,height:$(window).height()-x}),$("#"+o).append(u.render().el),u.center(),window.onresize=function(t){u.$el.css({width:$(window).width()-x,height:$(window).height()-x})},i&&c.on("cell:pointerdown",function(t,e,i,n){for(var r=this.model.getElements(),o=0;o<r.length;o++)if(r[o].findView(c)==t){r[o].toFront();break}for(var s=this.model.getLinks(),o=0;o<s.length;o++)if(s[o].findView(c)==t){s[o].toFront();break}});var h=[];_.each(t.tables,function(t){h.push({data:t,type:"table"})}),_.each(t.views,function(t){h.push({data:t,type:"view"})}),_.each(t.shortcuts,function(t){h.push({data:t,type:"shortcut"})}),_.each(t.sequences,function(t){h.push({data:t,type:"sequence"})}),_.each(t.labels,function(t){h.push({data:t,type:"label"})});for(var g=0;g<h.length;g++){var d=h[g].data;d.position.x=d.position.x*n,d.position.y=d.position.y*n;var p;switch(h[g].type){case"table":p=new Table({attrs:{".table-link":{"xlink:href":d.link,"xlink:show":"new",cursor:"pointer"},".columns-link":{"xlink:href":d.columns_link,"xlink:show":"new",cursor:"pointer"},".indicies-link":{"xlink:href":d.indicies_link,"xlink:show":"new",cursor:"pointer"},".triggers-link":{"xlink:href":d.triggers_link,"xlink:show":"new",cursor:"pointer"}},dbId:d.id,name:d.name,position:{x:d.position.x,y:d.position.y},columns:d.columns,indicies:d.indicies,triggers:d.triggers,refCount:0});break;case"view":p=new TableView({attrs:{".view-link":{"xlink:href":d.link,"xlink:show":"new",cursor:"pointer"},".columns-link":{"xlink:href":d.columns_link,"xlink:show":"new",cursor:"pointer"},".indicies-link":{"xlink:href":d.indicies_link,"xlink:show":"new",cursor:"pointer"},".triggers-link":{"xlink:href":d.triggers_link,"xlink:show":"new",cursor:"pointer"}},dbId:d.id,name:d.name,position:{x:d.position.x,y:d.position.y},columns:d.columns,refCount:0});break;case"shortcut":p=new TableShortcut({attrs:{".shortcut-link":{"xlink:href":d.link,"xlink:show":"new",cursor:"pointer"}},dbId:d.id,name:d.name,position:{x:d.position.x,y:d.position.y},fields:d.fields,refCount:0,isShortcut:!0});break;case"sequence":p=new Sequence({attrs:{".sequence-link":{"xlink:href":d.link,"xlink:show":"new",cursor:"pointer"}},dbId:d.id,name:d.name,position:{x:d.position.x,y:d.position.y}});break;case"label":p=new Label({name:d.text,position:{x:d.position.x,y:d.position.y}})}l.addCell(p)}_.each(t.references,function(t){var e,i=F(l,t.source),n=F(l,t.target);"ForeignKeyReference"==t.type?e=new ForeignKeyReference({attrs:{".ref-link":{"xlink:href":t.link,"xlink:show":"new",cursor:"pointer"}},source:{id:i.id,dbId:t.source},target:{id:n.id,dbId:t.target},childColumn:t.childColumn,parentColumn:t.parentColumn}):"MasterDetailReference"==t.type&&(e=new MasterDetailReference({attrs:{".ref-link":{"xlink:href":t.link,"xlink:show":"new",cursor:"pointer"}},source:{id:i.id,dbId:t.source},target:{id:n.id,dbId:t.target},childColumn:t.childColumn,parentColumn:t.parentColumn})),i.attributes.refCount++,n.attributes.refCount++,l.addCell(e),E(c,l,e)});var f=0,I=0,A=0,y=0;_.each(l.getElements(),function(t){A=A>t.getWidth()?A:t.getWidth(),y=y>t.getHeight()?y:t.getHeight(),f+=t.getWidth()*r,I+=t.getHeight()*r}),_.each(l.getLinks(),function(t){t.toBack()}),A+=50,y+=50;var b=0,w=l.getElements();if(s)for(var N=5;N<I;N+=y)for(var M=5;b<w.length&&M<f;M+=A,b++)w[b].translate(M,N);c.setDimensions(f,I);var j=new joint.dia.Graph,k=new joint.dia.Paper({el:$("#legend"),gridSize:1,width:400,height:35,model:j,interactive:!1}),D=new Legend({name:["Legend (click for expand/collapse)"],position:{x:5,y:5},attrs:{rect:{width:390,height:25}}});j.addCell(D),k.on("cell:pointerdown",function(t,e,i,n){for(var r=this.model.getElements(),o=0;o<r.length;o++)if(r[o].findView(k)==t&&"Legend"==r[o].attributes.type)if(1==r.length){var s=new Legend({name:["Legend (click for expand/collapse)"],position:{x:5,y:5},attrs:{rect:{width:390,height:180}}});k.setDimensions(400,190),j.clear(),j.addCell(s);var a=new Table({name:"Table",position:{x:20,y:50},attrs:{rect:{width:100},".table-name-text":{"font-size":v,"font-weight":"normal"}}});j.addCell(a);var l=new TableView({name:"View",position:{x:280,y:50},attrs:{rect:{width:100},".table-name-text":{"font-size":v,"font-weight":"normal"}}});j.addCell(l);var c=new ForeignKeyReference({type:"ForeignKeyReference",source:{id:a.id},target:{id:l.id},childColumn:"Foreign key reference, child (Table)",parentColumn:"parent (View)",labels:[{position:.5,y:.5,attrs:{text:{text:"Foreign key ref.","font-size":"14","font-family":"Consolas",transform:"translate(0, -15)"},rect:{opacity:0,transform:"translate(0, -15)"}}}]});j.addCell(c);var u=new TableShortcut({name:"Shortcut",position:{x:20,y:110},attrs:{rect:{width:100},".table-name-text":{"font-size":v,"font-weight":"normal"}}});j.addCell(u);var h=new Table({name:"Table",position:{x:280,y:110},attrs:{rect:{width:100},".table-name-text":{"font-size":v,"font-weight":"normal"}}});j.addCell(h);var g=new MasterDetailReference({type:"MasterDetailReference",source:{id:h.id},target:{id:u.id},childColumn:"Master-detail reference, child (Table)",parentColumn:"parent (Shortcut)",labels:[{position:.5,y:.5,attrs:{text:{text:"Master-detail ref.","font-size":"14","font-family":"Consolas",transform:"translate(0, -15)"},rect:{opacity:0,transform:"translate(0, -15)"}}}]});j.addCell(g);var d=new Table({name:"Sequence",position:{x:150,y:150},attrs:{rect:{width:100},".table-name-text":{"font-size":v,"font-weight":"normal"},".table-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:L},{offset:"100%",color:L}]}}}});j.addCell(d)}else{_.each(j.getLinks(),function(t){t.disconnect(),t.remove()}),_.each(j.getElements(),function(t){t.remove()});var s=new Legend({name:["Legend (click for expand/collapse)"],position:{x:5,y:5},attrs:{rect:{width:390,height:25}}});k.setDimensions(400,35),j.addCell(s)}}),U()}var e=!1,i=!0,n=1.1,r=2,o=30,s=.5,a="#4169E1",l="#DDEFFD",c="white",u="#FFF1D5",h="#FFFAF0",d="#FFF1D5",p="#FFFAF0",f="#FFF1D5",I="#FFFAF0",m=.25,C="black",A="Monospace",y=14,v=12,b=11,w=60,x=10,N=24,M=11,j=8,k=8,D=7,z=7,T=8,G="black",Z="#EBEBEB ",S="#E1FFE1",L="#FFD6AA";joint.ui.PaperScroller=Backbone.View.extend({className:"paper-scroller",events:{mousedown:"pointerdown",mousemove:"pointermove",touchmove:"pointermove",mouseout:"stopPanning"},options:{paper:void 0,padding:0,autoResizePaper:!1,minWidth:void 0,minHeight:void 0},initialize:function(t){_.bindAll(this,"startPanning","stopPanning"),this.options=_.extend({},_.result(this,"options"),t||{});var e=this.options.paper,i=V(e.viewport).scale();this._sx=i.sx,this._sy=i.sy,this._baseWidth=e.options.width,this._baseHeight=e.options.height,this.$el.append(e.el),this.addPadding(),this.listenTo(e,"scale",this.onScale),this.listenTo(e,"resize",this.onResize),this.options.autoResizePaper&&this.listenTo(e.model,"change add remove reset",this.adjustPaper),$(document.body).on("mouseup.stopPanning touchend.stopPanning",this.stopPanning)},onResize:function(){this._center&&this.center(this._center.x,this._center.y)},onScale:function(t,e,i,n){this._sx=t,this._sy=e,this.adjustPaper(),(i||n)&&this.center(i,n)},beforePaperManipulation:function(){this.$el.css("visibility","hidden")},afterPaperManipulation:function(){this.$el.css("visibility","visible")},toLocalPoint:function(t,e){var i=this.options.paper.viewport.getCTM();return t+=this.el.scrollLeft-this.padding.paddingLeft-i.e,t/=i.a,e+=this.el.scrollTop-this.padding.paddingTop-i.f,e/=i.d,g.point(t,e)},adjustPaper:function(){this._center=this.toLocalPoint(this.el.clientWidth/2,this.el.clientHeight/2);var t=this._sx,e=this._sy,i={gridWidth:this._baseWidth*t,gridHeight:this._baseHeight*e,allowNewOrigin:"negative"};return this.options.minWidth&&(i.minWidth=this.options.minWidth*t),this.options.minHeight&&(i.minHeight=this.options.minHeight*e),this.options.paper.fitToContent(i),this},center:function(t,e){var i=this.options.paper.viewport.getCTM(),n=-i.e,r=-i.f,o=n+this.options.paper.options.width,s=r+this.options.paper.options.height;_.isUndefined(t)||_.isUndefined(e)?(t=(n+o)/2,e=(r+s)/2):(t*=i.a,e*=i.d);var a=this.options.padding,l=this.el.clientWidth/2,c=this.el.clientHeight/2,u=l-a-t+n,h=l-a+t-o,g=c-a-e+r,d=c-a+e-s;return this.addPadding(Math.max(u,0),Math.max(h,0),Math.max(g,0),Math.max(d,0)),this.el.scrollLeft=t-l+i.e+this.padding.paddingLeft,this.el.scrollTop=e-c+i.f+this.padding.paddingTop,this},centerContent:function(){var t=V(this.options.paper.viewport).bbox(!0,this.options.paper.svg);return this.center(t.x+t.width/2,t.y+t.height/2),this},addPadding:function(t,e,i,n){var r=this.options.padding,o=this.padding={paddingLeft:Math.round(r+(t||0)),paddingTop:Math.round(r+(i||0))},s={marginBottom:Math.round(r+(n||0)),marginRight:Math.round(r+(e||0))};return o.paddingLeft=Math.min(o.paddingLeft,.9*this.el.clientWidth),o.paddingTop=Math.min(o.paddingTop,.9*this.el.clientHeight),this.$el.css(o),this.options.paper.$el.css(s),this},zoom:function(t,e){e=e||{};var i,n,r=this.toLocalPoint(this.el.clientWidth/2,this.el.clientHeight/2),o=t,s=t;if(e.absolute||(o+=this._sx,s+=this._sy),e.grid&&(o=Math.round(o/e.grid)*e.grid,s=Math.round(s/e.grid)*e.grid),e.max&&(o=Math.min(e.max,o),s=Math.min(e.max,s)),e.min&&(o=Math.max(e.min,o),s=Math.max(e.min,s)),_.isUndefined(e.ox)||_.isUndefined(e.oy))i=r.x,n=r.y;else{var a=o/this._sx,l=s/this._sy;i=e.ox-(e.ox-r.x)/a,n=e.oy-(e.oy-r.y)/l}return this.beforePaperManipulation(),this.options.paper.scale(o,s),this.center(i,n),this.afterPaperManipulation(),this},zoomToFit:function(t){t=t||{};var e=this.options.paper,i=_.clone(e.options.origin);return t.fittingBBox=t.fittingBBox||_.extend({},g.point(i),{width:this.$el.width()+this.padding.paddingLeft,height:this.$el.height()+this.padding.paddingTop}),this.beforePaperManipulation(),e.scaleContentToFit(t),e.setOrigin(i.x,i.y),this.adjustPaper().centerContent(),this.afterPaperManipulation(),this},startPanning:function(t){t=joint.util.normalizeEvent(t),this._panning=!0,this._clientX=t.clientX,this._clientY=t.clientY},pan:function(t){if(this._panning){t=joint.util.normalizeEvent(t);var e=t.clientX-this._clientX,i=t.clientY-this._clientY;this.el.scrollTop-=i,this.el.scrollLeft-=e,this._clientX=t.clientX,this._clientY=t.clientY}},stopPanning:function(){delete this._panning},pointerdown:function(t){t.target==this.el&&this.options.paper.pointerdown.apply(this.options.paper,arguments)},pointermove:function(t){this.pan.apply(this,arguments),t.target==this.el&&this.options.paper.pointermove.apply(this.options.paper,arguments);
},remove:function(){Backbone.View.prototype.remove.apply(this,arguments),$(document.body).off(".stopPanning",this.stopPanning)}});var B=function(t,e){return t.x*e.y-t.y*e.x},O=function(t){return{topLeft:{x:t.attributes.position.x,y:t.attributes.position.y},topRight:{x:t.attributes.position.x+t.getWidth(),y:t.attributes.position.y},botRight:{x:t.attributes.position.x+t.getWidth(),y:t.attributes.position.y+t.getHeight()},botLeft:{x:t.attributes.position.x,y:t.attributes.position.y+t.getHeight()}}},P=function(t,e){t.x-=e.x,t.y-=e.y},W=function(t,e){P(t.topLeft,e),P(t.topRight,e),P(t.botRight,e),P(t.botLeft,e)},Y=function(t,e){var i=R(t),n=O(t),r=O(e);return W(r,i),W(n,i),B(n.topLeft,r.botLeft)<0&&B(n.topRight,r.botRight)>0?"bottom":B(n.topRight,r.topLeft)<0&&B(n.botRight,r.botLeft)>0?"left":B(n.botRight,r.topRight)<0&&B(n.botLeft,r.topLeft)>0?"top":B(n.botLeft,r.botRight)<0&&B(n.topLeft,r.topRight)>0?"right":void 0},R=function(t){return{x:t.attributes.position.x+t.getWidth()/2,y:t.attributes.position.y+t.getHeight()/2}},E=function(t,e,i){var n=F(e,i.attributes.source.dbId),r=F(e,i.attributes.target.dbId),s=R(n),a=R(r),l={x:a.x-s.x,y:a.y-s.y};if(!(Math.abs(l.x)<o||Math.abs(l.y)<o)){var c={source:{x:{},y:{}},target:{x:{},y:{}}},u=Y(n,r);switch(u){case"top":c.source.x=s.x,c.source.y=n.attributes.position.y-o,c.target.x=a.x,c.target.y=r.attributes.position.y+r.getHeight()+o;break;case"right":c.source.x=n.attributes.position.x+n.getWidth()+o,c.source.y=s.y,c.target.x=r.attributes.position.x-o,c.target.y=a.y;break;case"bottom":c.source.x=s.x,c.source.y=n.attributes.position.y+n.getHeight()+o,c.target.x=a.x,c.target.y=r.attributes.position.y-o;break;case"left":c.source.x=n.attributes.position.x-o,c.source.y=s.y,c.target.x=r.attributes.position.x+r.getWidth()+o,c.target.y=a.y}X(t,i,c.target),X(t,i,c.source)}},X=function(t,e,i){e.findView(t).addVertex({x:i.x,y:i.y})},U=function(){for(var t=$('text:contains("@")'),e=0;e<t.length;e++)if(0==$(t[e]).has("tspan").length){var i=$(t[e]).text();$(t[e]).html('<tspan dy="0em" x="0"class="line">'+i+"</tspan>")}for(var n=$('tspan:contains("@")'),e=0;e<n.length;e++){var r=$(n[e]).text().split("@")[0],o=_links[e];void 0!=o?$(n[e]).html('<a xlink:href="'+o+'" xlink:show="new" cursor="pointer">'+r+"</a>"):$(n[e]).html(r)}},F=function(t,e){for(var i,n=t.getElements(),r=0;r<n.length;r++)if(n[r].attributes.dbId==e){i=n[r];break}return i};return Legend=joint.shapes.basic.Generic.extend({markup:['<rect class="table-name-rect" cursor="pointer"/><text class="table-name-text" cursor="pointer"/>'].join(""),defaults:joint.util.deepSupplement({type:"Legend",attrs:{rect:{width:w,height:0},".table-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:"MintCream"},{offset:"100%",color:"MintCream"}]}},".table-name-text":{ref:".table-name-rect","ref-y":15,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-family":A}},name:[]},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change",function(){this.updateRectangles(),this.trigger("table-update")},this),this.updateRectangles(),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateRectangles:function(){var t=this.get("attrs");t[".table-name-text"].text=this.get("name").join("\n")}}),ForeignKeyReference=joint.dia.Link.extend({markup:['<path class="connection" stroke="'+a+'" stroke-width="'+s+'" /><path class="marker-target" fill="'+a+'" stroke="'+a+'" /><path class="connection-wrap"><title class="ref-desc">%title</title></path>'].join(""),defaults:{type:"ForeignKeyReference",attrs:{".marker-target":{d:"M 12 0 L 0 6 L 12 12 z"}},source:{},target:{}},initialize:function(t){t&&t.id||this.set("id",joint.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this),this.setTitle()},setTitle:function(){this.markup=this.markup.toString().replace("%title",this.attributes.childColumn+" => "+this.attributes.parentColumn)}}),MasterDetailReference=ForeignKeyReference.extend({defaults:{type:"MasterDetailReference",attrs:{".marker-target":{d:"M 12 0 L 0 6 L 12 12 z"},".connection":{"stroke-dasharray":"10, 5"}}}}),Table=joint.shapes.basic.Generic.extend({markup:['<rect class="table-name-rect"/><rect class="table-columns-title-rect"/><rect class="table-columns-rect"/><rect class="table-indicies-title-rect"/><rect class="table-indicies-rect"/><rect class="table-triggers-title-rect"/><rect class="table-triggers-rect"/><a class="table-link"><text class="table-name-text"/></a><text class="table-columns-title-text"/><text class="table-columns-text"/><text class="table-columns-pk-text"/><text class="table-indicies-title-text"/><text class="table-indicies-text"/><text class="table-triggers-title-text"/><text class="table-triggers-text"/>'].join(""),defaults:joint.util.deepSupplement({type:"Table",attrs:{rect:{width:w},height:0,".table-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:l},{offset:"100%",color:l}]}},".table-columns-title-rect":{stroke:C,"stroke-width":m,fill:u},".table-columns-rect":{stroke:C,"stroke-width":m,fill:h},".table-indicies-title-rect":{stroke:C,"stroke-width":m,fill:d},".table-indicies-rect":{stroke:C,"stroke-width":m,fill:p},".table-triggers-title-rect":{stroke:C,"stroke-width":m,fill:f},".table-triggers-rect":{stroke:C,"stroke-width":m,fill:I},".table-name-text":{ref:".table-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":y,"font-family":A,"font-weight":"bold"},".table-columns-title-text":{ref:".table-columns-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-columns-text":{ref:".table-columns-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A},".table-columns-pk-text":{ref:".table-columns-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A,"font-weight":"bold"},".table-indicies-title-text":{ref:".table-indicies-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-indicies-text":{ref:".table-indicies-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A},".table-triggers-title-text":{ref:".table-triggers-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-triggers-text":{ref:".table-triggers-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A}},name:[],columns_title:"Columns",columns:[],indicies_title:"Indicies",indicies:[],triggers_title:"Triggers",triggers:[]},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:columns-title change:columns change:columns-pk change:indicies-title change:indicies change:triggers-title change:triggers",function(){this.updateRectangles(),this.trigger("table-update")},this),this.updateRectangles(),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getWidth:function(){return this.get("attrs").rect.width},getHeight:function(){return this.get("attrs").height},getName:function(){return this.get("name")},updateRectangles:function(){var t,e,i=this.get("attrs"),n=this.getWidth(),r=this.getHeight(),o=[{type:"name",title:this.getName()},{type:"columns",title:this.get("columns_title"),text:this.get("columns")},{type:"indicies",title:this.get("indicies_title"),text:this.get("indicies")},{type:"triggers",title:this.get("triggers_title"),text:this.get("triggers")}],s=[],a=0,l=0,c=0,u=0;_.each(o,function(e){var n=_.isArray(e.text)?e.text:[e.text],o=24;if("name"==e.type)t=e.title,i[".table-name-text"].text=t,i[".table-name-rect"].height=o,i[".table-name-rect"].transform="translate(0,"+u+")",u+=o,r+=o;else{for(var a=[],l=!1,c=0;c<n.length;c++)"columns"==e.type?"*"==n[c].charAt(0)?(n[c]=n[c].replace("*",""),a.push(n[c]),s.push(n[c]),n[c]="",l=!0):a.push(""):s.push(n[c]);for(var c=0;c<a.length;c++){var h=a[c].split("@")[0];if(""!=h){var g=a[c].split("@")[1];this._links.push(g),a[c]=h+"@"}}for(var c=0;c<n.length;c++){var h=n[c].split("@")[0];if(""!=h){var g=n[c].split("@")[1];this._links.push(g),n[c]=h+"@"}}_.each(n,function(t){s.push(t)}),0!=n.length&&(i[".table-"+e.type+"-title-text"].text=e.title,i[".table-"+e.type+"-title-rect"].height=o,i[".table-"+e.type+"-title-rect"].transform="translate(0,"+u+")",u+=o,r+=o,o=n.length*M+j,"columns"==e.type&&l&&(i[".table-columns-pk-text"].text=a.join("\n")),i[".table-"+e.type+"-text"].text=n.join("\n"),i[".table-"+e.type+"-rect"].height=o,i[".table-"+e.type+"-rect"].transform="translate(0,"+u+")",u+=o,r+=o)}}),_.each(s,function(t){t=t.split("@")[0],e=t.length-k<=0?0:(t.length-k)*D,c=c<e?e:c}),l=t.length-z<=0?0:(t.length-z)*T,a=l>c?l:c,n+=a,this.get("attrs").rect.width=n,this.get("attrs").height=r}}),TableShortcut=joint.shapes.basic.Generic.extend({markup:['<rect class="table-name-rect"/><rect class="table-fields-rect"/><a class="shortcut-link"><text class="table-name-text"/></a><text class="table-fields-text"/>'].join(""),defaults:joint.util.deepSupplement({type:"TableShortcut",attrs:{rect:{width:w},height:0,".table-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:Z},{offset:"100%",color:Z}]}},".table-fields-rect":{stroke:C,"stroke-width":m,fill:h},".table-name-text":{ref:".table-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":y,"font-family":A,"font-weight":"bold"},".table-fields-text":{ref:".table-fields-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A,"font-weight":"bold"}},name:[],fields:[]},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:field",function(){this.updateRectangles(),this.trigger("table-update")},this),this.updateRectangles(),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getWidth:function(){return this.get("attrs").rect.width},getHeight:function(){return this.get("attrs").height},getName:function(){return this.get("name")},updateRectangles:function(){var t,e,i,n=this.get("attrs"),r=this.getWidth(),o=this.getHeight(),s=[{type:"name",title:this.getName(),text:this.getName()},{type:"fields",title:"",text:this.get("fields")}],a=0,l=0,c=0,u=0;_.each(s,function(i){var r=i.text,s=N;if("name"==i.type&&(e=r,n[".table-name-text"].text=e,n[".table-name-rect"].height=s,n[".table-name-rect"].transform="translate(0,"+u+")",u+=s,o+=s),"fields"==i.type&&0!=r){for(var a=0;a<r.length;a++){var l=r[a].split("@")[0];if(""!=l){var c=r[a].split("@")[1];this._links.push(c),r[a]=l+"@"}}t=r,s=r.length*M+j,n[".table-fields-text"].text=t.join("\n"),n[".table-fields-rect"].height=s,n[".table-fields-rect"].transform="translate(0,"+u+")",u+=s,o+=s}}),_.each(t,function(t){t=t.split("@")[0],i=t.length-k<=0?0:(t.length-k)*D,c=c<i?i:c}),l=e.length-z<=0?0:(e.length-z)*T,a=l>c?l:c,r+=a,this.get("attrs").rect.width=r,this.get("attrs").height=o}}),Sequence=joint.shapes.basic.Generic.extend({markup:['<rect class="seq-name-rect"/><rect class="seq-field-rect"/><a class="sequence-link"><text class="seq-name-text"/></a><text class="seq-field-text"/>'].join(""),defaults:joint.util.deepSupplement({type:"Sequence",attrs:{rect:{width:w},height:0,".seq-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:L},{offset:"100%",color:L}]}},".seq-field-rect":{stroke:C,"stroke-width":m,fill:h},".seq-name-text":{ref:".seq-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":y,"font-family":A,"font-weight":"bold"},".seq-field-text":{ref:".seq-field-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":b,"font-family":A,"font-style":"italic"}},name:[]},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:field",function(){this.updateRectangles(),this.trigger("table-update")},this),this.updateRectangles(),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getWidth:function(){return this.get("attrs").rect.width},getHeight:function(){return this.get("attrs").height},getName:function(){return this.get("name")},updateRectangles:function(){var t,e=this.get("attrs"),i=this.getWidth(),n=this.getHeight(),r=[{type:"name",title:this.getName(),text:this.getName()}],o=0,s=0;_.each(r,function(i){var r=i.text,o=N;t=r,e[".seq-name-text"].text=t,e[".seq-name-rect"].height=o,e[".seq-name-rect"].transform="translate(0,"+s+")",s+=o,n+=o,e[".seq-field-text"].text="Sequence",e[".seq-field-rect"].height=o,e[".seq-field-rect"].transform="translate(0,"+s+")",s+=o,n+=o}),o=t.length-z<=0?0:(t.length-z)*T,i+=o,this.get("attrs").rect.width=i,this.get("attrs").height=n}}),TableView=Table.extend({markup:['<rect class="table-name-rect"/><rect class="table-columns-title-rect"/><rect class="table-columns-rect"/><rect class="table-indicies-title-rect"/><rect class="table-indicies-rect"/><rect class="table-triggers-title-rect"/><rect class="table-triggers-rect"/><a class="view-link"><text class="table-name-text"/></a><text class="table-columns-title-text"/><text class="table-columns-text"/><text class="table-columns-pk-text"/><text class="table-indicies-title-text"/><text class="table-indicies-text"/><text class="table-triggers-title-text"/><text class="table-triggers-text"/>'].join(""),defaults:joint.util.deepSupplement({type:"TableView",attrs:{rect:{width:w},height:0,".table-name-rect":{stroke:C,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:S},{offset:"100%",color:S}]}},".table-columns-title-rect":{stroke:C,"stroke-width":m,fill:u},".table-columns-rect":{stroke:C,"stroke-width":m,fill:h},".table-indicies-title-rect":{stroke:C,"stroke-width":m,fill:d},".table-indicies-rect":{stroke:C,"stroke-width":m,fill:p},".table-triggers-title-rect":{stroke:C,"stroke-width":m,fill:f},".table-triggers-rect":{stroke:C,"stroke-width":m,fill:I},".table-name-text":{ref:".table-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":y,"font-family":A,"font-weight":"bold"},".table-columns-title-text":{ref:".table-columns-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-columns-text":{ref:".table-columns-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A},".table-columns-pk-text":{ref:".table-columns-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A,"font-weight":"bold"},".table-indicies-title-text":{ref:".table-indicies-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-indicies-text":{ref:".table-indicies-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A},".table-triggers-title-text":{ref:".table-triggers-title-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":v,"font-style":"italic","font-family":A},".table-triggers-text":{ref:".table-triggers-rect","ref-y":5,"ref-x":5,fill:G,"font-size":b,"font-family":A}},name:[],columns_title:"Columns",columns:[],indicies_title:"Indicies",indicies:[],triggers_title:"Triggers",triggers:[]},joint.shapes.basic.Generic.prototype.defaults)}),Label=joint.shapes.basic.Generic.extend({markup:['<rect class="label-rect"/><text class="label-text"/>'].join(""),defaults:joint.util.deepSupplement({type:"Label",attrs:{rect:{width:w},height:0,".label-rect":{stroke:c,"stroke-width":m,fill:{type:"linearGradient",stops:[{offset:"0%",color:c},{offset:"100%",color:c}]}},".label-text":{ref:".label-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle",fill:G,"font-size":y,"font-family":A,"font-style":"italic"}},label:[]},joint.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:label",function(){this.updateRectangles(),this.trigger("table-update")},this),this.updateRectangles(),joint.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getWidth:function(){return this.get("attrs").rect.width},getHeight:function(){return this.get("attrs").height},getName:function(){return this.get("name")},updateRectangles:function(){var t,e=this.get("attrs"),i=this.getWidth(),n=this.getHeight(),r=[{type:"label",text:this.getName()}],o=0,s=0;_.each(r,function(i){var r=i.text,o=N;t=r,e[".label-text"].text=t,e[".label-rect"].height=o,e[".label-rect"].transform="translate(0,"+s+")",s+=o,n+=o}),o=t.length-z<=0?0:(t.length-z)*T,i+=o,this.get("attrs").rect.width=i,this.get("attrs").height=n}}),t}();!function(){console.log("jQuery is "+jQuery),console.log("$ is "+$),console.log("_ is "+_),console.log("Backbone is "+Backbone)}();